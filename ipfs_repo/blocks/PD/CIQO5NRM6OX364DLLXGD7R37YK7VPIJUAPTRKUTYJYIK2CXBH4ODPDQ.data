
Š€€€nt){this._terminateContentCheck();return;}
if(this._content===updatedContent){delete this._lastAcceptedContent;this._terminateContentCheck();return;}
if(!this.isDirty()||this._workingCopy===updatedContent){this._contentCommitted(updatedContent,false);this._terminateContentCheck();return;}
var shouldUpdate=window.confirm(Common.UIString('This file was changed externally. Would you like to reload it?'));if(shouldUpdate)
this._contentCommitted(updatedContent,false);else
this._lastAcceptedContent=updatedContent;this._terminateContentCheck();}}
forceLoadOnCheckContent(){this._forceLoadOnCheckContent=true;}
requestOriginalContent(){var callback;var promise=new Promise(fulfill=>callback=fulfill);this._project.requestFileContent(this,callback);return promise;}
_commitContent(content){if(this._project.canSetFileContent()){this._project.setFileContent(this,content,function(){});}else if(this._url&&Workspace.fileManager.isURLSaved(this._url)){Workspace.fileManager.save(this._url,content,false,function(){});Workspace.fileManager.close(this._url);}
this._contentCommitted(content,true);}
_contentCommitted(content,committedByUser){delete this._lastAcceptedContent;this._content=content;this._contentLoaded=true;var lastRevision=this.history.length?this.history[this.history.length-1]:null;if(!lastRevision||lastRevision._content!==this._content){var revision=new Workspace.Revision(this,this._content,new Date());this.history.push(revision);}
this._innerResetWorkingCopy();this.dispatchEventToListeners(Workspace.UISourceCode.Events.WorkingCopyCommitted,{content:content});this._project.workspace().dispatchEventToListeners(Workspace.Workspace.Events.WorkingCopyCommitted,{uiSourceCode:this,content:content});if(committedByUser){this._project.workspace().dispatchEventToListeners(Workspace.Workspace.Events.WorkingCopyCommittedByUser,{uiSourceCode:this,content:content});}}
saveAs(){Workspace.fileManager.save(this._url,this.workingCopy(),true,callback.bind(this));Workspace.fileManager.close(this._url);function callback(accepted){if(accepted)
this._contentCommitted(this.workingCopy(),true);}}
addRevision(content){this._commitContent(content);}
revertToOriginal(){function callback(content){if(typeof content!=='string')
return;this.addRevision(content);}
Host.userMetrics.actionTaken(Host.UserMetrics.Action.RevisionApplied);return this.requestOriginalContent().then(callback.bind(this));}
revertAndClearHistory(callback){function revert(content){if(typeof content!=='string')
return;this.addRevision(content);this.history=[];callback(this);}
Host.userMetrics.actionTaken(Host.UserMetrics.Action.RevisionApplied);this.requestOriginalContent().then(revert.bind(this));}
workingCopy(){if(this._workingCopyGetter){this._workingCopy=this._workingCopyGetter();delete this._workingCopyGetter;}
if(this.isDirty())
return this._workingCopy;return this._content;}
resetWorkingCopy(){this._innerResetWorkingCopy();this.dispatchEventToListeners(Workspace.UISourceCode.Events.WorkingCopyChanged);}
_innerResetWorkingCopy(){delete this._workingCopy;delete this._workingCopyGetter;}
setWorkingCopy(newWorkingCopy){this._workingCopy=newWorkingCopy;delete this._workingCopyGetter;this.dispatchEventToListeners(Workspace.UISourceCode.Events.WorkingCopyChanged);this._project.workspace().dispatchEventToListeners(Workspace.Workspace.Events.WorkingCopyChanged,{uiSourceCode:this});}
setWorkingCopyGetter(workingCopyGetter){this._workingCopyGetter=workingCopyGetter;this.dispatchEventToListeners(Workspace.UISourceCode.Events.WorkingCopyChanged);this._project.workspace().dispatchEventToListeners(Workspace.Workspace.Events.WorkingCopyChanged,{uiSourceCode:this});}
removeWorkingCopyGetter(){if(!this._workingCopyGetter)
return;this._workingCopy=this._workingCopyGetter();delete this._workingCopyGetter;}
commitWorkingCopy(){if(this.isDirty())
this._commitContent(this.workingCopy());}
isDirty(){return typeof this._workingCopy!=='undefined'||typeof this._workingCopyGetter!=='undefined';}
extension(){return Common.ParsedURL.extractExtension(this._name);}
content(){return this._content;}
searchInContent(query,caseSensitive,isRegex,callback){var content=this.content();if(!content){this._project.searchInFileContent(this,query,caseSensitive,isRegex,callback);return;}
setTimeout(doSearch.bind(null,content),0);function doSearch(content){callback(Common.ContentProvider.performSearchInContent(content,query,caseSensitive,isRegex));}}
_fireContentAvailable(content){this._contentLoaded=true;this._content=content;var callback=this._requestContentCallback;this._requestContentCallback=null;this._requestContentPromise=null;callback.call(null,content);}
contentLoaded(){return this._contentLoaded;}
uiLocation(lineNumber,columnNumber){if(typeof columnNumber==='undefined')
columnNumber=0;return new Workspace.UILocation(this,lineNumber,columnNumber);}
messages(){return this._messages.slice();}
addLineMessage(level,text,lineNumber,columnNumber){return this.addMessage(level,text,new Common.TextRange(lineNumber,columnNumber||0,lineNumber,columnNumber||0));}
addMessage(level,text,range){var message=new Workspace.UISourceCode.Message(this,level,text,range);this._messages.push(message);this.dispatchEventToListeners(Workspace.UISourceCode.Events.MessageAdded,message);return message;}
removeMessage(message){if(this._messages.remove(message))
this.dispatchEventToListeners(Workspace.UISourceCode.Events.MessageRemoved,message);}
removeAllMessages(){var messages=this._messages;this._messages=[];for(var message of messages)
this.dispatchEventToListeners(Workspace.UISourceCode.Events.MessageRemoved,message);}
addLineDecoration(lineNumber,type,data){var markers=this._lineDecorations.get(type);if(!markers){markers=new Map();this._lineDecorations.set(type,markers);}
var marker=new Workspace.UISourceCode.LineMarker(lineNumber,type,data);markers.set(lineNumber,marker);this.dispatchEventToListeners(Workspace.UISourceCode.Events.LineDecorationAdded,marker);}
removeLineDecoration(lineNumber,type){var markers=this._lineDecorations.get(type);if(!markers)
return;var marker=markers.get(lineNumber);if(!marker)
return;markers.delete(lineNumber);this.dispatchEventToListeners(Workspace.UISourceCode.Events.LineDecorationRemoved,marker);if(!markers.size)
this._lineDecorations.delete(type);}
removeAllLineDecorations(type){var markers=this._lineDecorations.get(type);if(!markers)
return;this._lineDecorations.delete(type);markers.forEach(marker=>{this.dispatchEventToListeners(Workspace.UISourceCode.Events.LineDecorationRemoved,marker);});}
lineDecorations(type){return this._lineDecorations.get(type)||null;}};Workspace.UISourceCode.Events={WorkingCopyChanged:Symbol('WorkingCopyChanged'),WorkingCopyCommitted:Symbol('WorkingCopyCommitted'),TitleChanged:Symbol('TitleChanged'),SourceMappingChanged:Symbol('SourceMappingChanged'),MessageAdded:Symbol('MessageAdded'),MessageRemoved:Symbol('MessageRemoved'),LineDecorationAdded:Symbol('LineDecorationAdded'),LineDecorationRemoved:Symbol('LineDecorationRemoved')};Workspace.UILocation=class{constructor(uiSourceCode,lineNumber,columnNumber){this.uiSourceCode=uiSourceCode;this.lineNumber=lineNumber;this.columnNumber=columnNumber;}
linkText(){var linkText=this.uiSourceCode.displayName();if(typeof this.lineNumber==='number')
linkText+=':'+(this.lineNumber+1);return linkText;}
id(){return this.uiSourceCode.project().id()+':'+this.uiSourceCode.url()+':'+this.lineNumber+':'+
this.columnNumber;}
toUIString(){return this.uiSourceCode.url()+':'+(this.lineNumber+1);}
static comparator(location1,location2){return location1.compareTo(location2);}
compareTo(other){if(this.uiSourceCode.url()!==other.uiSourceCode.url())
return this.uiSourceCode.url()>other.uiSourceCode.url()?1:-1;if(this.lineNumber!==other.lineNumber)
return this.lineNumber-other.lineNumber;return this.columnNumber-other.columnNumber;}};Workspace.Revision=class{constructor(uiSourceCode,content,timestamp){this._uiSourceCode=uiSourceCode;this._content=content;this._timestamp=timestamp;}
get uiSourceCode(){return this._uiSourceCode;}
get timestamp(){return this._timestamp;}
get content(){return this._content||null;}
revertToThis(){function revert(content){if(content&&this._uiSourceCode._content!==content)
this._uiSourceCode.addRevision(content);}
Host.userMetrics.actionTaken(Host.UserMetrics.Action.RevisionApplied);return this.requestContent().then(revert.bind(this));}
contentURL(){return this._uiSourceCode.url();}
contentType(){return this._uiSourceCode.contentType();}
requestContent(){return Promise.resolve((this._content||''));}
searchInContent(query,caseSensitive,isRegex,callback){callback([]);}};Workspace.UISourceCode.Message=class{constructor(uiSourceCode,level,text,range){this._uiSourceCode=uiSourceCode;this._level=level;this._text=text;this._range=range;}
uiSourceCode(){return this._uiSourceCode;}
level(){return this._level;}
text(){return this._text;}
range(){return this._range;}
lineNumber(){return this._range.startLine;}
columnNumber(){return this._range.startColumn;}
isEqual(another){return this._uiSourceCode===another._uiSourceCode&&this.text()===another.text()&&this.level()===another.level()&&this.range().equal(another.range());}
remove(){this._uiSourceCode.removeMessage(this);}};Workspace.UISourceCode.Message.Level={Error:'Error',Warning:'Warning'};Workspace.UISourceCode.LineMarker=class{constructor(line,type,data){this._line=line;this._type=type;this._data=data;}
line(){return this._line;}
type(){return this._type;}
data(){return this._data;}};Workspace.UISourceCodeMetadata=class{constructor(modificationTime,contentSize){this.modificationTime=modificationTime;this.contentSize=contentSize;}};;Workspace.ProjectSearchConfig=function(){};Workspace.ProjectSearchConfig.prototype={query:function(){},ignoreCase:function(){},isRegex:function(){},queries:function(){},filePathMatchesFileQuery:function(filePath){}};Workspace.Project=function(){};Workspace.Project.isServiceProject=function(project){return project.type()===Workspace.projectTypes.Debugger||project.type()===Workspace.projectTypes.Formatter||project.type()===Workspace.projectTypes.Service;};Workspace.Project.prototype={workspace:function(){},id:function(){},type:function(){},displayName:function(){},requestMetadata:function(uiSourceCode){},requestFileContent:function(uiSourceCode,callback){},canSetFileContent:function(){},setFileContent:function(uiSourceCode,newContent,callback){},canRename:function(){},rename:function(uiSourceCode,newName,callback){},excludeFolder:function(path){},createFile:function(path,name,content,callback){},deleteFile:function(path){},remove:function(){},searchInFileContent:function(uiSourceCode,query,caseSensitive,isRegex,callback){},findFilesMatchingSearchRequest:function(searchConfig,filesMathingFileQuery,progress,callback){},indexContent:function(progress){},uiSourceCodeForURL:function(url){},uiSourceCodes:function(){}};Workspace.projectTypes={Debugger:'debugger',Formatter:'formatter',Network:'network',Snippets:'snippets',FileSystem:'filesystem',ContentScripts:'contentscripts',Service:'service'};Workspace.ProjectStore=class{constructor(workspace,id,type,displayName){this._workspace=workspace;this._id=id;this._type=type;this._displayName=displayName;this._uiSourceCodesMap=new Map();this._uiSourceCodesList=[];this._project=(this);}
id(){return this._id;}
type(){return this._type;}
displayName(){return this._displayName;}
workspace(){return this._workspace;}
createUISourceCode(url,contentType){return new Workspace.UISourceCode(this._project,url,contentType);}
addUISourceCode(uiSourceCode,replace){var url=uiSourceCode.url();if(this.uiSourceCodeForURL(url)){if(replace)
this.removeUISourceCode(url);else
return false;}
this._uiSourceCodesMap.set(url,{uiSourceCode:uiSourceCode,index:this._uiSourceCodesList.length});this._uiSourceCodesList.push(uiSourceCode);this._workspace.dispatchEventToListeners(Workspace.Workspace.Events.UISourceCodeAdded,uiSourceCode);return true;}
removeUISourceCode(url){var uiSourceCode=this.uiSourceCodeForURL(url);if(!uiSourceCode)
return;var entry=this._uiSourceCodesMap.get(url);var movedUISourceCode=this._uiSourceCodesList[this._uiSourceCodesList.length-1];this._uiSourceCodesList[entry.index]=movedUISourceCode;var movedEntry=this._uiSourceCodesMap.get(movedUISourceCode.url());movedEntry.index=entry.index;this._uiSourceCodesList.splice(this._uiSourceCodesList.length-1,1);this._uiSourceCodesMap.delete(url);this._workspace.dispatchEventToListeners(Workspace.Workspace.Events.UISourceCodeRemoved,entry.uiSourceCode);}
removeProject(){this._workspace._removeProject(this._project);this._uiSourceCodesMap=new Map();this._uiSourceCodesList=[];}
uiSourceCodeForURL(url){var entry=this._uiSourceCodesMap.get(url);return entry?entry.uiSourceCode:null;}
uiSourceCodes(){return this._uiSourceCodesList;}
renameUISourceCode(uiSourceCode,newName){var oldPath=uiSourceCode.url();var newPath=uiSourceCode.parentURL()?uiSourceCode.parentURL()+'/'+newName:newName;var value=(this._uiSourceCodesMap.get(oldPath));this._uiSourceCodesMap.set(newPath,value);this._uiSourceCodesMap.delete(oldPath);}};Workspace.Workspace=class extends Common.Object{constructor(){super();this._projects=new Map();this._hasResourceContentTrackingExtensions=false;}
uiSourceCode(projectId,url){var project=this._projects.get(projectId);return project?project.uiSourceCodeForURL(url):null;}
uiSourceCodeForURL(url){for(var project of this._projects.values()){var uiSourceCode=project.uiSourceCodeForURL(url);if(uiSourceCode)
return uiSourceCode;}
return null;}
uiSourceCodesForProjectType(type){var result=[];for(var project of this._projects.values()){if(project.type()===type)
result=result.concat(project.uiSourceCodes());}
return result;}
addProject(project){console.assert(!this._projects.has(project.id()),`A project with id ${project.id()} already exists!`);this._projects.set(project.id(),project);this.dispatchEventToListeners(Workspace.Workspace.Events.ProjectAdded,project);}
_removeProject(project){this._projects.delete(project.id());this.dispatchEventToListeners(Workspace.Workspace.Events.ProjectRemoved,project);}
project(projectId){return this._projects.get(projectId)||null;}
projects(){return this._projects.valuesArray();}
projectsForType(type){function filterByType(project){return project.type()===type;}
return this.projects().filter(filterByType);}
uiSourceCodes(){var result=[];for(var project of this._projects.values())
result=result.concat(project.uiSourceCodes());return result;}
setHasResourceContentTrackingExtensions(hasExtensions){this._hasResourceContentTrackingExtensions=hasExtensions;}
hasResourceContentTrackingExtensions(){return this._hasResourceContentTrackingExtensions;}};Workspace.Workspace.Events={UISourceCodeAdded:Symbol('UISourceCodeAdded'),UISourceCodeRemoved:Symbol('UISourceCodeRemoved'),WorkingCopyChanged:Symbol('WorkingCopyChanged'),WorkingCopyCommitted:Symbol('WorkingCopyCommitted'),WorkingCopyCommittedByUser:Symbol('WorkingCopyCommittedByUser'),ProjectAdded:Symbol('ProjectAdded'),ProjectRemoved:Symbol('ProjectRemoved')};Workspace.workspace;;self['Bindings']=self['Bindings']||{};Bindings.LiveLocation=function(){};Bindings.LiveLocation.prototype={update:function(){},uiLocation:function(){},dispose:function(){},isBlackboxed:function(){}};Bindings.LiveLocationWithPool=class{constructor(updateDelegate,locationPool){this._updateDelegate=updateDelegate;this._locationPool=locationPool;this._locationPool._add(this);}
update(){this._updateDelegate(this);}
uiLocation(){throw'Not implemented';}
dispose(){this._locationPool._delete(this);this._updateDelegate=null;}
isBlackboxed(){throw'Not implemented';}};Bindings.LiveLocationPool=class{constructor(){this._locations=new Set();}
_add(location){this._locations.add(location);}
_delete(location){this._locations.delete(location);}
disposeAll(){for(var location of this._locations)
location.dispose();}};;Bindings.CompilerScriptMapping=class{constructor(debuggerModel,workspace,networkProject,debuggerWorkspaceBinding){this._target=debuggerModel.target();this._debuggerModel=debuggerModel;this._workspace=workspace;this._networkProject=networkProject;this._debuggerWorkspaceBinding=debuggerWorkspaceBinding;this._sourceMapLoadingPromises=new Map();this._sourceMapForScriptId=new Map();this._scriptForSourceMap=new Map();this._sourceMapForURL=new Map();this._stubUISourceCodes=new Map();var projectId=Bindings.CompilerScriptMapping.projectIdForTarget(this._target);this._stubProject=new Bindings.ContentProviderBasedProject(workspace,projectId,Workspace.projectTypes.Service,'');this._eventListeners=[workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeAdded,this._uiSourceCodeAddedToWorkspace,this),debuggerModel.addEventListener(SDK.DebuggerModel.Events.GlobalObjectCleared,this._debuggerReset,this)];}
static uiSourceCodeOrigin(uiSourceCode){return uiSourceCode[Bindings.CompilerScriptMapping._originSymbol]||null;}
static projectIdForTarget(target){return'compiler-script-project:'+target.id();}
mapsToSourceCode(rawLocation){var sourceMap=this._sourceMapForScriptId.get(rawLocation.scriptId);if(!sourceMap)
return true;return!!sourceMap.findEntry(rawLocation.lineNumber,rawLocation.columnNumber);}
rawLocationToUILocation(rawLocation){var debuggerModelLocation=(rawLocation);var stubUISourceCode=this._stubUISourceCodes.get(debuggerModelLocation.scriptId);if(stubUISourceCode)
return new Workspace.UILocation(stubUISourceCode,rawLocation.lineNumber,rawLocation.columnNumber);var sourceMap=this._sourceMapForScriptId.get(debuggerModelLocation.scriptId);if(!sourceMap)
return null;var lineNumber=debuggerModelLocation.lineNumber;var columnNumber=debuggerModelLocation.columnNumber||0;var entry=sourceMap.findEntry(lineNumber,columnNumber);if(!entry||!entry.sourceURL)
return null;var script=rawLocation.script();if(!script)
return null;var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForScriptURL(this._workspace,(entry.sourceURL),script);if(!uiSourceCode)
return null;return uiSourceCode.uiLocation((entry.sourceLineNumber),(entry.sourceColumnNumber));}
uiLocationToRawLocation(uiSourceCode,lineNumber,columnNumber){if(uiSourceCode.project().type()===Workspace.projectTypes.Service)
return null;var sourceMap=this._sourceMapForURL.get(uiSourceCode.url());if(!sourceMap)
return null;var script=(this._scriptForSourceMap.get(sourceMap));console.assert(script);var entry=sourceMap.firstSourceLineMapping(uiSourceCode.url(),lineNumber);if(!entry)
return null;return this._debuggerModel.createRawLocation(script,entry.lineNumber,entry.columnNumber);}
addScript(script){if(!script.sourceMapURL){script.addEventListener(SDK.Script.Events.SourceMapURLAdded,this._sourceMapURLAdded.bind(this));return;}
this._processScript(script);}
sourceMapForScript(script){return this._sourceMapForScriptId.get(script.scriptId)||null;}
maybeLoadSourceMap(script){if(!script.sourceMapURL)
return;if(this._sourceMapLoadingPromises.has(script.sourceMapURL))
return;if(this._sourceMapForScriptId.has(script.scriptId))
return;this._processScript(script);}
_sourceMapURLAdded(event){var script=(event.target);if(!script.sourceMapURL)
return;this._processScript(script);}
_processScript(script){if(Bindings.blackboxManager.isBlackboxedURL(script.sourceURL,script.isContentScript()))
return;var stubUISourceCode=this._stubProject.addContentProvider(script.sourceURL,Common.StaticContentProvider.fromString(script.sourceURL,Common.resourceTypes.Script,'\n\n\n\n\n// Please wait a bit.\n// Compiled script is not shown while source map is being loaded!'));this._stubUISourceCodes.set(script.scriptId,stubUISourceCode);this._debuggerWorkspaceBinding.pushSourceMapping(script,this);this._loadSourceMapForScript(script).then(this._sourceMapLoaded.bind(this,script,stubUISourceCode.url()));}
_sourceMapLoaded(script,uiSourceCodePath,sourceMap){Bindings.blackboxManager.sourceMapLoaded(script,sourceMap);this._stubUISourceCodes.delete(script.scriptId);this._stubProject.removeFile(uiSourceCodePath);if(!sourceMap){this._debuggerWorkspaceBinding.updateLocations(script);return;}
if(this._scriptForSourceMap.get(sourceMap)){this._sourceMapForScriptId.set(script.scriptId,sourceMap);this._debuggerWorkspaceBinding.updateLocations(script);return;}
this._sourceMapForScriptId.set(script.scriptId,sourceMap);this._scriptForSourceMap.set(sourceMap,script);var missingSources=[];for(var sourceURL of sourceMap.sourceURLs()){if(this._sourceMapForURL.get(sourceURL))
continue;this._sourceMapForURL.set(sourceURL,sourceMap);var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForScriptURL(this._workspace,sourceURL,script);if(!uiSourceCode){var contentProvider=sourceMap.sourceContentProvider(sourceURL,Common.resourceTypes.SourceMapScript);var embeddedContent=sourceMap.embeddedContentByURL(sourceURL);var embeddedContentLength=typeof embeddedContent==='string'?embeddedContent.length:null;uiSourceCode=this._networkProject.addFile(contentProvider,SDK.ResourceTreeFrame.fromScript(script),script.isContentScript(),embeddedContentLength);uiSourceCode[Bindings.CompilerScriptMapping._originSymbol]=script.sourceURL;}
if(uiSourceCode){this._bindUISourceCode(uiSourceCode);}else{if(missingSources.length<3)
missingSources.push(sourceURL);else if(missingSources.peekLast()!=='\u2026')
missingSources.push('\u2026');}}
if(missingSources.length){Common.console.warn(Common.UIString('Source map %s points to the files missing from the workspace: [%s]',sourceMap.url(),missingSources.join(', ')));}
this._debuggerWorkspaceBinding.updateLocations(script);}
isIdentity(){return false;}
uiLineHasMapping(uiSourceCode,lineNumber){var sourceMap=this._sourceMapForURL.get(uiSourceCode.url());if(!sourceMap)
return true;return!!sourceMap.firstSourceLineMapping(uiSourceCode.url(),lineNumber);}
_bindUISourceCode(uiSourceCode){this._debuggerWorkspaceBinding.setSourceMapping(this._target,uiSourceCode,this);}
_unbindUISourceCode(uiSourceCode){this._debuggerWorkspaceBinding.setSourceMapping(this._target,uiSourceCode,null);}
_uiSourceCodeAddedToWorkspace(event){var uiSourceCode=(event.data);if(!this._sourceMapForURL.get(uiSourceCode.url()))
return;this._bindUISourceCode(uiSourceCode);}
_loadSourceMapForScript(script){var scriptURL=Common.ParsedURL.completeURL(this._target.inspectedURL(),script.sourceURL);if(!scriptURL)
return Promise.resolve((null));console.assert(script.sourceMapURL);var scriptSourceMapURL=(script.sourceMapURL);var sourceMapURL=Common.ParsedURL.completeURL(scriptURL,scriptSourceMapURL);if(!sourceMapURL)
return Promise.resolve((null));var loadingPromise=this._sourceMapLoadingPromises.get(sourceMapURL);if(!loadingPromise){loadingPromise=SDK.TextSourceMap.load(sourceMapURL,scriptURL).then(sourceMapLoaded.bind(this,sourceMapURL));this._sourceMapLoadingPromises.set(sourceMapURL,loadingPromise);}
return loadingPromise;function sourceMapLoaded(url,sourceMap){if(!sourceMap){this._sourceMapLoadingPromises.delete(url);return null;}
return sourceMap;}}
_debuggerReset(){function unbindSourceMapSources(sourceMap){var script=this._scriptForSourceMap.get(sourceMap);if(!script)
return;for(var sourceURL of sourceMap.sourceURLs()){var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForScriptURL(this._workspace,sourceURL,script);if(uiSourceCode)
this._unbindUISourceCode(uiSourceCode);}}
this._sourceMapForURL.valuesArray().forEach(unbindSourceMapSources.bind(this));this._sourceMapLoadingPromises.clear();this._sourceMapForScriptId.clear();this._scriptForSourceMap.clear();this._sourceMapForURL.clear();}
dispose(){Common.EventTarget.removeEventListeners(this._eventListeners);this._debuggerReset();this._stubProject.dispose();}};Bindings.CompilerScriptMapping._originSymbol=Symbol('origin');;Bindings.ResourceScriptMapping=class{constructor(debuggerModel,workspace,debuggerWorkspaceBinding){this._target=debuggerModel.target();this._debuggerModel=debuggerModel;this._workspace=workspace;this._debuggerWorkspaceBinding=debuggerWorkspaceBinding;this._boundUISourceCodes=new Set();this._uiSourceCodeToScriptFile=new Map();this._eventListeners=[debuggerModel.addEventListener(SDK.DebuggerModel.Events.GlobalObjectCleared,this._debuggerReset,this),workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeAdded,this._uiSourceCodeAdded,this),workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeRemoved,this._uiSourceCodeRemoved,this)];}
rawLocationToUILocation(rawLocation){var debuggerModelLocation=(rawLocation);var script=debuggerModelLocation.script();if(!script)
return null;var uiSourceCode=this._workspaceUISourceCodeForScript(script);if(!uiSourceCode)
return null;var scriptFile=this.scriptFile(uiSourceCode);if(scriptFile&&((scriptFile.hasDivergedFromVM()&&!scriptFile.isMergingToVM())||scriptFile.isDivergingFromVM()))
return null;var lineNumber=debuggerModelLocation.lineNumber-(script.isInlineScriptWithSourceURL()?script.lineOffset:0);var columnNumber=debuggerModelLocation.columnNumber||0;if(script.isInlineScriptWithSourceURL()&&!lineNumber&&columnNumber)
columnNumber-=script.columnOffset;return uiSourceCode.uiLocation(lineNumber,columnNumber);}
uiLocationToRawLocation(uiSourceCode,lineNumber,columnNumber){var scripts=this._scriptsForUISourceCode(uiSourceCode);console.assert(scripts.length);var script=scripts[scripts.length-1];if(script.isInlineScriptWithSourceURL()){return this._debuggerModel.createRawLocation(script,lineNumber+script.lineOffset,lineNumber?columnNumber:columnNumber+script.columnOffset);}
return this._debuggerModel.createRawLocation(script,lineNumber,columnNumber);}
addScript(script){if(script.isAnonymousScript())
return;this._debuggerWorkspaceBinding.pushSourceMapping(script,this);var uiSourceCode=this._workspaceUISourceCodeForScript(script);if(!uiSourceCode)
return;this._bindUISourceCodeToScripts(uiSourceCode,[script]);}
isIdentity(){return true;}
uiLineHasMapping(uiSourceCode,lineNumber){return true;}
scriptFile(uiSourceCode){return this._uiSourceCodeToScriptFile.get(uiSourceCode)||null;}
_setScriptFile(uiSourceCode,scriptFile){if(scriptFile)
this._uiSourceCodeToScriptFile.set(uiSourceCode,scriptFile);else
this._uiSourceCodeToScriptFile.remove(uiSourceCode);}
_uiSourceCodeAdded(event){var uiSourceCode=(event.data);if(uiSourceCode.isFromServiceProject())
return;var scripts=this._scriptsForUISourceCode(uiSourceCode);if(!scripts.length)
return;this._bindUISourceCodeToScripts(uiSourceCode,scripts);}
_uiSourceCodeRemoved(event){var uiSourceCode=(event.data);if(uiSourceCode.isFromServiceProject()||!this._boundUISourceCodes.has(uiSourceCode))
return;this._unbindUISourceCode(uiSourceCode);}
_updateLocations(uiSourceCode){var scripts=this._scriptsForUISourceCode(uiSourceCode);if(!scripts.length)
return;for(var i=0;i<scripts.length;++i)
this._debuggerWorkspaceBinding.updateLocations(scripts[i]);}
_workspaceUISourceCodeForScript(script){if(script.isAnonymousScript())
return null;return Bindings.NetworkProject.uiSourceCodeForScriptURL(this._workspace,script.sourceURL,script);}
_scriptsForUISourceCode(uiSourceCode){var target=Bindings.NetworkProject.targetForUISourceCode(uiSourceCode);if(target!==this._debuggerModel.target())
return[];return this._debuggerModel.scriptsForSourceURL(uiSourceCode.url());}
_bindUISourceCodeToScripts(uiSourceCode,scripts){console.assert(scripts.length);var boundScriptFile=this.scriptFile(uiSourceCode);if(boundScriptFile&&boundScriptFile._hasScripts(scripts))
return;var scriptFile=new Bindings.ResourceScriptFile(this,uiSourceCode,scripts);this._setScriptFile(uiSourceCode,scriptFile);for(var i=0;i<scripts.length;++i)
this._debuggerWorkspaceBinding.updateLocations(scripts[i]);this._debuggerWorkspaceBinding.setSourceMapping(this._target,uiSourceCode,this);this._boundUISourceCodes.add(uiSourceCode);}
_unbindUISourceCode(uiSourceCode){var scriptFile=this.scriptFile(uiSourceCode);if(scriptFile){scriptFile.dispose();this._setScriptFile(uiSourceCode,null);}
this._debuggerWorkspaceBinding.setSourceMapping(this._target,uiSourceCode,null);this._boundUISourceCodes.delete(uiSourceCode);}
_debuggerReset(){for(var uiSourceCode of this._boundUISourceCodes.valuesArray())
this._unbindUISourceCode(uiSourceCode);this._boundUISourceCodes.clear();console.assert(!this._uiSourceCodeToScriptFile.size);}
dispose(){Common.EventTarget.removeEventListeners(this._eventListeners);this._debuggerReset();}};Bindings.ResourceScriptFile=class extends Common.Object{constructor(resourceScriptMapping,uiSourceCode,scripts){super();console.assert(scripts.length);this._resourceScriptMapping=resourceScriptMapping;this._uiSourceCode=uiSourceCode;if(this._uiSourceCode.contentType().isScript())
this._script=scripts[scripts.length-1];this._uiSourceCode.addEventListener(Workspace.UISourceCode.Events.WorkingCopyChanged,this._workingCopyChanged,this);this._uiSourceCode.addEventListener(Workspace.UISourceCode.Events.WorkingCopyCommitted,this._workingCopyCommitted,this);}
_hasScripts(scripts){return this._script&&this._script===scripts[0];}
_isDiverged(){if(this._uiSourceCode.isDirty())
return true;if(!this._script)
return false;if(typeof this._scriptSource==='undefined')
return false;var workingCopy=this._uiSourceCode.workingCopy();if(!workingCopy.startsWith(this._scriptSource.trimRight()))
return true;var suffix=this._uiSourceCode.workingCopy().substr(this._scriptSource.length);return!!suffix.length&&!suffix.match(SDK.Script.sourceURLRegex);}
_workingCopyChanged(event){this._update();}
_workingCopyCommitted(event){if(this._uiSourceCode.project().type()===Workspace.projectTypes.Snippets)
return;if(!this._script)
return;var debuggerModel=this._resourceScriptMapping._debuggerModel;var source=this._uiSourceCode.workingCopy();debuggerModel.setScriptSource(this._script.scriptId,source,scriptSourceWasSet.bind(this));function scriptSourceWasSet(error,exceptionDetails){if(!error&&!exceptionDetails)
this._scriptSource=source;this._update();if(!error&&!exceptionDetails)
return;if(!exceptionDetails){Common.console.addMessage(Common.UIString('LiveEdit failed: %s',error),Common.Console.MessageLevel.Warning);return;}
var messageText=Common.UIString('LiveEdit compile failed: %s',exceptionDetails.text);this._uiSourceCode.addLineMessage(Workspace.UISourceCode.Message.Level.Error,messageText,exceptionDetails.lineNumber,exceptionDetails.columnNumber);}}
_update(){if(this._isDiverged()&&!this._hasDivergedFromVM)
this._divergeFromVM();else if(!this._isDiverged()&&this._hasDivergedFromVM)
this._mergeToVM();}
_divergeFromVM(){this._isDivergingFromVM=true;this._resourceScriptMapping._updateLocations(this._uiSourceCode);delete this._isDivergingFromVM;this._hasDivergedFromVM=true;this.dispatchEventToListeners(Bindings.ResourceScriptFile.Events.DidDivergeFromVM,this._uiSourceCode);}
_mergeToVM(){delete this._hasDivergedFromVM;this._isMergingToVM=true;this._resourceScriptMapping._updateLocations(this._uiSourceCode);delete this._isMergingToVM;this.dispatchEventToListeners(Bindings.ResourceScriptFile.Events.DidMergeToVM,this._uiSourceCode);}
hasDivergedFromVM(){return this._hasDivergedFromVM;}
isDivergingFromVM(){return this._isDivergingFromVM;}
isMergingToVM(){return this._isMergingToVM;}
checkMapping(){if(!this._script||typeof this._scriptSource!=='undefined'){this._mappingCheckedForTest();return;}
this._script.requestContent().then(callback.bind(this));function callback(source){this._scriptSource=source;this._update();this._mappingCheckedForTest();}}
_mappingCheckedForTest(){}
target(){if(!this._script)
return null;return this._script.target();}
dispose(){this._uiSourceCode.removeEventListener(Workspace.UISourceCode.Events.WorkingCopyChanged,this._workingCopyChanged,this);this._uiSourceCode.removeEventListener(Workspace.UISourceCode.Events.WorkingCopyCommitted,this._workingCopyCommitted,this);}
addSourceMapURL(sourceMapURL){if(!this._script)
return;this._script.addSourceMapURL(sourceMapURL);}
hasSourceMapURL(){return this._script&&!!this._script.sourceMapURL;}};Bindings.ResourceScriptFile.Events={DidMergeToVM:Symbol('DidMergeToVM'),DidDivergeFromVM:Symbol('DidDivergeFromVM'),};;Bindings.SASSSourceMapping=class{constructor(cssModel,workspace,networkProject){this._cssModel=cssModel;this._networkProject=networkProject;this._workspace=workspace;this._eventListeners=[this._cssModel.addEventListener(SDK.CSSModel.Events.SourceMapAttached,this._sourceMapAttached,this),this._cssModel.addEventListener(SDK.CSSModel.Events.SourceMapDetached,this._sourceMapDetached,this),this._cssModel.addEventListener(SDK.CSSModel.Events.SourceMapChanged,this._sourceMapChanged,this)];}
_sourceMapAttached(event){var header=(event.data);var sourceMap=this._cssModel.sourceMapForHeader(header);for(var sassURL of sourceMap.sourceURLs()){var contentProvider=sourceMap.sourceContentProvider(sassURL,Common.resourceTypes.SourceMapStyleSheet);var embeddedContent=sourceMap.embeddedContentByURL(sassURL);var embeddedContentLength=typeof embeddedContent==='string'?embeddedContent.length:null;this._networkProject.addFile(contentProvider,SDK.ResourceTreeFrame.fromStyleSheet(header),false,embeddedContentLength);}
Bindings.cssWorkspaceBinding.updateLocations(header);}
_sourceMapDetached(event){var header=(event.data);Bindings.cssWorkspaceBinding.updateLocations(header);}
_sourceMapChanged(event){var sourceMap=(event.data.sourceMap);var newSources=(event.data.newSources);var headers=this._cssModel.headersForSourceMap(sourceMap);var handledUISourceCodes=new Set();for(var header of headers){Bindings.cssWorkspaceBinding.updateLocations(header);for(var sourceURL of newSources.keys()){var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForStyleURL(this._workspace,sourceURL,header);if(!uiSourceCode){console.error('Failed to update source for '+sourceURL);continue;}
if(handledUISourceCodes.has(uiSourceCode))
continue;handledUISourceCodes.add(uiSourceCode);var sassText=(newSources.get(sourceURL));uiSourceCode.setWorkingCopy(sassText);}}}
rawLocationToUILocation(rawLocation){var sourceMap=this._cssModel.sourceMapForHeader(rawLocation.header());if(!sourceMap)
return null;var entry=sourceMap.findEntry(rawLocation.lineNumber,rawLocation.columnNumber);if(!entry||!entry.sourceURL)
return null;var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForStyleURL(this._workspace,entry.sourceURL,rawLocation.header());if(!uiSourceCode)
return null;return uiSourceCode.uiLocation(entry.sourceLineNumber||0,entry.sourceColumnNumber);}
dispose(){Common.EventTarget.removeEventListeners(this._eventListeners);}};;Bindings.StylesSourceMapping=class{constructor(cssModel,workspace){this._cssModel=cssModel;this._workspace=workspace;this._urlToHeadersByFrameId=new Map();this._styleFiles=new Map();this._eventListeners=[this._workspace.addEventListener(Workspace.Workspace.Events.ProjectRemoved,this._projectRemoved,this),this._workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeAdded,this._uiSourceCodeAddedToWorkspace,this),this._workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeRemoved,this._uiSourceCodeRemoved,this),this._cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetAdded,this._styleSheetAdded,this),this._cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetRemoved,this._styleSheetRemoved,this),this._cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetChanged,this._styleSheetChanged,this),SDK.ResourceTreeModel.fromTarget(cssModel.target()).addEventListener(SDK.ResourceTreeModel.Events.MainFrameNavigated,this._unbindAllUISourceCodes,this)];}
rawLocationToUILocation(rawLocation){var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForStyleURL(this._workspace,rawLocation.url,rawLocation.header());if(!uiSourceCode)
return null;var lineNumber=rawLocation.lineNumber;var columnNumber=rawLocation.columnNumber;var header=this._cssModel.styleSheetHeaderForId(rawLocation.styleSheetId);if(header&&header.isInline&&header.hasSourceURL){lineNumber-=header.lineNumberInSource(0);columnNumber-=header.columnNumberInSource(lineNumber,0);}
return uiSourceCode.uiLocation(lineNumber,columnNumber);}
_styleSheetAdded(event){var header=(event.data);var url=header.resourceURL();if(!url)
return;var map=this._urlToHeadersByFrameId.get(url);if(!map){map=(new Map());this._urlToHeadersByFrameId.set(url,map);}
var headersById=map.get(header.frameId);if(!headersById){headersById=(new Map());map.set(header.frameId,headersById);}
headersById.set(header.id,header);var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForStyleURL(this._workspace,url,header);if(uiSourceCode)
this._bindUISourceCode(uiSourceCode,header);}
_styleSheetRemoved(event){var header=(event.data);var url=header.resourceURL();if(!url)
return;var map=this._urlToHeadersByFrameId.get(url);console.assert(map);var headersById=map.get(header.frameId);console.assert(headersById);headersById.delete(header.id);if(!headersById.size){map.delete(header.frameId);if(!map.size){this._urlToHeadersByFrameId.delete(url);var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForStyleURL(this._workspace,url,header);if(uiSourceCode)
this._unbindUISourceCode(uiSourceCode);}}}
_unbindUISourceCode(uiSourceCode){var styleFile=this._styleFiles.get(uiSourceCode);if(!styleFile)
return;styleFile.dispose();this._styleFiles.delete(uiSourceCode);}
_unbindAllUISourceCodes(event){if(event.data.target()!==this._cssModel.target())
return;for(var styleFile of this._styleFiles.values())
styleFile.dispose();this._styleFiles.clear();this._urlToHeadersByFrameId=new Map();}
_uiSourceCodeAddedToWorkspace(event){var uiSourceCode=(event.data);if(!this._urlToHeadersByFrameId.has(uiSourceCode.url()))
return;this._bindUISourceCode(uiSourceCode,this._urlToHeadersByFrameId.get(uiSourceCode.url()).valuesArray()[0].valuesArray()[0]);}
_bindUISourceCode(uiSourceCode,header){if(this._styleFiles.get(uiSourceCode)||(header.isInline&&!header.hasSourceURL))
return;this._styleFiles.set(uiSourceCode,new Bindings.StyleFile(uiSourceCode,this));Bindings.cssWorkspaceBinding.updateLocations(header);}
_projectRemoved(event){var project=(event.data);var uiSourceCodes=project.uiSourceCodes();for(var i=0;i<uiSourceCodes.length;++i)
this._unbindUISourceCode(uiSourceCodes[i]);}
_uiSourceCodeRemoved(event){var uiSourceCode=(event.data);this._unbindUISourceCode(uiSourceCode);}
_setStyleContent(uiSourceCode,content,majorChange){var styleSheetIds=this._cssModel.styleSheetIdsForURL(uiSourceCode.url());if(!styleSheetIds.length)
return Promise.resolve(('No stylesheet found: '+uiSourceCode.url()));this._isSettingContent=true;function callback(error){delete this._isSettingContent;return error||null;}
var promises=[];for(var i=0;i<styleSheetIds.length;++i)
promises.push(this._cssModel.setStyleSheetText(styleSheetIds[i],content,majorChange));return Promise.all(promises).spread(callback.bind(this));}
_styleSheetChanged(event){if(this._isSettingContent)
return;this._updateStyleSheetTextSoon(event.data.styleSheetId);}
_updateStyleSheetTextSoon(styleSheetId){if(this._updateStyleSheetTextTimer)
clearTimeout(this._updateStyleSheetTextTimer);this._updateStyleSheetTextTimer=setTimeout(this._updateStyleSheetText.bind(this,styleSheetId),Bindings.StylesSourceMapping.ChangeUpdateTimeoutMs);}
_updateStyleSheetText(styleSheetId){if(this._updateStyleSheetTextTimer){clearTimeout(this._updateStyleSheetTextTimer);delete this._updateStyleSheetTextTimer;}
var header=this._cssModel.styleSheetHeaderForId(styleSheetId);if(!header)
return;var styleSheetURL=header.resourceURL();if(!styleSheetURL)
return;var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForStyleURL(this._workspace,styleSheetURL,header);if(!uiSourceCode)
return;header.requestContent().then(callback.bind(this,uiSourceCode));function callback(uiSourceCode,content){var styleFile=this._styleFiles.get(uiSourceCode);if(styleFile)
styleFile.addRevision(content||'');}}
dispose(){Common.EventTarget.removeEventListeners(this._eventListeners);}};Bindings.StylesSourceMapping.ChangeUpdateTimeoutMs=200;Bindings.StyleFile=class{constructor(uiSourceCode,mapping){this._uiSourceCode=uiSourceCode;this._mapping=mapping;this._eventListeners=[this._uiSourceCode.addEventListener(Workspace.UISourceCode.Events.WorkingCopyChanged,this._workingCopyChanged,this),this._uiSourceCode.addEventListener(Workspace.UISourceCode.Events.WorkingCopyCommitted,this._workingCopyCommitted,this)];this._commitThrottler=new Common.Throttler(Bindings.StyleFile.updateTimeout);this._terminated=false;}
_workingCopyCommitted(event){if(this._isAddingRevision)
return;this._isMajorChangePending=true;this._commitThrottler.schedule(this._commitIncrementalEdit.bind(this),true);}
_workingCopyChanged(event){if(this._isAddingRevision)
return;this._commitThrottler.schedule(this._commitIncrementalEdit.bind(this),false);}
_commitIncrementalEdit(){if(this._terminated)
return;var promise=this._mapping._setStyleContent(this._uiSourceCode,this._uiSourceCode.workingCopy(),this._isMajorChangePending).then(this._styleContentSet.bind(this));this._isMajorChangePending=false;return promise;}
_styleContentSet(error){if(error)
console.error(error);}
addRevision(content){this._isAddingRevision=true;this._uiSourceCode.addRevision(content);delete this._isAddingRevision;}
dispose(){if(this._terminated)
return;this._terminated=true;Common.EventTarget.removeEventListeners(this._eventListeners);}};Bindings.StyleFile.updateTimeout=200;;Bindings.CSSWorkspaceBinding=class{constructor(targetManager,workspace){this._workspace=workspace;this._modelToTargetInfo=new Map();targetManager.observeTargets(this);}
targetAdded(target){var cssModel=SDK.CSSModel.fromTarget(target);if(cssModel){this._modelToTargetInfo.set(cssModel,new Bindings.CSSWorkspaceBinding.TargetInfo(cssModel,this._workspace));}}
targetRemoved(target){var cssModel=SDK.CSSModel.fromTarget(target);if(cssModel)
this._modelToTargetInfo.remove(cssModel)._dispose();}
_targetInfo(header){return this._modelToTargetInfo.get(header.cssModel())||null;}
_ensureTargetInfo(header){var targetInfo=this._modelToTargetInfo.get(header.cssModel());if(!targetInfo){targetInfo=new Bindings.CSSWorkspaceBinding.TargetInfo(header.cssModel(),this._workspace);this._modelToTargetInfo.set(header.cssModel(),targetInfo);}
return targetInfo;}
updateLocations(header){var targetInfo=this._targetInfo(header);if(targetInfo)
targetInfo._updateLocations(header);}
createLiveLocation(rawLocation,updateDelegate,locationPool){var header=rawLocation.styleSheetId?rawLocation.cssModel().styleSheetHeaderForId(rawLocation.styleSheetId):null;return new Bindings.CSSWorkspaceBinding.LiveLocation(rawLocation.cssModel(),header,rawLocation,this,updateDelegate,locationPool);}
_addLiveLocation(location){this._ensureTargetInfo(location._header)._addLocation(location);}
_removeLiveLocation(location){var targetInfo=this._targetInfo(location._header);if(targetInfo)
targetInfo._removeLocation(location);}
propertyUILocation(cssProperty,forName){var style=cssProperty.ownerStyle;if(!style||style.type!==SDK.CSSStyleDeclaration.Type.Regular||!style.styleSheetId)
return null;var header=style.cssModel().styleSheetHeaderForId(style.styleSheetId);if(!header)
return null;var range=forName?cssProperty.nameRange():cssProperty.valueRange();if(!range)
return null;var lineNumber=range.startLine;var columnNumber=range.startColumn;var rawLocation=new SDK.CSSLocation(header,header.lineNumberInSource(lineNumber),header.columnNumberInSource(lineNumber,columnNumber));return this.rawLocationToUILocation(rawLocation);}
rawLocationToUILocation(rawLocation){if(!rawLocation)
return null;var header=rawLocation.cssModel().styleSheetHeaderForId(rawLocation.styleSheetId);if(!header)
return null;var targetInfo=this._targetInfo(header);return targetInfo?targetInfo._rawLocationToUILocation(header,rawLocation.lineNumber,rawLocation.columnNumber):null;}};Bindings.CSSWorkspaceBinding.TargetInfo=class{constructor(cssModel,workspace){this._cssModel=cssModel;this._stylesSourceMapping=new Bindings.StylesSourceMapping(cssModel,workspace);this._sassSourceMapping=new Bindings.SASSSourceMapping(cssModel,workspace,Bindings.NetworkProject.forTarget(cssModel.target()));this._locations=new Multimap();}
_addLocation(location){var header=location._header;this._locations.set(header,location);location.update();}
_removeLocation(location){this._locations.remove(location._header,location);}
_updateLocations(header){for(var location of this._locations.get(header))
location.update();}
_rawLocationToUILocation(header,lineNumber,columnNumber){var rawLocation=new SDK.CSSLocation(header,lineNumber,columnNumber);var uiLocation=null;uiLocation=uiLocation||this._sassSourceMapping.rawLocationToUILocation(rawLocation);uiLocation=uiLocation||this._stylesSourceMapping.rawLocationToUILocation(rawLocation);return uiLocation;}
_dispose(){this._stylesSourceMapping.dispose();this._sassSourceMapping.dispose();}};Bindings.CSSWorkspaceBinding.LiveLocation=class extends Bindings.LiveLocationWithPool{constructor(cssModel,header,rawLocation,binding,updateDelegate,locationPool){super(updateDelegate,locationPool);this._cssModel=cssModel;this._rawLocation=rawLocation;this._binding=binding;if(!header)
this._clearStyleSheet();else
this._setStyleSheet(header);}
_styleSheetAdded(event){console.assert(!this._header);var header=(event.data);if(header.sourceURL&&header.sourceURL===this._rawLocation.url)
this._setStyleSheet(header);}
_styleSheetRemoved(event){console.assert(this._header);var header=(event.data);if(this._header!==header)
return;this._binding._removeLiveLocation(this);this._clearStyleSheet();}
_setStyleSheet(header){this._header=header;this._binding._addLiveLocation(this);this._cssModel.removeEventListener(SDK.CSSModel.Events.StyleSheetAdded,this._styleSheetAdded,this);this._cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetRemoved,this._styleSheetRemoved,this);}
_clearStyleSheet(){delete this._header;this._cssModel.removeEventListener(SDK.CSSModel.Events.StyleSheetRemoved,this._styleSheetRemoved,this);this._cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetAdded,this._styleSheetAdded,this);}
uiLocation(){var cssLocation=this._rawLocation;if(this._header){var targetInfo=this._binding._targetInfo(this._header);return targetInfo._rawLocationToUILocation(this._header,cssLocation.lineNumber,cssLocation.columnNumber);}
var uiSourceCode=Bindings.NetworkProject.uiSourceCodeForStyleURL(this._binding._workspace,cssLocation.url,cssLocation.header());if(!uiSourceCode)
return null;return uiSourceCode.uiLocation(cssLocation.lineNumber,cssLocation.columnNumber);}
dispose(){super.dispose();if(this._header)
this._binding._removeLiveLocation(this);this._cssModel.removeEventListener(SDK.CSSModel.Events.StyleSheetAdded,this._styleSheetAdded,this);this._cssModel.removeEventListener(SDK.CSSModel.Events.StyleSheetRemoved,this._styleSheetRemoved,this);}
isBlackboxed(){return false;}};Bindings.cssWorkspaceBinding;;Bindings.DebuggerWorkspaceBinding=class{constructor(targetManager,workspace){this._workspace=workspace;this._targetToData=new Map();targetManager.observeTargets(this);targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.GlobalObjectCleared,this._globalObjectCleared,this);targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.BeforeDebuggerPaused,this._beforeDebuggerPaused,this);targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.DebuggerResumed,this._debuggerResumed,this);workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeRemoved,this._uiSourceCodeRemoved,this);workspace.addEventListener(Workspace.Workspace.Events.ProjectRemoved,this._projectRemoved,this);}
targetAdded(target){var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(debuggerModel)
this._targetToData.set(target,new Bindings.DebuggerWorkspaceBinding.TargetData(debuggerModel,this));}
targetRemoved(target){if(!SDK.DebuggerModel.fromTarget(target))
return;var targetData=this._targetToData.get(target);targetData._dispose();this._targetToData.remove(target);}
_uiSourceCodeRemoved(event){var uiSourceCode=(event.data);var targetDatas=this._targetToData.valuesArray();for(var i=0;i<targetDatas.length;++i)
targetDatas[i]._uiSourceCodeRemoved(uiSourceCode);}
_projectRemoved(event){var project=(event.data);var targetDatas=this._targetToData.valuesArray();var uiSourceCodes=project.uiSourceCodes();for(var i=0;i<targetDatas.length;++i){for(var j=0;j<uiSourceCodes.length;++j)
targetDatas[i]._uiSourceCodeRemoved(uiSourceCodes[j]);}}
pushSourceMapping(script,sourceMapping){var info=this._ensureInfoForScript(script);info._pushSourceMapping(sourceMapping);}
popSourceMapping(script){var info=this._infoForScript(script.target(),script.scriptId);console.assert(info);return info._popSourceMapping();}
setSourceMapping(target,uiSourceCode,sourceMapping){var data=this._targetToData.get(target);if(data)
data._setSourceMapping(uiSourceCode,sourceMapping);}
updateLocations(script){var info=this._infoForScript(script.target(),script.scriptId);if(info)
info._updateLocations();}
createLiveLocation(rawLocation,updateDelegate,locationPool){var info=this._infoForScript(rawLocation.target(),rawLocation.scriptId);console.assert(info);var location=new Bindings.DebuggerWorkspaceBinding.Location(info._script,rawLocation,this,updateDelegate,locationPool);info._addLocation(location);return location;}
createStackTraceTopFrameLiveLocation(rawLocations,updateDelegate,locationPool){console.assert(rawLocations.length);var location=new Bindings.DebuggerWorkspaceBinding.StackTraceTopFrameLocation(rawLocations,this,updateDelegate,locationPool);location.update();return location;}
createCallFrameLiveLocation(location,updateDelegate,locationPool){var script=location.script();if(!script)
return null;var target=location.target();this._ensureInfoForScript(script);var liveLocation=this.createLiveLocation(location,updateDelegate,locationPool);this._registerCallFrameLiveLocation(target,liveLocation);return liveLocation;}
rawLocationToUILocation(rawLocation){var info=this._infoForScript(rawLocation.target(),rawLocation.scriptId);console.assert(info);return info._rawLocationToUILocation(rawLocation);}
uiLocationToRawLocation(target,uiSourceCode,lineNumber,columnNumber){var targetData=this._targetToData.get(target);return targetData?(targetData._uiLocationToRawLocation(uiSourceCode,lineNumber,columnNumber)):null;}
uiLocationToRawLocations(uiSourceCode,lineNumber,columnNumber){var result=[];var targetDatas=this._targetToData.valuesArray();for(var i=0;i<targetDatas.length;++i){var rawLocation=targetDatas[i]._uiLocationToRawLocation(uiSourceCode,lineNumber,columnNumber);if(rawLocation)
result.push(rawLocation);}
return result;}
normalizeUILocation(uiLocation){var target=Bindings.NetworkProject.targetForUISourceCode(uiLocation.uiSourceCode);if(target){var rawLocation=this.uiLocationToRawLocation(target,uiLocation.uiSourceCode,uiLocation.lineNumber,uiLocation.columnNumber);if(rawLocation)
return this.rawLocationToUILocation(rawLocation);}
return uiLocation;}
uiLineHasMapping(uiSourceCode,lineNumber){var targetDatas=this._targetToData.valuesArray();for(var i=0;i<targetDatas.length;++i){if(!targetDatas[i]._uiLineHasMapping(uiSourceCode,lineNumber))
return false;}
return true;}
scriptFile(uiSourceCode,target){var targetData=this._targetToData.get(target);return targetData?targetData._resourceMapping.scriptFile(uiSourceCode):null;}
sourceMapForScript(script){var targetData=this._targetToData.get(script.target());if(!targetData)
return null;return targetData._compilerMapping.sourceMapForScript(script);}
maybeLoadSourceMap(script){var targetData=this._targetToData.get(script.target());if(!targetData)
return;targetData._compilerMapping.maybeLoadSourceMap(script);}
_globalObjectCleared(event){var debuggerModel=(event.target);this._reset(debuggerModel.target());}
_reset(target){var targetData=this._targetToData.get(target);targetData.callFrameLocations.valuesArray().forEach((location)=>this._removeLiveLocation(location));targetData.callFrameLocations.clear();}
_ensureInfoForScript(script){var scriptDataMap=this._targetToData.get(script.target()).scriptDataMap;var info=scriptDataMap.get(script.scriptId);if(!info){info=new Bindings.DebuggerWorkspaceBinding.ScriptInfo(script);scriptDataMap.set(script.scriptId,info);}
return info;}
_infoForScript(target,scriptId){var data=this._targetToData.get(target);if(!data)
return null;return data.scriptDataMap.get(scriptId)||null;}
_registerCallFrameLiveLocation(target,location){var locations=this._targetToData.get(target).callFrameLocations;locations.add(location);}
_removeLiveLocation(location){var info=this._infoForScript(location._script.target(),location._script.scriptId);if(info)
info._removeLocation(location);}
_debuggerResumed(event){var debuggerModel=(event.target);this._reset(debuggerModel.target());}
_beforeDebuggerPaused(event){var rawLocation=event.data.callFrames[0].location();var targetData=this._targetToData.get(rawLocation.target());if(!targetData._compilerMapping.mapsToSourceCode(rawLocation)){event.stopPropagation();event.preventDefault();}}};Bindings.DebuggerWorkspaceBinding.TargetData=class{constructor(debuggerModel,debuggerWorkspaceBinding){this._target=debuggerModel.target();this.scriptDataMap=new Map();this.callFrameLocations=new Set();var workspace=debuggerWorkspaceBinding._workspace;this._defaultMapping=new Bindings.DefaultScriptMapping(debuggerModel,workspace,debuggerWorkspaceBinding);this._resourceMapping=new Bindings.ResourceScriptMapping(debuggerModel,workspace,debuggerWorkspaceBinding);this._compilerMapping=new Bindings.CompilerScriptMapping(debuggerModel,workspace,Bindings.NetworkProject.forTarget(this._target),debuggerWorkspaceBinding);this._uiSourceCodeToSourceMapping=new Map();this._eventListeners=[debuggerModel.addEventListener(SDK.DebuggerModel.Events.ParsedScriptSource,this._parsedScriptSource,this),debuggerModel.addEventListener(SDK.DebuggerModel.Events.FailedToParseScriptSource,this._parsedScriptSource,this)];}
_parsedScriptSource(event){var script=(event.data);this._defaultMapping.addScript(script);this._resourceMapping.addScript(script);if(Common.moduleSetting('jsSourceMapsEnabled').get())
this._compilerMapping.addScript(script);}
_setSourceMapping(uiSourceCode,sourceMapping){if(this._uiSourceCodeToSourceMapping.get(uiSourceCode)===sourceMapping)
return;if(sourceMapping)
this._uiSourceCodeToSourceMapping.set(uiSourceCode,sourceMapping);else
this._uiSourceCodeToSourceMapping.remove(uiSourceCode);uiSourceCode.dispatchEventToListeners(Workspace.UISourceCode.Events.SourceMappingChanged,{target:this._target,isIdentity:sourceMapping?sourceMapping.isIdentity():false});}
_uiLocationToRawLocation(uiSourceCode,lineNumber,columnNumber){var sourceMapping=this._uiSourceCodeToSourceMapping.get(uiSourceCode);return sourceMapping?sourceMapping.uiLocationToRawLocation(uiSourceCode,lineNumber,columnNumber):null;}
_uiLineHasMapping(uiSourceCode,lineNumber){var sourceMapping=this._uiSourceCodeToSourceMapping.get(uiSourceCode);return sourceMapping?sourceMapping.uiLineHasMapping(uiSourceCode,lineNumber):true;}
_uiSourceCodeRemoved(uiSourceCode){this._uiSourceCodeToSourceMapping.remove(uiSourceCode);}
_dispose(){Common.EventTarget.removeEventListeners(this._eventListeners);this._compilerMapping.dispose();this._resourceMapping.dispose();this._defaultMapping.dispose();this._uiSourceCodeToSourceMapping.clear();}};Bindings.DebuggerWorkspaceBinding.ScriptInfo=class{constructor(script){this._script=script;this._sourceMappings=[];this._locations=new Set();}
_pushSourceMapping(sourceMapping){this._sourceMappings.push(sourceMapping);this._updateLocations();}
_popSourceMapping(){var sourceMapping=this._sourceMappings.pop();this._updateLocations();return sourceMapping;}
_addLocation(location){this._locations.add(location);location.update();}
_removeLocation(location){this._locations.delete(location);}
_updateLocations(){for(var location of this._locations)
location.update();}
_rawLocationToUILocation(rawLocation){var uiLocation;for(var i=this._sourceMappings.length-1;!uiLocation&&i>=0;--i)
uiLocation=this._sourceMappings[i].rawLocationToUILocation(rawLocation);console.assert(uiLocation,'Script raw location cannot be mapped to any UI location.');return(uiLocation);}};Bindings.DebuggerWorkspaceBinding.Location=class extends Bindings.LiveLocationWithPool{constructor(script,rawLocation,binding,updateDelegate,locationPool){super(updateDelegate,locationPool);this._script=script;this._rawLocation=rawLocation;this._binding=binding;}
uiLocation(){var debuggerModelLocation=this._rawLocation;return this._binding.rawLocationToUILocation(debuggerModelLocation);}
dispose(){super.dispose();this._binding._removeLiveLocation(this);}
isBlackboxed(){return Bindings.blackboxManager.isBlackboxedRawLocation(this._rawLocation);}};Bindings.DebuggerWorkspaceBinding.StackTraceTopFrameLocation=class extends Bindings.LiveLocationWithPool{constructor(rawLocations,binding,updateDelegate,locationPool){super(updateDelegate,locationPool);this._updateScheduled=true;this._locations=new Set();for(var location of rawLocations)
this._locations.add(binding.createLiveLocation(location,this._scheduleUpdate.bind(this),locationPool));this._updateLocation();}
uiLocation(){return this._current.uiLocation();}
isBlackboxed(){return this._current.isBlackboxed();}
dispose(){super.dispose();for(var location of this._locations)
location.dispose();}
_scheduleUpdate(){if(!this._updateScheduled){this._updateScheduled=true;setImmediate(this._updateLocation.bind(this));}}
_updateLocation(){this._updateScheduled=false;this._current=this._locations.values().next().value;for(var current of this._locations){if(!current.isBlackboxed()){this._current=current;break;}}
this.update();}};Bindings.DebuggerSourceMapping=function(){};Bindings.DebuggerSourceMapping.prototype={rawLocationToUILocation:function(rawLocation){},uiLocationToRawLocation:function(uiSourceCode,lineNumber,columnNumber){},isIdentity:function(){},uiLineHasMapping:function(uiSourceCode,lineNumber){}};Bindings.debuggerWorkspaceBinding;;Bindings.BreakpointManager=class extends Common.Object{constructor(breakpointsSetting,workspace,targetManager,debuggerWorkspaceBinding){super();this._storage=new Bindings.BreakpointManager.Storage(this,breakpointsSetting);this._workspace=workspace;this._targetManager=targetManager;this._debuggerWorkspaceBinding=debuggerWorkspaceBinding;this._breakpointsActive=true;this._breakpointsForUISourceCode=new Map();this._breakpointsForPrimaryUISourceCode=new Map();this._provisionalBreakpoints=new Multimap();this._workspace.addEventListener(Workspace.Workspace.Events.ProjectRemoved,this._projectRemoved,this);this._workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeAdded,this._uiSourceCodeAdded,this);this._workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeRemoved,this._uiSourceCodeRemoved,this);targetManager.observeTargets(this,SDK.Target.Capability.JS);}
static _breakpointStorageId(sourceFileId,lineNumber,columnNumber){if(!sourceFileId)
return'';return sourceFileId+':'+lineNumber+':'+columnNumber;}
_sourceFileId(uiSourceCode){return uiSourceCode.url();}
targetAdded(target){var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(debuggerModel&&!this._breakpointsActive)
debuggerModel.setBreakpointsActive(this._breakpointsActive);}
targetRemoved(target){}
_provisionalBreakpointsForSourceFileId(sourceFileId){var result=new Map();var breakpoints=this._provisionalBreakpoints.get(sourceFileId).valuesArray();for(var i=0;i<breakpoints.length;++i)
result.set(breakpoints[i]._breakpointStorageId(),breakpoints[i]);return result;}
removeProvisionalBreakpointsForTest(){var breakpoints=this._provisionalBreakpoints.valuesArray();for(var i=0;i<breakpoints.length;++i)
breakpoints[i].remove();this._provisionalBreakpoints.clear();}
_restoreBreakpoints(uiSourceCode){var sourceFileId=this._sourceFileId(uiSourceCode);if(!sourceFileId)
return;this._storage.mute();var breakpointItems=this._storage.breakpointItems(this._sourceFileId(uiSourceCode));var provisionalBreakpoints=this._provisionalBreakpointsForSourceFileId(sourceFileId);for(var i=0;i<breakpointItems.length;++i){var breakpointItem=breakpointItems[i];var itemStorageId=Bindings.BreakpointManager._breakpointStorageId(breakpointItem.sourceFileId,breakpointItem.lineNumber,breakpointItem.columnNumber);var provisionalBreakpoint=provisionalBreakpoints.get(itemStorageId);if(provisionalBreakpoint){if(!this._breakpointsForPrimaryUISourceCode.get(uiSourceCode))
this._breakpointsForPrimaryUISourceCode.set(uiSourceCode,[]);this._breakpointsForPrimaryUISourceCode.get(uiSourceCode).push(provisionalBreakpoint);provisionalBreakpoint._updateBreakpoint();}else{this._innerSetBreakpoint(uiSourceCode,breakpointItem.lineNumber,breakpointItem.columnNumber,breakpointItem.condition,breakpointItem.enabled);}}
this._provisionalBreakpoints.removeAll(sourceFileId);this._storage.unmute();}
_uiSourceCodeAdded(event){var uiSourceCode=(event.data);this._restoreBreakpoints(uiSourceCode);if(uiSourceCode.contentType().hasScripts()){uiSourceCode.addEventListener(Workspace.UISourceCode.Events.SourceMappingChanged,this._uiSourceCodeMappingChanged,this);}}
_uiSourceCodeRemoved(event){var uiSourceCode=(event.data);this._removeUISourceCode(uiSourceCode);}
_uiSourceCodeMappingChanged(event){var uiSourceCode=(event.target);var isIdentity=(event.data.isIdentity);var target=(event.data.target);if(isIdentity)
return;var breakpoints=this._breakpointsForPrimaryUISourceCode.get(uiSourceCode)||[];for(var i=0;i<breakpoints.length;++i)
breakpoints[i]._updateInDebuggerForTarget(target);}
_removeUISourceCode(uiSourceCode){var breakpoints=this._breakpointsForPrimaryUISourceCode.get(uiSourceCode)||[];var sourceFileId=this._sourceFileId(uiSourceCode);for(var i=0;i<breakpoints.length;++i){breakpoints[i]._resetLocations();if(breakpoints[i].enabled())
this._provisionalBreakpoints.set(sourceFileId,breakpoints[i]);}
uiSourceCode.removeEventListener(Workspace.UISourceCode.Events.SourceMappingChanged,this._uiSourceCodeMappingChanged,this);this._breakpointsForPrimaryUISourceCode.remove(uiSourceCode);}
setBreakpoint(uiSourceCode,lineNumber,columnNumber,condition,enabled){var uiLocation=new Workspace.UILocation(uiSourceCode,lineNumber,columnNumber);var normalizedLocation=this._debuggerWorkspaceBinding.normalizeUILocation(uiLocation);if(normalizedLocation.id()!==uiLocation.id()){Common.Revealer.reveal(normalizedLocation);uiLocation=normalizedLocation;}
this.setBreakpointsActive(true);return this._innerSetBreakpoint(uiLocation.uiSourceCode,uiLocation.lineNumber,uiLocation.columnNumber,condition,enabled);}
_innerSetBreakpoint(uiSourceCode,lineNumber,columnNumber,condition,enabled){var breakpoint=this.findBreakpoint(uiSourceCode,lineNumber,columnNumber);if(breakpoint){breakpoint._updateState(condition,enabled);return breakpoint;}
var projectId=uiSourceCode.project().id();var path=uiSourceCode.url();var sourceFileId=this._sourceFileId(uiSourceCode);breakpoint=new Bindings.BreakpointManager.Breakpoint(this,projectId,path,sourceFileId,lineNumber,columnNumber,condition,enabled);if(!this._breakpointsForPrimaryUISourceCode.get(uiSourceCode))
this._breakpointsForPrimaryUISourceCode.set(uiSourceCode,[]);this._breakpointsForPrimaryUISourceCode.get(uiSourceCode).push(breakpoint);return breakpoint;}
findBreakpoints(uiSourceCode,lineNumber){var breakpoints=this._breakpointsForUISourceCode.get(uiSourceCode);var lineBreakpoints=breakpoints?breakpoints.get(lineNumber):null;return lineBreakpoints?lineBreakpoints.valuesArray()[0]:[];}
findBreakpoint(uiSourceCode,lineNumber,columnNumber){var breakpoints=this._breakpointsForUISourceCode.get(uiSourceCode);var lineBreakpoints=breakpoints?breakpoints.get(lineNumber):null;var columnBreakpoints=lineBreakpoints?lineBreakpoints.get(columnNumber):null;return columnBreakpoints?columnBreakpoints[0]:null;}
possibleBreakpoints(uiSourceCode,textRange){var targets=this._targetManager.targets(SDK.Target.Capability.JS);if(!targets.length)
return Promise.resolve([]);for(var target of targets){var startLocation=this._debuggerWorkspaceBinding.uiLocationToRawLocation(target,uiSourceCode,textRange.startLine,textRange.startColumn);if(!startLocation)
continue;var endLocation=this._debuggerWorkspaceBinding.uiLocationToRawLocation(target,uiSourceCode,textRange.endLine,textRange.endColumn);if(!endLocation)
continue;var debuggerModel=SDK.DebuggerModel.fromTarget(target);return debuggerModel.getPossibleBreakpoints(startLocation,endLocation).then(toUILocations.bind(this));}
return Promise.resolve([]);function toUILocations(locations){var sortedLocations=locations.map(location=>this._debuggerWorkspaceBinding.rawLocationToUILocation(location));sortedLocations=sortedLocations.filter(location=>location&&location.uiSourceCode===uiSourceCode);sortedLocations.sort(Workspace.UILocation.comparator);if(!sortedLocations.length)
return[];var result=[sortedLocations[0]];var lastLocation=sortedLocations[0];for(var i=1;i<sortedLocations.length;++i){if(sortedLocations[i].id()===lastLocation.id())
continue;result.push(sortedLocations[i]);lastLocation=sortedLocations[i];}
return result;}}
breakpointsForUISourceCode(uiSourceCode){var result=[];var uiSourceCodeBreakpoints=this._breakpointsForUISourceCode.get(uiSourceCode);var breakpoints=uiSourceCodeBreakpoints?uiSourceCodeBreakpoints.valuesArray():[];for(var i=0;i<breakpoints.length;++i){var lineBreakpoints=breakpoints[i];var columnBreakpointArrays=lineBreakpoints?lineBreakpoints.valuesArray():[];result=result.concat.apply(result,columnBreakpointArrays);}
return result;}
allBreakpoints(){var result=[];var uiSourceCodes=this._breakpointsForUISourceCode.keysArray();for(var i=0;i<uiSourceCodes.length;++i)
result=result.concat(this.breakpointsForUISourceCode(uiSourceCodes[i]));return result;}
breakpointLocationsForUISourceCode(uiSourceCode){var uiSourceCodeBreakpoints=this._breakpointsForUISourceCode.get(uiSourceCode);var lineNumbers=uiSourceCodeBreakpoints?uiSourceCodeBreakpoints.keysArray():[];var result=[];for(var i=0;i<lineNumbers.length;++i){var lineBreakpoints=uiSourceCodeBreakpoints.get(lineNumbers[i]);var columnNumbers=lineBreakpoints.keysArray();for(var j=0;j<columnNumbers.length;++j){var columnBreakpoints=lineBreakpoints.get(columnNumbers[j]);var lineNumber=parseInt(lineNumbers[i],10);var columnNumber=parseInt(columnNumbers[j],10);for(var k=0;k<columnBreakpoints.length;++k){var breakpoint=columnBreakpoints[k];var uiLocation=uiSourceCode.uiLocation(lineNumber,columnNumber);result.push({breakpoint:breakpoint,uiLocation:uiLocation});}}}
return result;}
allBreakpointLocations(){var result=[];var uiSourceCodes=this._breakpointsForUISourceCode.keysArray();for(var i=0;i<uiSourceCodes.length;++i)
result=result.concat(this.breakpointLocationsForUISourceCode(uiSourceCodes[i]));return result;}
toggleAllBreakpoints(toggleState){var breakpoints=this.allBreakpoints();for(var i=0;i<breakpoints.length;++i)
breakpoints[i].setEnabled(toggleState);}
removeAllBreakpoints(){var breakpoints=this.allBreakpoints();for(var i=0;i<breakpoints.length;++i)
breakpoints[i].remove();}
_projectRemoved(event){var project=(event.data);var uiSourceCodes=project.uiSourceCodes();for(var i=0;i<uiSourceCodes.length;++i)
this._removeUISourceCode(uiSourceCodes[i]);}
_removeBreakpoint(breakpoint,removeFromStorage){var uiSourceCode=breakpoint.uiSourceCode();var breakpoints=uiSourceCode?this._breakpointsForPrimaryUISourceCode.get(uiSourceCode)||[]:[];breakpoints.remove(breakpoint);if(removeFromStorage)
this._storage._removeBreakpoint(breakpoint);this._provisionalBreakpoints.remove(breakpoint._sourceFileId,breakpoint);}
_uiLocationAdded(breakpoint,uiLocation){var breakpoints=this._breakpointsForUISourceCode.get(uiLocation.uiSourceCode);if(!breakpoints){breakpoints=new Map();this._breakpointsForUISourceCode.set(uiLocation.uiSourceCode,breakpoints);}
var lineBreakpoints=breakpoints.get(uiLocation.lineNumber);if(!lineBreakpoints){lineBreakpoints=new Map();breakpoints.set(uiLocation.lineNumber,lineBreakpoints);}
var columnBreakpoints=lineBreakpoints.get(uiLocation.columnNumber);if(!columnBreakpoints){columnBreakpoints=[];lineBreakpoints.set(uiLocation.columnNumber,columnBreakpoints);}
columnBreakpoints.push(breakpoint);this.dispatchEventToListeners(Bindings.BreakpointManager.Events.BreakpointAdded,{breakpoint:breakpoint,uiLocation:uiLocation});}
_uiLocationRemoved(breakpoint,uiLocation){var breakpoints=this._breakpointsForUISourceCode.get(uiLocation.uiSourceCode);if(!breakpoints)
return;var lineBreakpoints=breakpoints.get(uiLocation.lineNumber);if(!lineBreakpoints)
return;var columnBreakpoints=lineBreakpoints.get(uiLocation.columnNumber);if(!columnBreakpoints)
return;columnBreakpoints.remove(breakpoint);if(!columnBreakpoints.length)
lineBreakpoints.remove(uiLocation.columnNumber);if(!lineBreakpoints.size)
breakpoints.remove(uiLocation.lineNumber);if(!breakpoints.size)
this._breakpointsForUISourceCode.remove(uiLocation.uiSourceCode);this.dispatchEventToListeners(Bindings.BreakpointManager.Events.BreakpointRemoved,{breakpoint:breakpoint,uiLocation:uiLocation});}
setBreakpointsActive(active){if(this._breakpointsActive===active)
return;this._breakpointsActive=active;var debuggerModels=SDK.DebuggerModel.instances();for(var i=0;i<debuggerModels.length;++i)
debuggerModels[i].setBreakpointsActive(active);this.dispatchEventToListeners(Bindings.BreakpointManager.Events.BreakpointsActiveStateChanged,active);}
breakpointsActive(){return this._breakpointsActive;}};Bindings.BreakpointManager.Events={BreakpointAdded:Symbol('breakpoint-added'),BreakpointRemoved:Symbol('breakpoint-removed'),BreakpointsActiveStateChanged:Symbol('BreakpointsActiveStateChanged')};Bindings.BreakpointManager.Breakpoint=class{constructor(breakpointManager,projectId,path,sourceFileId,lineNumber,columnNumber,condition,enabled){this._breakpointManager=breakpointManager;this._projectId=projectId;this._path=path;this._lineNumber=lineNumber;this._columnNumber=columnNumber;this._sourceFileId=sourceFileId;this._numberOfDebuggerLocationForUILocation=new Map();this._condition;this._enabled;this._isRemoved;this._fakePrimaryLocation;this._currentState=null;this._targetBreakpoints=new Map();this._updateState(condition,enabled);this._breakpointManager._targetManager.observeTargets(this);}
targetAdded(target){var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(!debuggerModel)
return;var debuggerWorkspaceBinding=this._breakpointManager._debuggerWorkspaceBinding;this._targetBreakpoints.set(target,new Bindings.BreakpointManager.TargetBreakpoint(debuggerModel,this,debuggerWorkspaceBinding));}
targetRemoved(target){var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(!debuggerModel)
return;var targetBreakpoint=this._targetBreakpoints.remove(target);targetBreakpoint._cleanUpAfterDebuggerIsGone();targetBreakpoint._removeEventListeners();}
projectId(){return this._projectId;}
path(){return this._path;}
lineNumber(){return this._lineNumber;}
columnNumber(){return this._columnNumber;}
uiSourceCode(){return this._breakpointManager._workspace.uiSourceCode(this._projectId,this._path);}
_replaceUILocation(oldUILocation,newUILocation){if(this._isRemoved)
return;this._removeUILocation(oldUILocation,true);this._removeFakeBreakpointAtPrimaryLocation();var current=(this._numberOfDebuggerLocationForUILocation.get(newUILocation.id())||0)+1;this._numberOfDebuggerLocationForUILocation.set(newUILocation.id(),current);if(current===1)
this._breakpointManager._uiLocationAdded(this,newUILocation);}
_removeUILocation(uiLocation,muteCreationFakeBreakpoint){if(!uiLocation||!this._numberOfDebuggerLocationForUILocation.has(uiLocation.id()))
return;var current=(this._numberOfDebuggerLocationForUILocation.get(uiLocation.id())||0)-1;this._numberOfDebuggerLocationForUILocation.set(uiLocation.id(),current);if(current!==0)
return;this._numberOfDebuggerLocationForUILocation.delete(uiLocation.id());this._breakpointManager._uiLocationRemoved(this,uiLocation);if(!muteCreationFakeBreakpoint)
this._fakeBreakpointAtPrimaryLocation();}
enabled(){return this._enabled;}
setEnabled(enabled){this._updateState(this._condition,enabled);}
condition(){return this._condition;}
setCondition(condition){this._updateState(condition,this._enabled);}
_updateState(condition,enabled){if(this._enabled===enabled&&this._condition===condition)
return;this._enabled=enabled;this._condition=condition;this._breakpointManager._storage._updateBreakpoint(this);this._updateBreakpoint();}
_updateBreakpoint(){this._removeFakeBreakpointAtPrimaryLocation();this._fakeBreakpointAtPrimaryLocation();var targetBreakpoints=this._targetBreakpoints.valuesArray();for(var i=0;i<targetBreakpoints.length;++i)
targetBreakpoints[i]._scheduleUpdateInDebugger();}
remove(keepInStorage){this._isRemoved=true;var removeFromStorage=!keepInStorage;this._removeFakeBreakpointAtPrimaryLocation();var targetBreakpoints=this._targetBreakpoints.valuesArray();for(var i=0;i<targetBreakpoints.length;++i){targetBreakpoints[i]._scheduleUpdateInDebugger();targetBreakpoints[i]._removeEventListeners();}
this._breakpointManager._removeBreakpoint(this,removeFromStorage);this._breakpointManager._targetManager.unobserveTargets(this);}
_updateInDebuggerForTarget(target){this._targetBreakpoints.get(target)._scheduleUpdateInDebugger();}
_breakpointStorageId(){return Bindings.BreakpointManager._breakpointStorageId(this._sourceFileId,this._lineNumber,this._columnNumber);}
_fakeBreakpointAtPrimaryLocation(){if(this._isRemoved||this._numberOfDebuggerLocationForUILocation.size||this._fakePrimaryLocation)
return;var uiSourceCode=this._breakpointManager._workspace.uiSourceCode(this._projectId,this._path);if(!uiSourceCode)
return;this._fakePrimaryLocation=uiSourceCode.uiLocation(this._lineNumber,this._columnNumber);if(this._fakePrimaryLocation)
this._breakpointManager._uiLocationAdded(this,this._fakePrimaryLocation);}
_removeFakeBreakpointAtPrimaryLocation(){if(this._fakePrimaryLocation){this._breakpointManager._uiLocationRemoved(this,this._fakePrimaryLocation);delete this._fakePrimaryLocation;}}
_resetLocations(){this._removeFakeBreakpointAtPrimaryLocation();var targetBreakpoints=this._targetBreakpoints.valuesArray();for(var i=0;i<targetBreakpoints.length;++i)
targetBreakpoints[i]._resetLocations();}};Bindings.BreakpointManager.TargetBreakpoint=class extends SDK.SDKObject{constructor(debuggerModel,breakpoint,debuggerWorkspaceBinding){super(debuggerModel.target());this._debuggerModel=debuggerModel;this._breakpoint=breakpoint;this._debuggerWorkspaceBinding=debuggerWorkspaceBinding;this._liveLocations=new Bindings.LiveLocationPool();this._uiLocations=new Map();this._debuggerModel.addEventListener(SDK.DebuggerModel.Events.DebuggerWasDisabled,this._cleanUpAfterDebuggerIsGone,this);this._debuggerModel.addEventListener(SDK.DebuggerModel.Events.DebuggerWasEnabled,this._scheduleUpdateInDebugger,this);this._hasPendingUpdate=false;this._isUpdating=false;this._cancelCallback=false;this._currentState=null;if(this._debuggerModel.debuggerEnabled())
this._scheduleUpdateInDebugger();}
_resetLocations(){for(var uiLocation of this._uiLocations.values())
this._breakpoint._removeUILocation(uiLocation);this._uiLocations.clear();this._liveLocations.disposeAll();}
_scheduleUpdateInDebugger(){if(this._isUpdating){this._hasPendingUpdate=true;return;}
this._isUpdating=true;this._updateInDebugger(this._didUpdateInDebugger.bind(this));}
_didUpdateInDebugger(){this._isUpdating=false;if(this._hasPendingUpdate){this._hasPendingUpdate=false;this._scheduleUpdateInDebugger();}}
_scriptDiverged(){var uiSourceCode=this._breakpoint.uiSourceCode();if(!uiSourceCode)
return false;var scriptFile=this._debuggerWorkspaceBinding.scriptFile(uiSourceCode,this.target());return!!scriptFile&&scriptFile.hasDivergedFromVM();}
_updateInDebugger(callback){if(this.target().isDisposed()){this._cleanUpAfterDebuggerIsGone();callback();return;}
var uiSourceCode=this._breakpoint.uiSourceCode();var lineNumber=this._breakpoint._lineNumber;var columnNumber=this._breakpoint._columnNumber;var condition=this._breakpoint.condition();var debuggerLocation=uiSourceCode?this._debuggerWorkspaceBinding.uiLocationToRawLocation(this.target(),uiSourceCode,lineNumber,columnNumber):null;var newState;if(this._breakpoint._isRemoved||!this._breakpoint.enabled()||this._scriptDiverged()){newState=null;}else if(debuggerLocation){var script=debuggerLocation.script();if(script.sourceURL){newState=new Bindings.BreakpointManager.Breakpoint.State(script.sourceURL,null,debuggerLocation.lineNumber,debuggerLocation.columnNumber,condition);}else{newState=new Bindings.BreakpointManager.Breakpoint.State(null,debuggerLocation.scriptId,debuggerLocation.lineNumber,debuggerLocation.columnNumber,condition);}}else if(this._breakpoint._currentState&&this._breakpoint._currentState.url){var position=this._breakpoint._currentState;newState=new Bindings.BreakpointManager.Breakpoint.State(position.url,null,position.lineNumber,position.columnNumber,condition);}else if(uiSourceCode){newState=new Bindings.BreakpointManager.Breakpoint.State(uiSourceCode.url(),null,lineNumber,columnNumber,condition);}
if(this._debuggerId&&Bindings.BreakpointManager.Breakpoint.State.equals(newState,this._currentState)){callback();return;}
this._breakpoint._currentState=newState;if(this._debuggerId){this._resetLocations();this._debuggerModel.removeBreakpoint(this._debuggerId,this._didRemoveFromDebugger.bind(this,callback));this._scheduleUpdateInDebugger();this._currentState=null;return;}
if(!newState){callback();return;}
var updateCallback=this._didSetBreakpointInDebugger.bind(this,callback);if(newState.url){this._debuggerModel.setBreakpointByURL(newState.url,newState.lineNumber,newState.columnNumber,this._breakpoint.condition(),updateCallback);}else if(newState.scriptId){this._debuggerModel.setBreakpointBySourceId((debuggerLocation),condition,updateCallback);}
this._currentState=newState;}
_didSetBreakpointInDebugger(callback,breakpointId,locations){if(this._cancelCallback){this._cancelCallback=false;callback();return;}
if(!breakpointId){this._breakpoint.remove(true);callback();return;}
this._debuggerId=breakpointId;this._debuggerModel.addBreakpointListener(this._debuggerId,this._breakpointResolved,this);for(var i=0;i<locations.length;++i){if(!this._addResolvedLocation(locations[i]))
break;}
callback();}
_didRemoveFromDebugger(callback){if(this._cancelCallback){this._cancelCallback=false;callback();return;}
this._resetLocations();this._debuggerModel.removeBreakpointListener(this._debuggerId,this._breakpointResolved,this);delete this._debuggerId;callback();}
_breakpointResolved(event){this._addResolvedLocation((event.data));}
_locationUpdated(location,liveLocation){var uiLocation=liveLocation.uiLocation();if(!uiLocation)
return;var oldUILocation=this._uiLocations.get(location.id())||null;this._uiLocations.set(location.id(),uiLocation);this._breakpoint._replaceUILocation(oldUILocation,uiLocation);}
_addResolvedLocation(location){var uiLocation=this._debuggerWorkspaceBinding.rawLocationToUILocation(location);var breakpoint=this._breakpoint._breakpointManager.findBreakpoint(uiLocation.uiSourceCode,uiLocation.lineNumber,uiLocation.columnNumber);if(breakpoint&&breakpoint!==this._breakpoint){this._breakpoint.remove();return false;}
this._debuggerWorkspaceBinding.createLiveLocation(location,this._locationUpdated.bind(this,location),this._liveLocations);return true;}
_cleanUpAfterDebuggerIsGone(){if(this._isUpdating)
this._cancelCallback=true;this._resetLocations();this._currentState=null;if(this._debuggerId)
this._didRemoveFromDebugger(function(){});}
_removeEventListeners(){this._debuggerModel.removeEventListener(SDK.DebuggerModel.Events.DebuggerWasDisabled,this._cleanUpAfterDebuggerIsGone,this);this._debuggerModel.removeEventListener(SDK.DebuggerModel.Events.DebuggerWasEnabled,this._scheduleUpdateInDebugger,this);}};Bindings.BreakpointManager.Breakpoint.State=class{constructor(url,scriptId,lineNumber,columnNumber,condition){this.url=url;this.scriptId=scriptId;this.lineNumber=lineNumber;this.columnNumber=columnNumber;this.condition=condition;}
static equals(stateA,stateB){if(!stateA||!stateB)
return false;if(stateA.scriptId||stateB.scriptId)
return false;return stateA.url===stateB.url&&stateA.lineNumber===stateB.lineNumber&&stateA.columnNumber===stateB.columnNumber&&stateA.condition===stateB.condition;}};Bindings.BreakpointManager.Storage=class{constructor(breakpointManager,setting){this._breakpointManager=breakpointManager;this._setting=setting||Common.settings.createLocalSetting('breakpoints',[]);var breakpoints=this._setting.get();this._breakpoints={};for(var i=0;i<breakpoints.length;++i){var breakpoint=(breakpoints[i]);breakpoint.columnNumber=breakpoint.columnNumber||0;this._breakpoints[breakpoint.sourceFileId+':'+breakpoint.lineNumber+':'+breakpoint.columnNumber]=breakpoint;}}
mute(){this._muted=true;}
unmute(){delete this._muted;}
breakpointItems(sourceFileId){var result=[];for(var id in this._breakpoints){var breakpoint=this._breakpoints[id];if(breakpoint.sourceFileId===sourceFileId)
result.push(breakpoint);}
return result;}
_updateBreakpoint(breakpoint){if(this._muted||!breakpoint._breakpointStorageId())
return;this._breakpoints[breakpoint._breakpointStorageId()]=new Bindings.BreakpointManager.Storage.Item(breakpoint);this._save();}
_removeBreakpoint(breakpoint){if(this._muted)
return;delete this._breakpoints[breakpoint._breakpointStorageId()];this._save();}
_save(){var breakpointsArray=[];for(var id in this._breakpoints)
breakpointsArray.push(this._breakpoints[id]);this._setting.set(breakpointsArray);}};Bindings.BreakpointManager.Storage.Item=class{constructor(breakpoint){this.sourceFileId=breakpoint._sourceFileId;this.lineNumber=breakpoint.lineNumber();this.columnNumber=breakpoint.columnNumber();this.condition=breakpoint.condition();this.enabled=breakpoint.enabled();}};Bindings.breakpointManager;;Bindings.ContentProviderBasedProject=class extends Workspace.ProjectStore{constructor(workspace,id,type,displayName){super(workspace,id,type,displayName);this._contentProviders={};workspace.addProject(this);}
requestFileContent(uiSourceCode,callback){var contentProvider=this._contentProviders[uiSourceCode.url()];contentProvider.requestContent().then(callback);}
requestMetadata(uiSourceCode){return Promise.resolve(uiSourceCode[Bindings.ContentProviderBasedProject._metadata]);}
canSetFileContent(){return false;}
setFileContent(uiSourceCode,newContent,callback){callback(null);}
canRename(){return false;}
rename(uiSourceCode,newName,callback){var path=uiSourceCode.url();this.performRename(path,newName,innerCallback.bind(this));function innerCallback(success,newName){if(success&&newName){var copyOfPath=path.split('/');copyOfPath[copyOfPath.length-1]=newName;var newPath=copyOfPath.join('/');this._contentProviders[newPath]=this._contentProviders[path];delete this._contentProviders[path];this.renameUISourceCode(uiSourceCode,newName);}
callback(success,newName);}}
excludeFolder(path){}
createFile(path,name,content,callback){}
deleteFile(path){}
remove(){}
performRename(path,newName,callback){callback(false);}
searchInFileContent(uiSourceCode,query,caseSensitive,isRegex,callback){var contentProvider=this._contentProviders[uiSourceCode.url()];contentProvider.searchInContent(query,caseSensitive,isRegex,callback);}
findFilesMatchingSearchRequest(searchConfig,filesMathingFileQuery,progress,callback){var result=[];var paths=filesMathingFileQuery;var totalCount=paths.length;if(totalCount===0){setTimeout(doneCallback,0);return;}
var barrier=new CallbackBarrier();progress.setTotalWork(paths.length);for(var i=0;i<paths.length;++i)
searchInContent.call(this,paths[i],barrier.createCallback(searchInContentCallback.bind(null,paths[i])));barrier.callWhenDone(doneCallback);function searchInContent(path,callback){var queriesToRun=searchConfig.queries().slice();searchNextQuery.call(this);function searchNextQuery(){if(!queriesToRun.length){callback(true);return;}
var query=queriesToRun.shift();this._contentProviders[path].searchInContent(query,!searchConfig.ignoreCase(),searchConfig.isRegex(),contentCallback.bind(this));}
function contentCallback(searchMatches){if(!searchMatches.length){callback(false);return;}
searchNextQuery.call(this);}}
function searchInContentCallback(path,matches){if(matches)
result.push(path);progress.worked(1);}
function doneCallback(){callback(result);progress.done();}}
indexContent(progress){setImmediate(progress.done.bind(progress));}
addUISourceCodeWithProvider(uiSourceCode,contentProvider,metadata){this._contentProviders[uiSourceCode.url()]=contentProvider;uiSourceCode[Bindings.ContentProviderBasedProject._metadata]=metadata;this.addUISourceCode(uiSourceCode,true);}
addContentProvider(url,contentProvider){var uiSourceCode=this.createUISourceCode(url,contentProvider.contentType());this.addUISourceCodeWithProvider(uiSourceCode,contentProvider,null);return uiSourceCode;}
removeFile(path){delete this._contentProviders[path];this.removeUISourceCode(path);}
reset(){this._contentProviders={};this.removeProject();this.workspace().addProject(this);}
dispose(){this._contentProviders={};this.removeProject();}};Bindings.ContentProviderBasedProject._metadata=Symbol('ContentProviderBasedProject.Metadata');;Bindings.DefaultScriptMapping=class{constructor(debuggerModel,workspace,debuggerWorkspaceBinding){this._debuggerModel=debuggerModel;this._debuggerWorkspaceBinding=debuggerWorkspaceBinding;var projectId=Bindings.DefaultScriptMapping.projectIdForTarget(debuggerModel.target());this._project=new Bindings.ContentProviderBasedProject(workspace,projectId,Workspace.projectTypes.Debugger,'');this._uiSourceCodeForScriptId=new Map();this._scriptIdForUISourceCode=new Map();this._eventListeners=[debuggerModel.addEventListener(SDK.DebuggerModel.Events.GlobalObjectCleared,this._debuggerReset,this)];}
static scriptForUISourceCode(uiSourceCode){return uiSourceCode[Bindings.DefaultScriptMapping._scriptSymbol]||null;}
static projectIdForTarget(target){return'debugger:'+target.id();}
rawLocationToUILocation(rawLocation){var debuggerModelLocation=(rawLocation);var script=debuggerModelLocation.script();var uiSourceCode=this._uiSourceCodeForScriptId.get(script.scriptId);var lineNumber=debuggerModelLocation.lineNumber-(script.isInlineScriptWithSourceURL()?script.lineOffset:0);var columnNumber=debuggerModelLocation.columnNumber||0;if(script.isInlineScriptWithSourceURL()&&!lineNumber&&columnNumber)
columnNumber-=script.columnOffset;return uiSourceCode.uiLocation(lineNumber,columnNumber);}
uiLocationToRawLocation(uiSourceCode,lineNumber,columnNumber){var scriptId=this._scriptIdForUISourceCode.get(uiSourceCode);var script=this._debuggerModel.scriptForId(scriptId);if(script.isInlineScriptWithSourceURL()){return this._debuggerModel.createRawLocation(script,lineNumber+script.lineOffset,lineNumber?columnNumber:columnNumber+script.columnOffset);}
return this._debuggerModel.createRawLocation(script,lineNumber,columnNumber);}
addScript(script){var name=Common.ParsedURL.extractName(script.sourceURL);var url='debugger:///VM'+script.scriptId+(name?' '+name:'');var uiSourceCode=this._project.createUISourceCode(url,Common.resourceTypes.Script);uiSourceCode[Bindings.DefaultScriptMapping._scriptSymbol]=script;this._uiSourceCodeForScriptId.set(script.scriptId,uiSourceCode);this._scriptIdForUISourceCode.set(uiSourceCode,script.scriptId);this._project.addUISourceCodeWithProvider(uiSourceCode,script,null);this._debuggerWorkspaceBinding.setSourceMapping(this._debuggerModel.target(),uiSourceCode,this);this._debuggerWorkspaceBinding.pushSourceMapping(script,this);}
isIdentity(){return true;}
uiLineHasMapping(uiSourceCode,lineNumber){return true;}
_debuggerReset(){this._uiSourceCodeForScriptId.clear();this._scriptIdForUISourceCode.clear();this._project.reset();}
dispose(){Common.EventTarget.removeEventListeners(this._eventListeners);this._debuggerReset();this._project.dispose();}};Bindings.DefaultScriptMapping._scriptSymbol=Symbol('symbol');;Bindings.FileSystemWorkspaceBinding=class{constructor(isolatedFileSystemManager,workspace){this._isolatedFileSystemManager=isolatedFileSystemManager;this._workspace=workspace;this._eventListeners=[this._isolatedFileSystemManager.addEventListener(Workspace.IsolatedFileSystemManager.Events.FileSystemAdded,this._onFileSystemAdded,this),this._isolatedFileSystemManager.addEventListener(Workspace.IsolatedFileSystemManager.Events.FileSystemRemoved,this._onFileSystemRemoved,this),this._isolatedFileSystemManager.addEventListener(Workspace.IsolatedFileSystemManager.Events.FileSystemFilesChanged,this._fileSystemFilesChanged,this)];this._boundFileSystems=new Map();this._isolatedFileSystemManager.waitForFileSystems().then(this._onFileSystemsLoaded.bind(this));}
static projectId(fileSystemPath){return fileSystemPath;}
static relativePath(uiSourceCode){var baseURL=(uiSourceCode.project())._fileSystemBaseURL;return uiSourceCode.url().substring(baseURL.length).split('/');}
static completeURL(project,relativePath){var fsProject=(project);return fsProject._fileSystemBaseURL+relativePath;}
static _contentTypeForExtension(extension){if(Bindings.FileSystemWorkspaceBinding._styleSheetExtensions.has(extension))
return Common.resourceTypes.Stylesheet;if(Bindings.FileSystemWorkspaceBinding._documentExtensions.has(extension))
return Common.resourceTypes.Document;if(Bindings.FileSystemWorkspaceBinding._imageExtensions.has(extension))
return Common.resourceTypes.Image;if(Bindings.FileSystemWorkspaceBinding._scriptExtensions.has(extension))
return Common.resourceTypes.Script;return Common.resourceTypes.Other;}
static fileSystemPath(projectId){return projectId;}
fileSystemManager(){return this._isolatedFileSystemManager;}
_onFileSystemsLoaded(fileSystems){for(var fileSystem of fileSystems)
this._addFileSystem(fileSystem);}
_onFileSystemAdded(event){var fileSystem=(event.data);this._addFileSystem(fileSystem);}
_addFileSystem(fileSystem){var boundFileSystem=new Bindings.FileSystemWorkspaceBinding.FileSystem(this,fileSystem,this._workspace);this._boundFileSystems.set(fileSystem.path(),boundFileSystem);}
_onFileSystemRemoved(event){var fileSystem=(event.data);var boundFileSystem=this._boundFileSystems.get(fileSystem.path());boundFileSystem.dispose();this._boundFileSystems.remove(fileSystem.path());}
_fileSystemFilesChanged(event){var paths=(event.data);for(var path of paths){for(var key of this._boundFileSystems.keys()){if(!path.startsWith(key))
continue;this._boundFileSystems.get(key)._fileChanged(path);}}}
dispose(){Common.EventTarget.removeEventListeners(this._eventListeners);for(var fileSystem of this._boundFileSystems.values()){fileSystem.dispose();this._boundFileSystems.remove(fileSystem._fileSystem.path());}}};Bindings.FileSystemWorkspaceBinding._styleSheetExtensions=new Set(['css','scss','sass','less']);Bindings.FileSystemWorkspaceBinding._documentExtensions=new Set(['htm','html','asp','aspx','phtml','jsp']);Bindings.FileSystemWorkspaceBinding._scriptExtensions=new Set(['asp','aspx','c','cc','cljs','coffee','cpp','cs','dart','java','js','jsp','jsx','h','m','mm','py','sh','ts','tsx','ls']);Bindings.FileSystemWorkspaceBinding._imageExtensions=Workspace.IsolatedFileSystem.ImageExtensions;Bindings.FileSystemWorkspaceBinding.FileSystem=class extends Workspace.ProjectStore{constructor(fileSystemWorkspaceBinding,isolatedFileSystem,workspace){var fileSystemPath=isolatedFileSystem.path();var id=Bindings.FileSystemWorkspaceBinding.projectId(fileSystemPath);console.assert(!workspace.project(id));var displayName=fileSystemPath.substr(fileSystemPath.lastIndexOf('/')+1);super(workspace,id,Workspace.projectTypes.FileSystem,displayName);this._fileSystem=isolatedFileSystem;this._fileSystemBaseURL=this._fileSystem.path()+'/';this._fileSystemWorkspaceBinding=fileSystemWorkspaceBinding;this._fileSystemPath=fileSystemPath;workspace.addProject(this);this.populate();}
fileSystemPath(){return this._fileSystemPath;}
gitFolders(){return this._fileSystem.gitFolders().map(folder=>this._fileSystemPath+'/'+folder);}
_filePathForUISourceCode(uiSourceCode){return uiSourceCode.url().substring(this._fileSystemPath.length);}
requestMetadata(uiSourceCode){if(uiSourceCode[Bindings.FileSystemWorkspaceBinding._metadata])
return uiSourceCode[Bindings.FileSystemWorkspaceBinding._metadata];var relativePath=this._filePathForUISourceCode(uiSourceCode);var promise=this._fileSystem.getMetadata(relativePath).then(onMetadata);uiSourceCode[Bindings.FileSystemWorkspaceBinding._metadata]=promise;return promise;function onMetadata(metadata){if(!metadata)
return null;return new Workspace.UISourceCodeMetadata(metadata.modificationTime,metadata.size);}}
requestFileContent(uiSourceCode,callback){var filePath=this._filePathForUISourceCode(uiSourceCode);var isImage=Bindings.FileSystemWorkspaceBinding._imageExtensions.has(Common.ParsedURL.extractExtension(filePath));this._fileSystem.requestFileContent(filePath,isImage?base64CallbackWrapper:callback);function base64CallbackWrapper(result){if(!result){callback(result);return;}
var index=result.indexOf(',');callback(result.substring(index+1));}}
canSetFileContent(){return true;}
setFileContent(uiSourceCode,newContent,callback){var filePath=this._filePathForUISourceCode(uiSourceCode);this._fileSystem.setFileContent(filePath,newContent,callback.bind(this,''));}
canRename(){return true;}
rename(uiSourceCode,newName,callback){if(newName===uiSourceCode.name()){callback(true,uiSourceCode.name(),uiSourceCode.url(),uiSourceCode.contentType());return;}
var filePath=this._filePathForUISourceCode(uiSourceCode);this._fileSystem.renameFile(filePath,newName,innerCallback.bind(this));function innerCallback(success,newName){if(!success||!newName){callback(false,newName);return;}
console.assert(newName);var slash=filePath.lastIndexOf('/');var parentPath=filePath.substring(0,slash);filePath=parentPath+'/'+newName;filePath=filePath.substr(1);var extension=this._extensionForPath(newName);var newURL=this._fileSystemBaseURL+filePath;var newContentType=Bindings.FileSystemWorkspaceBinding._contentTypeForExtension(extension);this.renameUISourceCode(uiSourceCode,newName);callback(true,newName,newURL,newContentType);}}
searchInFileContent(uiSourceCode,query,caseSensitive,isRegex,callback){var filePath=this._filePathForUISourceCode(uiSourceCode);this._fileSystem.requestFileContent(filePath,contentCallback);function contentCallback(content){var result=[];if(content!==null)
result=Common.ContentProvider.performSearchInContent(content,query,caseSensitive,isRegex);callback(result);}}
findFilesMatchingSearchRequest(searchConfig,filesMathingFileQuery,progress,callback){var result=filesMathingFileQuery;var queriesToRun=searchConfig.queries().slice();if(!queriesToRun.length)
queriesToRun.push('');progress.setTotalWork(queriesToRun.length);searchNextQuery.call(this);function searchNextQuery(){if(!queriesToRun.length){progress.done();callback(result);return;}
var query=queriesToRun.shift();this._fileSystem.searchInPath(searchConfig.isRegex()?'':query,progress,innerCallback.bind(this));}
function innerCallback(files){files=files.sort();progress.worked(1);result=result.intersectOrdered(files,String.naturalOrderComparator);searchNextQuery.call(this);}}
indexContent(progress){this._fileSystem.indexContent(progress);}
_extensionForPath(path){var extensionIndex=path.lastIndexOf('.');if(extensionIndex===-1)
return'';return path.substring(extensionIndex+1).toLowerCase();}
populate(){var chunkSize=1000;var filePaths=this._fileSystem.filePaths();reportFileChunk.call(this,0);function reportFileChunk(from){var to=Math.min(from+chunkSize,filePaths.length);for(var i=from;i<to;++i)
this._addFile(filePaths[i]);if(to<filePaths.length)
setTimeout(reportFileChunk.bind(this,to),100);}}
excludeFolder(url){var relativeFolder=url.substring(this._fileSystemBaseURL.length);if(!relativeFolder.startsWith('/'))
relativeFolder='/'+relativeFolder;if(!relativeFolder.endsWith('/'))
relativeFolder+='/';this._fileSystem.addExcludedFolder(relativeFolder);var uiSourceCodes=this.uiSourceCodes().slice();for(var i=0;i<uiSourceCodes.length;++i){var uiSourceCode=uiSourceCodes[i];if(uiSourceCode.url().startsWith(url))
this.removeUISourceCode(uiSourceCode.url());}}
createFile(path,name,content,callback){this._fileSystem.createFile(path,name,innerCallback.bind(this));var createFilePath;function innerCallback(filePath){if(!filePath){callback(null);return;}
createFilePath=filePath;if(!content){contentSet.call(this);return;}
this._fileSystem.setFileContent(filePath,content,contentSet.bind(this));}
function contentSet(){callback(this._addFile(createFilePath));}}
deleteFile(path){this._fileSystem.deleteFile(path);this.removeUISourceCode(path);}
remove(){this._fileSystemWorkspaceBinding._isolatedFileSystemManager.removeFileSystem(this._fileSystem);}
_addFile(filePath){var extension=this._extensionForPath(filePath);var contentType=Bindings.FileSystemWorkspaceBinding._contentTypeForExtension(extension);var uiSourceCode=this.createUISourceCode(this._fileSystemBaseURL+filePath,contentType);this.addUISourceCode(uiSourceCode);return uiSourceCode;}
_fileChanged(path){var uiSourceCode=this.uiSourceCodeForURL(path);if(!uiSourceCode){var contentType=Bindings.FileSystemWorkspaceBinding._contentTypeForExtension(this._extensionForPath(path));this.addUISourceCode(this.createUISourceCode(path,contentType));return;}
uiSourceCode[Bindings.FileSystemWorkspaceBinding._metadata]=null;uiSourceCode.checkContentUpdated();}
dispose(){this.removeProject();}};Bindings.FileSystemWorkspaceBinding._metadata=Symbol('FileSystemWorkspaceBinding.Metadata');;Bindings.OutputStreamDelegate=function(){};Bindings.OutputStreamDelegate.prototype={onTransferStarted:function(){},onTransferFinished:function(){},onChunkTransferred:function(reader){},onError:function(reader,event){},};Bindings.ChunkedReader=function(){};Bindings.ChunkedReader.prototype={fileSize:function(){},loadedSize:function(){},fileName:function(){},cancel:function(){}};Bindings.ChunkedFileReader=class{constructor(file,chunkSize,delegate){this._file=file;this._fileSize=file.size;this._loadedSize=0;this._chunkSize=chunkSize;this._delegate=delegate;this._decoder=new TextDecoder();this._isCanceled=false;}
start(output){this._output=output;this._reader=new FileReader();this._reader.onload=this._onChunkLoaded.bind(this);this._reader.onerror=this._delegate.onError.bind(this._delegate,this);this._delegate.onTransferStarted();this._loadChunk();}
cancel(){this._isCanceled=true;}
loadedSize(){return this._loadedSize;}
fileSize(){return this._fileSize;}
fileName(){return this._file.name;}
_onChunkLoaded(event){if(this._isCanceled)
return;if(event.target.readyState!==FileReader.DONE)
return;var buffer=event.target.result;this._loadedSize+=buffer.byteLength;var endOfFile=this._loadedSize===this._fileSize;var decodedString=this._decoder.decode(buffer,{stream:!endOfFile});this._output.write(decodedString);if(this._isCanceled)
return;this._delegate.onChunkTransferred(this);if(endOfFile){this._file=null;this._reader=null;this._output.close();this._delegate.onTransferFinished();return;}
this._loadChunk();}
_loadChunk(){var chunkStart=this._loadedSize;var chunkEnd=Math.min(this._fileSize,chunkStart+this._chunkSize);var nextPart=this._file.slice(chunkStart,chunkEnd);this._reader.readAsArrayBuffer(nextPart);}};Bindings.createFileSelectorElement=function(callback){var fileSelectorElement=createElement('input');fileSelectorElement.type='file';fileSelectorElement.style.display='none';fileSelectorElement.setAttribute('tabindex',-1);fileSelectorElement.onchange=onChange;function onChange(event){callback(fileSelectorElement.files[0]);}
return fileSelectorElement;};Bindings.FileOutputStream=class{open(fileName,callback){this._closed=false;this._writeCallbacks=[];this._fileName=fileName;function callbackWrapper(accepted){if(accepted)
Workspace.fileManager.addEventListener(Workspace.FileManager.Events.AppendedToURL,this._onAppendDone,this);callback(accepted);}
Workspace.fileManager.save(this._fileName,'',true,callbackWrapper.bind(this));}
write(data,callback){this._writeCallbacks.push(callback);Workspace.fileManager.append(this._fileName,data);}
close(){this._closed=true;if(this._writeCallbacks.length)
return;Workspace.fileManager.removeEventListener(Workspace.FileManager.Events.AppendedToURL,this._onAppendDone,this);Workspace.fileManager.close(this._fileName);}
_onAppendDone(event){if(event.data!==this._fileName)
return;var callback=this._writeCallbacks.shift();if(callback)
callback(this);if(!this._writeCallbacks.length){if(this._closed){Workspace.fileManager.removeEventListener(Workspace.FileManager.Events.AppendedToURL,this._onAppendDone,this);Workspace.fileManager.close(this._fileName);}}}};;Bindings.BlackboxManager=class{constructor(debuggerWorkspaceBinding){this._debuggerWorkspaceBinding=debuggerWorkspaceBinding;SDK.targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.ParsedScriptSource,this._parsedScriptSource,this);SDK.targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.GlobalObjectCleared,this._globalObjectCleared,this);Common.moduleSetting('skipStackFramesPattern').addChangeListener(this._patternChanged.bind(this));Common.moduleSetting('skipContentScripts').addChangeListener(this._patternChanged.bind(this));this._debuggerModelData=new Map();this._isBlackboxedURLCache=new Map();SDK.targetManager.observeTargets(this);}
addChangeListener(listener,thisObject){Common.moduleSetting('skipStackFramesPattern').addChangeListener(listener,thisObject);}
removeChangeListener(listener,thisObject){Common.moduleSetting('skipStackFramesPattern').removeChangeListener(listener,thisObject);}
targetAdded(target){var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(debuggerModel)
this._setBlackboxPatterns(debuggerModel);}
targetRemoved(target){}
_setBlackboxPatterns(debuggerModel){var regexPatterns=Common.moduleSetting('skipStackFramesPattern').getAsArray();var patterns=([]);for(var item of regexPatterns){if(!item.disabled&&item.pattern)
patterns.push(item.pattern);}
return debuggerModel.setBlackboxPatterns(patterns);}
isBlackboxedRawLocation(location){var script=location.script();if(!script)
return false;var positions=this._scriptPositions(script);if(!positions)
return this._isBlackboxedScript(script);var index=positions.lowerBound(location,comparator);return!!(index%2);function comparator(a,b){if(a.lineNumber!==b.lineNumber)
return a.lineNumber-b.lineNumber;return a.columnNumber-b.columnNumber;}}
isBlackboxedUISourceCode(uiSourceCode){var projectType=uiSourceCode.project().type();var isContentScript=projectType===Workspace.projectTypes.ContentScripts;if(isContentScript&&Common.moduleSetting('skipContentScripts').get())
return true;var url=this._uiSourceCodeURL(uiSourceCode);return url?this.isBlackboxedURL(url):false;}
isBlackboxedURL(url,isContentScript){if(this._isBlackboxedURLCache.has(url))
return!!this._isBlackboxedURLCache.get(url);if(isContentScript&&Common.moduleSetting('skipContentScripts').get())
return true;var regex=Common.moduleSetting('skipStackFramesPattern').asRegExp();var isBlackboxed=regex&&regex.test(url);this._isBlackboxedURLCache.set(url,isBlackboxed);return isBlackboxed;}
sourceMapLoaded(script,sourceMap){if(!sourceMap)
return Promise.resolve();var previousScriptState=this._scriptPositions(script);if(!previousScriptState)
return Promise.resolve();var hasBlackboxedMappings=sourceMap.sourceURLs().some((url)=>this.isBlackboxedURL(url));var mappings=hasBlackboxedMappings?sourceMap.mappings().slice():[];if(!mappings.length){if(previousScriptState.length>0)
return this._setScriptState(script,[]);return Promise.resolve();}
mappings.sort(mappingComparator);var currentBlackboxed=false;var isBlackboxed=false;var positions=[];if(mappings[0].lineNumber!==0||mappings[0].columnNumber!==0){positions.push({lineNumber:0,columnNumber:0});currentBlackboxed=true;}
for(var mapping of mappings){if(mapping.sourceURL&&currentBlackboxed!==this.isBlackboxedURL(mapping.sourceURL)){positions.push({lineNumber:mapping.lineNumber,columnNumber:mapping.columnNumber});currentBlackboxed=!currentBlackboxed;}
isBlackboxed=currentBlackboxed||isBlackboxed;}
return this._setScriptState(script,!isBlackboxed?[]:positions);function mappingComparator(a,b){if(a.lineNumber!==b.lineNumber)
return a.lineNumber-b.lineNumber;return a.columnNumber-b.columnNumber;}}
_uiSourceCodeURL(uiSourceCode){return uiSourceCode.project().type()===Workspace.projectTypes.Debugger?null:uiSourceCode.url();}
canBlackboxUISourceCode(uiSourceCode){var url=this._uiSourceCodeURL(uiSourceCode);return url?!!this._urlToRegExpString(url):false;}
blackboxUISourceCode(uiSourceCode){var url=this._uiSourceCodeURL(uiSourceCode);if(url)
this._blackboxURL(url);}
unblackboxUISourceCode(uiSourceCode){var url=this._uiSourceCodeURL(uiSourceCode);if(url)
this._unblackboxURL(url);}
blackboxContentScripts(){Common.moduleSetting('skipContentScripts').set(true);}
unblackboxContentScripts(){Common.moduleSetting('skipContentScripts').set(false);}
_blackboxURL(url){var regexPatterns=Common.moduleSetting('skipStackFramesPattern').getAsArray();var regexValue=this._urlToRegExpString(url);if(!regexValue)
return;var found=false;for(var i=0;i<regexPatterns.length;++i){var item=regexPatterns[i];if(item.pattern===regexValue){item.disabled=false;found=true;break;}}
if(!found)
regexPatterns.push({pattern:regexValue});Common.moduleSetting('skipStackFramesPattern').setAsArray(regexPatterns);}
_unblackboxURL(url){var regexPatterns=Common.moduleSetting('skipStackFramesPattern').getAsArray();var regexValue=Bindings.blackboxManager._urlToRegExpString(url);if(!regexValue)
return;regexPatterns=regexPatterns.filter(function(item){return item.pattern!==regexValue;});for(var i=0;i<regexPatterns.length;++i){var item=regexPatterns[i];if(item.disabled)
continue;try{var regex=new RegExp(item.pattern);if(regex.test(url))
item.disabled=true;}catch(e){}}
Common.moduleSetting('skipStackFramesPattern').setAsArray(regexPatterns);}
_patternChanged(){this._isBlackboxedURLCache.clear();var promises=[];for(var debuggerModel of SDK.DebuggerModel.instances()){promises.push(this._setBlackboxPatterns(debuggerModel));for(var scriptId in debuggerModel.scripts){var script=debuggerModel.scripts[scriptId];promises.push(this._addScript(script).then(loadSourceMap.bind(this,script)));}}
Promise.all(promises).then(this._patternChangeFinishedForTests.bind(this));function loadSourceMap(script){return this.sourceMapLoaded(script,this._debuggerWorkspaceBinding.sourceMapForScript(script));}}
_patternChangeFinishedForTests(){}
_globalObjectCleared(event){var debuggerModel=(event.target);this._debuggerModelData.delete(debuggerModel);this._isBlackboxedURLCache.clear();}
_parsedScriptSource(event){var script=(event.data);this._addScript(script);}
_addScript(script){var blackboxed=this._isBlackboxedScript(script);return this._setScriptState(script,blackboxed?[{lineNumber:0,columnNumber:0}]:[]);}
_isBlackboxedScript(script){return this.isBlackboxedURL(script.sourceURL,script.isContentScript());}
_scriptPositions(script){if(this._debuggerModelData.has(script.debuggerModel))
return this._debuggerModelData.get(script.debuggerModel).get(script.scriptId)||null;return null;}
_setScriptPositions(script,positions){var debuggerModel=script.debuggerModel;if(!this._debuggerModelData.has(debuggerModel))
this._debuggerModelData.set(debuggerModel,new Map());this._debuggerModelData.get(debuggerModel).set(script.scriptId,positions);}
_setScriptState(script,positions){var previousScriptState=this._scriptPositions(script);if(previousScriptState){var hasChanged=false;hasChanged=previousScriptState.length!==positions.length;for(var i=0;!hasChanged&&i<positions.length;++i){hasChanged=positions[i].lineNumber!==previousScriptState[i].lineNumber||positions[i].columnNumber!==previousScriptState[i].columnNumber;}
if(!hasChanged)
return Promise.resolve();}else{if(positions.length===0)
return Promise.resolve().then(updateState.bind(this,false));}
return script.setBlackboxedRanges(positions).then(updateState.bind(this));function updateState(success){if(success){this._setScriptPositions(script,positions);this._debuggerWorkspaceBinding.updateLocations(script);var isBlackboxed=positions.length!==0;if(!isBlackboxed&&script.sourceMapURL)
this._debuggerWorkspaceBinding.maybeLoadSourceMap(script);}else{var hasPositions=!!this._scriptPositions(script);if(!hasPositions)
this._setScriptPositions(script,[]);}}}
_urlToRegExpString(url){var parsedURL=new Common.ParsedURL(url);if(parsedURL.isAboutBlank()||parsedURL.isDataURL())
return'';if(!parsedURL.isValid)
return'^'+url.escapeForRegExp()+'$';var name=parsedURL.lastPathComponent;if(name)
name='/'+name;else if(parsedURL.folderPathComponents)
name=parsedURL.folderPathComponents+'/';if(!name)
name=parsedURL.host;if(!name)
return'';var scheme=parsedURL.scheme;var prefix='';if(scheme&&scheme!=='http'&&scheme!=='https'){prefix='^'+scheme+'://';if(scheme==='chrome-extension')
prefix+=parsedURL.host+'\\b';prefix+='.*';}
return prefix+name.escapeForRegExp()+(url.endsWith(name)?'$':'\\b');}};Bindings.blackboxManager;;Bindings.NetworkProjectManager=class{constructor(targetManager,workspace){this._workspace=workspace;targetManager.observeTargets(this);}
targetAdded(target){new Bindings.NetworkProject(target,this._workspace,SDK.ResourceTreeModel.fromTarget(target));}
targetRemoved(target){Bindings.NetworkProject.forTarget(target)._dispose();}};Bindings.NetworkProject=class extends SDK.SDKObject{constructor(target,workspace,resourceTreeModel){super(target);this._workspace=workspace;this._workspaceProjects=new Map();this._resourceTreeModel=resourceTreeModel;target[Bindings.NetworkProject._networkProjectSymbol]=this;this._eventListeners=[];if(resourceTreeModel){this._eventListeners.push(resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.ResourceAdded,this._resourceAdded,this),resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.FrameWillNavigate,this._frameWillNavigate,this),resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.MainFrameNavigated,this._mainFrameNavigated,this));}
var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(debuggerModel){this._eventListeners.push(debuggerModel.addEventListener(SDK.DebuggerModel.Events.ParsedScriptSource,this._parsedScriptSource,this),debuggerModel.addEventListener(SDK.DebuggerModel.Events.FailedToParseScriptSource,this._parsedScriptSource,this));}
var cssModel=SDK.CSSModel.fromTarget(target);if(cssModel){this._eventListeners.push(cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetAdded,this._styleSheetAdded,this),cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetRemoved,this._styleSheetRemoved,this));}
this._eventListeners.push(target.targetManager().addEventListener(SDK.TargetManager.Events.SuspendStateChanged,this._suspendStateChanged,this));}
static projectId(target,frame,isContentScripts){return target.id()+':'+(frame?frame.id:'')+':'+(isContentScripts?'contentscripts':'');}
static forTarget(target){return target[Bindings.NetworkProject._networkProjectSymbol];}
static targetForProject(project){return project[Bindings.NetworkProject._targetSymbol]||null;}
static frameForProject(project){return project[Bindings.NetworkProject._frameSymbol]||null;}
static targetForUISourceCode(uiSourceCode){return uiSourceCode[Bindings.NetworkProject._targetSymbol]||null;}
static uiSourceCodeMimeType(uiSourceCode){if(uiSourceCode[Bindings.NetworkProject._scriptSymbol]||uiSourceCode[Bindings.NetworkProject._styleSheetSymbol])
return uiSourceCode.contentType().canonicalMimeType();var resource=uiSourceCode[Bindings.NetworkProject._resourceSymbol];if(resource)
return resource.mimeType;var mimeType=Common.ResourceType.mimeFromURL(uiSourceCode.url());return mimeType||uiSourceCode.contentType().canonicalMimeType();}
_workspaceProject(frame,isContentScripts){var projectId=Bindings.NetworkProject.projectId(this.target(),frame,isContentScripts);var projectType=isContentScripts?Workspace.projectTypes.ContentScripts:Workspace.projectTypes.Network;var project=this._workspaceProjects.get(projectId);if(project)
return project;project=new Bindings.ContentProviderBasedProject(this._workspace,projectId,projectType,'');project[Bindings.NetworkProject._targetSymbol]=this.target();project[Bindings.NetworkProject._frameSymbol]=frame;this._workspaceProjects.set(projectId,project);return project;}
addFile(contentProvider,frame,isContentScript,contentSize){var uiSourceCode=this._createFile(contentProvider,frame,isContentScript||false);var metadata=typeof contentSize==='number'?new Workspace.UISourceCodeMetadata(null,contentSize):null;this._addUISourceCodeWithProvider(uiSourceCode,contentProvider,metadata);return uiSourceCode;}
_removeFileForURL(frame,url){var project=this._workspaceProjects.get(Bindings.NetworkProject.projectId(this.target(),frame,false));if(!project)
return;project.removeFile(url);}
_populate(){function populateFrame(frame){for(var i=0;i<frame.childFrames.length;++i)
populateFrame.call(this,frame.childFrames[i]);var resources=frame.resources();for(var i=0;i<resources.length;++i)
this._addResource(resources[i]);}
var resourceTreeModel=this._resourceTreeModel;var mainFrame=resourceTreeModel&&resourceTreeModel.mainFrame;if(mainFrame)
populateFrame.call(this,mainFrame);}
_addUISourceCodeWithProvider(uiSourceCode,contentProvider,metadata){(uiSourceCode.project()).addUISourceCodeWithProvider(uiSourceCode,contentProvider,metadata);}
_parsedScriptSource(event){var script=(event.data);if(!script.sourceURL||script.isLiveEdit()||(script.isInlineScript()&&!script.hasSourceURL))
return;if(script.isContentScript()&&!script.hasSourceURL){var parsedURL=new Common.ParsedURL(script.sourceURL);if(!parsedURL.isValid)
return;}
var uiSourceCode=this._createFile(script,SDK.ResourceTreeFrame.fromScript(script),script.isContentScript());uiSourceCode[Bindings.NetworkProject._scriptSymbol]=script;var resource=SDK.ResourceTreeModel.resourceForURL(uiSourceCode.url());this._addUISourceCodeWithProvider(uiSourceCode,script,this._resourceMetadata(resource));}
_styleSheetAdded(event){var header=(event.data);if(header.isInline&&!header.hasSourceURL&&header.origin!=='inspector')
return;var originalContentProvider=header.originalContentProvider();var uiSourceCode=this._createFile(originalContentProvider,SDK.ResourceTreeFrame.fromStyleSheet(header),false);uiSourceCode[Bindings.NetworkProject._styleSheetSymbol]=header;var resource=SDK.ResourceTreeModel.resourceForURL(uiSourceCode.url());this._addUISourceCodeWithProvider(uiSourceCode,originalContentProvider,this._resourceMetadata(resource));}
_styleSheetRemoved(event){var header=(event.data);if(header.isInline&&!header.hasSourceURL&&header.origin!=='inspector')
return;this._removeFileForURL(SDK.ResourceTreeFrame.fromStyleSheet(header),header.resourceURL());}
_resourceAdded(event){var resource=(event.data);this._addResource(resource);}
_addResource(resource){var resourceType=resource.resourceType();if(resourceType!==Common.resourceTypes.Image&&resourceType!==Common.resourceTypes.Font&&resourceType!==Common.resourceTypes.Document&&resourceType!==Common.resourceTypes.Manifest)
return;if(resourceType===Common.resourceTypes.Image&&resource.mimeType&&!resource.mimeType.startsWith('image'))
return;if(resourceType===Common.resourceTypes.Font&&resource.mimeType&&!resource.mimeType.includes('font'))
return;if((resourceType===Common.resourceTypes.Image||resourceType===Common.resourceTypes.Font)&&resource.contentURL().startsWith('data:'))
return;if(this._workspace.uiSourceCodeForURL(resource.url))
return;var uiSourceCode=this._createFile(resource,SDK.ResourceTreeFrame.fromResource(resource),false);uiSourceCode[Bindings.NetworkProject._resourceSymbol]=resource;this._addUISourceCodeWithProvider(uiSourceCode,resource,this._resourceMetadata(resource));}
_frameWillNavigate(event){var frame=(event.data);var project=this._workspaceProject(frame,false);for(var resource of frame.resources())
project.removeUISourceCode(resource.url);project=this._workspaceProject(frame,true);for(var resource of frame.resources())
project.removeUISourceCode(resource.url);}
_mainFrameNavigated(event){this._reset();this._populate();}
_suspendStateChanged(){if(this.target().targetManager().allTargetsSuspended())
this._reset();else
this._populate();}
_createFile(contentProvider,frame,isContentScript){var url=contentProvider.contentURL();var project=this._workspaceProject(frame,isContentScript);var uiSourceCode=project.createUISourceCode(url,contentProvider.contentType());uiSourceCode[Bindings.NetworkProject._targetSymbol]=this.target();return uiSourceCode;}
_resourceMetadata(resource){if(!resource||(typeof resource.contentSize()!=='number'&&!resource.lastModified()))
return null;return new Workspace.UISourceCodeMetadata(resource.lastModified(),resource.contentSize());}
_dispose(){this._reset();Common.EventTarget.removeEventListeners(this._eventListeners);delete this.target()[Bindings.NetworkProject._networkProjectSymbol];}
_reset(){for(var project of this._workspaceProjects.values())
project.removeProject();this._workspaceProjects.clear();}
static uiSourceCodeForScriptURL(workspace,url,script){var target=script.target();var frame=SDK.ResourceTreeFrame.fromScript(script);return workspace.uiSourceCode(Bindings.NetworkProject.projectId(target,frame,false),url)||workspace.uiSourceCode(Bindings.NetworkProject.projectId(target,frame,true),url);}
static uiSourceCodeForStyleURL(workspace,url,header){var frame=SDK.ResourceTreeFrame.fromStyleSheet(header);return workspace.uiSourceCode(Bindings.NetworkProject.projectId(header.target(),frame,false),url);}};Bindings.NetworkProject._networkProjectSymbol=Symbol('networkProject');Bindings.NetworkProject._resourceSymbol=Symbol('resource');Bindings.NetworkProject._scriptSymbol=Symbol('script');Bindings.NetworkProject._styleSheetSymbol=Symbol('styleSheet');Bindings.NetworkProject._targetSymbol=Symbol('target');Bindings.NetworkProject._frameSymbol=Symbol('frame');;Bindings.PresentationConsoleMessageHelper=class{constructor(workspace){this._workspace=workspace;this._pendingConsoleMessages={};this._presentationConsoleMessages=[];SDK.multitargetConsoleModel.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared,this._consoleCleared,this);SDK.multitargetConsoleModel.addEventListener(SDK.ConsoleModel.Events.MessageAdded,this._onConsoleMessageAdded,this);SDK.multitargetConsoleModel.messages().forEach(this._consoleMessageAdded,this);SDK.targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.ParsedScriptSource,this._parsedScriptSource,this);SDK.targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.FailedToParseScriptSource,this._parsedScriptSource,this);SDK.targetManager.addModelListener(SDK.DebuggerModel,SDK.DebuggerModel.Events.GlobalObjectCleared,this._debuggerReset,this);this._locationPool=new Bindings.LiveLocationPool();}
_onConsoleMessageAdded(event){var message=(event.data);this._consoleMessageAdded(message);}
_consoleMessageAdded(message){if(!message.isErrorOrWarning())
return;var rawLocation=this._rawLocation(message);if(rawLocation)
this._addConsoleMessageToScript(message,rawLocation);else
this._addPendingConsoleMessage(message);}
_rawLocation(message){var debuggerModel=SDK.DebuggerModel.fromTarget(message.target());if(!debuggerModel)
return null;if(message.scriptId)
return debuggerModel.createRawLocationByScriptId(message.scriptId,message.line,message.column);var callFrame=message.stackTrace&&message.stackTrace.callFrames?message.stackTrace.callFrames[0]:null;if(callFrame){return debuggerModel.createRawLocationByScriptId(callFrame.scriptId,callFrame.lineNumber,callFrame.columnNumber);}
if(message.url)
return debuggerModel.createRawLocationByURL(message.url,message.line,message.column);return null;}
_addConsoleMessageToScript(message,rawLocation){if(message.source===SDK.ConsoleMessage.MessageSource.Violation)
return;this._presentationConsoleMessages.push(new Bindings.PresentationConsoleMessage(message,rawLocation,this._locationPool));}
_addPendingConsoleMessage(message){if(!message.url)
return;if(!this._pendingConsoleMessages[message.url])
this._pendingConsoleMessages[message.url]=[];this._pendingConsoleMessages[message.url].push(message);}
_parsedScriptSource(event){var script=(event.data);var messages=this._pendingConsoleMessages[script.sourceURL];if(!messages)
return;var pendingMessages=[];for(var i=0;i<messages.length;i++){var message=messages[i];var rawLocation=this._rawLocation(message);if(!rawLocation)
continue;if(script.target()===message.target()&&script.scriptId===rawLocation.scriptId)
this._addConsoleMessageToScript(message,rawLocation);else
pendingMessages.push(message);}
if(pendingMessages.length)
this._pendingConsoleMessages[script.sourceURL]=pendingMessages;else
delete this._pendingConsoleMessages[script.sourceURL];}
_consoleCleared(){this._pendingConsoleMessages={};for(var i=0;i<this._presentationConsoleMessages.length;++i)
this._presentationConsoleMessages[i].dispose();this._presentationConsoleMessages=[];this._locationPool.disposeAll();}
_debuggerReset(){this._consoleCleared();}};Bindings.PresentationConsoleMessage=class{constructor(message,rawLocation,locationPool){this._text=message.messageText;this._level=message.level===SDK.ConsoleMessage.MessageLevel.Error?Workspace.UISourceCode.Message.Level.Error:Workspace.UISourceCode.Message.Level.Warning;Bindings.debuggerWorkspaceBinding.createLiveLocation(rawLocation,this._updateLocation.bind(this),locationPool);}
_updateLocation(liveLocation){if(this._uiMessage)
this._uiMessage.remove();var uiLocation=liveLocation.uiLocation();if(!uiLocation)
return;this._uiMessage=uiLocation.uiSourceCode.addLineMessage(this._level,this._text,uiLocation.lineNumber,uiLocation.columnNumber);}
dispose(){if(this._uiMessage)
this._uiMessage.remove();}};Bindings.presentationConsoleMessageHelper;;Bindings.resourceForURL=function(url){var targets=SDK.targetManager.targets(SDK.Target.Capability.DOM);for(var i=0;i<targets.length;++i){var resource=SDK.ResourceTreeModel.fromTarget(targets[i]).resourceForURL(url);if(resource)
return resource;}
return null;};Bindings.forAllResources=function(callback){var targets=SDK.targetManager.targets(SDK.Target.Capability.DOM);for(var i=0;i<targets.length;++i)
SDK.ResourceTreeModel.fromTarget(targets[i]).forAllResources(callback);};Bindings.displayNameForURL=function(url){if(!url)
return'';var resource=Bindings.resourceForURL(url);if(resource)
return resource.displayName;var uiSourceCode=Workspace.workspace.uiSourceCodeForURL(url);if(uiSourceCode)
return uiSourceCode.displayName();var mainTarget=SDK.targetManager.mainTarget();var inspectedURL=mainTarget&&mainTarget.inspectedURL();if(!inspectedURL)
return url.trimURL('');var parsedURL=inspectedURL.asParsedURL();var lastPathComponent=parsedURL?parsedURL.lastPathComponent:parsedURL;var index=inspectedURL.indexOf(lastPathComponent);if(index!==-1&&index+lastPathComponent.length===inspectedURL.length){var baseURL=inspectedURL.substring(0,index);if(url.startsWith(baseURL))
return url.substring(index);}
if(!parsedURL)
return url;var displayName=url.trimURL(parsedURL.host);return displayName==='/'?parsedURL.host+'/':displayName;};;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;Bindings.TempFile=class{constructor(){this._fileEntry=null;this._writer=null;}
static create(dirPath,name){var file=new Bindings.TempFile();function requestTempFileSystem(){return new Promise(window.requestFileSystem.bind(window,window.TEMPORARY,10));}
function getDirectoryEntry(fs){return new Promise(fs.root.getDirectory.bind(fs.root,dirPath,{create:true}));}
function getFileEntry(dir){return new Promise(dir.getFile.bind(dir,name,{create:true}));}
function createFileWriter(fileEntry){file._fileEntry=fileEntry;return new Promise(fileEntry.createWriter.bind(fileEntry));}
function truncateFile(writer){if(!writer.length){file._writer=writer;return Promise.resolve(file);}
function truncate(fulfill,reject){writer.onwriteend=fulfill;writer.onerror=reject;writer.truncate(0);}
function didTruncate(){file._writer=writer;writer.onwriteend=null;writer.onerror=null;return Promise.resolve(file);}
function onTruncateError(e){writer.onwriteend=null;writer.onerror=null;throw e;}
return new Promise(truncate).then(didTruncate,onTruncateError);}
return Bindings.TempFile.ensureTempStorageCleared().then(requestTempFileSystem).then(getDirectoryEntry).then(getFileEntry).then(createFileWriter).then(truncateFile);}
static ensureTempStorageCleared(){if(!Bindings.TempFile._storageCleanerPromise){Bindings.TempFile._storageCleanerPromise=Services.serviceManager.createAppService('utility_shared_worker','TempStorage',true).then(service=>{if(service)
return service.send('clear');});}
return Bindings.TempFile._storageCleanerPromise;}
write(strings,callback){var blob=new Blob(strings,{type:'text/plain'});this._writer.onerror=function(e){Common.console.error('Failed to write into a temp file: '+e.target.error.message);callback(-1);};this._writer.onwriteend=function(e){callback(e.target.length);};this._writer.write(blob);}
finishWriting(){this._writer=null;}
read(callback){this.readRange(undefined,undefined,callback);}
readRange(startOffset,endOffset,callback){function didGetFile(file){var reader=new FileReader();if(typeof startOffset==='number'||typeof endOffset==='number')
file=file.slice((startOffset),(endOffset));reader.onloadend=function(e){callback((this.result));};reader.onerror=function(error){Common.console.error('Failed to read from temp file: '+error.message);};reader.readAsText(file);}
function didFailToGetFile(error){Common.console.error('Failed to load temp file: '+error.message);callback(null);}
this._fileEntry.file(didGetFile,didFailToGetFile);}
copyToOutputStream(outputStream,delegate){function didGetFile(file){var reader=new Bindings.ChunkedFileReader(file,10*1000*1000,delegate);reader.start(outputStream);}
function didFailToGetFile(error){Common.console.error('Failed to load temp file: '+error.message);outputStream.close();}
this._fileEntry.file(didGetFile,didFailToGetFile);}
remove(){if(this._fileEntry)
this._fileEntry.remove(function(){});}};Bindings.DeferredTempFile=class{constructor(dirPath,name){this._chunks=[];this._tempFile=null;this._isWriting=false;this._finishCallback=null;this._finishedWriting=false;this._callsPendingOpen=[];this._pendingReads=[];Bindings.TempFile.create(dirPath,name).then(this._didCreateTempFile.bind(this),this._failedToCreateTempFile.bind(this));}
write(strings,callback){if(this._finishCallback)
throw new Error('No writes are allowed after close.');this._chunks.push({strings:strings,callback:callback||null});if(this._tempFile&&!this._isWriting)
this._writeNextChunk();}
finishWriting(callback){this._finishCallback=callback;if(this._finishedWriting)
callback(this._tempFile);else if(!this._isWriting&&!this._chunks.length)
this._notifyFinished();}
_failedToCreateTempFile(e){Common.console.error('Failed to create temp file '+e.code+' : '+e.message);this._notifyFinished();}
_didCreateTempFile(tempFile){this._tempFile=tempFile;var callsPendingOpen=this._callsPendingOpen;this._callsPendingOpen=null;for(var i=0;i<callsPendingOpen.length;++i)
callsPendingOpen[i]();if(this._chunks.length)
this._writeNextChunk();}
_writeNextChunk(){if(!this._tempFile)
return;var chunk=this._chunks.shift();this._isWriting=true;this._tempFile.write((chunk.strings),this._didWriteChunk.bind(this,chunk.callback));}
_didWriteChunk(callback,size){this._isWriting=false;if(size===-1){this._tempFile=null;this._notifyFinished();return;}
if(callback)
callback(size);if(this._chunks.length)
this._writeNextChunk();else if(this._finishCallback)
this._notifyFinished();}
_notifyFinished(){this._finishedWriting=true;if(this._tempFile)
this._tempFile.finishWriting();var chunks=this._chunks;this._chunks=[];for(var i=0;i<chunks.length;++i){if(chunks[i].callback)
chunks[i].callback(-1);}
if(this._finishCallback)
this._finishCallback(this._tempFile);var pendingReads=this._pendingReads;this._pendingReads=[];for(var i=0;i<pendingReads.length;++i)
pendingReads[i]();}
readRange(startOffset,endOffset,callback){if(!this._finishedWriting){this._pendingReads.push(this.readRange.bind(this,startOffset,endOffset,callback));return;}
if(!this._tempFile){callback(null);return;}
this._tempFile.readRange(startOffset,endOffset,callback);}
copyToOutputStream(outputStream,delegate){if(!this._finishedWriting){this._pendingReads.push(this.copyToOutputStream.bind(this,outputStream,delegate));return;}
if(this._tempFile)
this._tempFile.copyToOutputStream(outputStream,delegate);}
remove(){if(this._callsPendingOpen){this._callsPendingOpen.push(this.remove.bind(this));return;}
if(this._tempFile)
this._tempFile.remove();this._tempFile=null;}};Bindings.TempFileBackingStorage=class{constructor(dirName){this._dirName=dirName;this.reset();}
appendString(string){this._strings.push(string);this._stringsLength+=string.length;var flushStringLength=10*1024*1024;if(this._stringsLength>flushStringLength)
this._flush(false);}
appendAccessibleString(string){this._flush(false);this._strings.push(string);var chunk=(this._flush(true));function readString(chunk,file){if(chunk.string)
return(Promise.resolve(chunk.string));console.assert(chunk.endOffset);if(!chunk.endOffset)
return Promise.reject('Nor string nor offset to the string in the file were found.');function readRange(fulfill,reject){file.readRange(chunk.startOffset,chunk.endOffset,fulfill);}
return new Promise(readRange);}
return readString.bind(null,chunk,this._file);}
_flush(createChunk){if(!this._strings.length)
return null;var chunk=null;if(createChunk){console.assert(this._strings.length===1);chunk={string:this._strings[0],startOffset:0,endOffset:0};}
function didWrite(chunk,fileSize){if(fileSize===-1)
return;if(chunk){chunk.startOffset=this._fileSize;chunk.endOffset=fileSize;chunk.string=null;}
this._fileSize=fileSize;}
this._file.write(this._strings,didWrite.bind(this,chunk));this._strings=[];this._stringsLength=0;return chunk;}
finishWriting(){this._flush(false);this._file.finishWriting(function(){});}
reset(){if(this._file)
this._file.remove();this._file=new Bindings.DeferredTempFile(this._dirName,String(Date.now()));this._strings=[];this._stringsLength=0;this._fileSize=0;}
writeToStream(outputStream,delegate){this._file.copyToOutputStream(outputStream,delegate);}};Bindings.TempFileBackingStorage.Chunk;;self['Components']=self['Components']||{};Components.BreakpointsSidebarPaneBase=class extends UI.VBox{constructor(){super();this.registerRequiredCSS('components/breakpointsList.css');this.listElement=createElement('ol');this.listElement.className='breakpoint-list';this.emptyElement=createElement('div');this.emptyElement.className='gray-info-message';this.emptyElement.textContent=Common.UIString('No Breakpoints');this.element.appendChild(this.emptyElement);}
addListElement(element,beforeNode){if(beforeNode){this.listElement.insertBefore(element,beforeNode);}else{if(!this.listElement.firstChild){this.element.removeChild(this.emptyElement);this.element.appendChild(this.listElement);}
this.listElement.appendChild(element);}}
removeListElement(element){this.listElement.removeChild(element);if(!this.listElement.firstChild){this.element.removeChild(this.listElement);this.element.appendChild(this.emptyElement);}}
reset(){this.listElement.removeChildren();if(this.listElement.parentElement){this.element.removeChild(this.listElement);this.element.appendChild(this.emptyElement);}}};;Components.CustomPreviewSection=class{constructor(object){this._sectionElement=createElementWithClass('span','custom-expandable-section');this._object=object;this._expanded=false;this._cachedContent=null;var customPreview=object.customPreview();try{var headerJSON=JSON.parse(customPreview.header);}catch(e){Common.console.error('Broken formatter: header is invalid json '+e);return;}
this._header=this._renderJSONMLTag(headerJSON);if(this._header.nodeType===Node.TEXT_NODE){Common.console.error('Broken formatter: header should be an element node.');return;}
if(customPreview.hasBody){this._header.classList.add('custom-expandable-section-header');this._header.addEventListener('click',this._onClick.bind(this),false);this._expandIcon=UI.Icon.create('smallicon-triangle-right','custom-expand-icon');this._header.insertBefore(this._expandIcon,this._header.firstChild);}
this._sectionElement.appendChild(this._header);}
element(){return this._sectionElement;}
_renderJSONMLTag(jsonML){if(!Array.isArray(jsonML))
return createTextNode(jsonML+'');var array=(jsonML);return array[0]==='object'?this._layoutObjectTag(array):this._renderElement(array);}
_renderElement(object){var tagName=object.shift();if(!Components.CustomPreviewSection._tagsWhiteList.has(tagName)){Common.console.error('Broken formatter: element '+tagName+' is not allowed!');return createElement('span');}
var element=createElement((tagName));if((typeof object[0]==='object')&&!Array.isArray(object[0])){var attributes=object.shift();for(var key in attributes){var value=attributes[key];if((key!=='style')||(typeof value!=='string'))
continue;element.setAttribute(key,value);}}
this._appendJsonMLTags(element,object);return element;}
_layoutObjectTag(objectTag){objectTag.shift();var attributes=objectTag.shift();var remoteObject=this._object.target().runtimeModel.createRemoteObject((attributes));if(remoteObject.customPreview())
return(new Components.CustomPreviewSection(remoteObject)).element();var sectionElement=Components.ObjectPropertiesSection.defaultObjectPresentation(remoteObject);sectionElement.classList.toggle('custom-expandable-section-standard-section',remoteObject.hasChildren);return sectionElement;}
_appendJsonMLTags(parentElement,jsonMLTags){for(var i=0;i<jsonMLTags.length;++i)
parentElement.appendChild(this._renderJSONMLTag(jsonMLTags[i]));}
_onClick(event){event.consume(true);if(this._cachedContent)
this._toggleExpand();else
this._loadBody();}
_toggleExpand(){this._expanded=!this._expanded;this._header.classList.toggle('expanded',this._expanded);this._cachedContent.classList.toggle('hidden',!this._expanded);if(this._expanded)
this._expandIcon.setIconType('smallicon-triangle-bottom');else
this._expandIcon.setIconType('smallicon-triangle-right');}
_loadBody(){function load(bindRemoteObject,formatter,config){function substituteObjectTagsInCustomPreview(jsonMLObject){if(!jsonMLObject||(typeof jsonMLObject!=='object')||(typeof jsonMLObject.splice!=='function'))
return;var obj=jsonMLObject.length;if(!(typeof obj==='number'&&obj>>>0===obj&&(obj>0||1/obj>0)))
return;var startIndex=1;if(jsonMLObject[0]==='object'){var attributes=jsonMLObject[1];var originObject=attributes['object'];var config=attributes['config'];if(typeof originObject==='undefined')
throw'Illegal format: obligatory attribute "object" isn\'t specified';jsonMLObject[1]=bindRemoteObject(originObject,config);startIndex=2;}
for(var i=startIndex;i<jsonMLObject.length;++i)
substituteObjectTagsInCustomPreview(jsonMLObject[i]);}
try{var body=formatter.body(this,config);substituteObjectTagsInCustomPreview(body);return body;}catch(e){console.error('Custom Formatter Failed: '+e);return null;}}
var customPreview=this._object.customPreview();var args=[{objectId:customPreview.bindRemoteObjectFunctionId},{objectId:customPreview.formatterObjectId}];if(customPreview.configObjectId)
args.push({objectId:customPreview.configObjectId});this._object.callFunctionJSON(load,args,onBodyLoaded.bind(this));function onBodyLoaded(bodyJsonML){if(!bodyJsonML)
return;this._cachedContent=this._renderJSONMLTag(bodyJsonML);this._sectionElement.appendChild(this._cachedContent);this._toggleExpand();}}};Components.CustomPreviewComponent=class{constructor(object){this._object=object;this._customPreviewSection=new Components.CustomPreviewSection(object);this.element=createElementWithClass('span','source-code');var shadowRoot=UI.createShadowRootWithCoreStyles(this.element,'components/customPreviewSection.css');this.element.addEventListener('contextmenu',this._contextMenuEventFired.bind(this),false);shadowRoot.appendChild(this._customPreviewSection.element());}
expandIfPossible(){if(this._object.customPreview().hasBody&&this._customPreviewSection)
this._customPreviewSection._loadBody();}
_contextMenuEventFired(event){var contextMenu=new UI.ContextMenu(event);if(this._customPreviewSection)
contextMenu.appendItem(Common.UIString.capitalize('Show as Javascript ^object'),this._disassemble.bind(this));contextMenu.appendApplicableItems(this._object);contextMenu.show();}
_disassemble(){this.element.shadowRoot.textContent='';this._customPreviewSection=null;this.element.shadowRoot.appendChild(Components.ObjectPropertiesSection.defaultObjectPresentation(this._object));}};Components.CustomPreviewSection._tagsWhiteList=new Set(['span','div','ol','li','table','tr','td']);;Components.DataSaverInfobar=class extends UI.Infobar{constructor(){super(UI.Infobar.Type.Warning,Common.UIString('Consider disabling Chrome Data Saver while debugging.'),Common.settings.moduleSetting('disableDataSaverInfobar'));var message=this.createDetailsRowMessage();message.createTextChild('More information about  ');message.appendChild(UI.createExternalLink('https://support.google.com/chrome/answer/2392284?hl=en',Common.UIString('Chrome Data Saver')));message.createTextChild('.');}
static maybeShowInPanel(panel){if(Runtime.queryParam('remoteFrontend')){var infobar=new Components.DataSaverInfobar();Components.DataSaverInfobar._infobars.push(infobar);panel.showInfobar(infobar);}}
dispose(){for(var infobar of Components.DataSaverInfobar._infobars)
infobar.dispose();}};Components.DataSaverInfobar._infobars=[];;Components.DOMBreakpointsSidebarPane=class extends Components.BreakpointsSidebarPaneBase{constructor(){super();this._domBreakpointsSetting=Common.settings.createLocalSetting('domBreakpoints',[]);this.listElement.classList.add('dom-breakpoints-list');this._breakpointElements=new Map();SDK.targetManager.addModelListener(SDK.DOMModel,SDK.DOMModel.Events.NodeRemoved,this._nodeRemoved,this);this._update();}
static createBreakpointHitMessage(details){var messageWrapper=createElement('span');var mainElement=messageWrapper.createChild('div','status-main');mainElement.appendChild(UI.Icon.create('smallicon-info','status-icon'));var auxData=(details.auxData);mainElement.appendChild(createTextNode(String.sprintf('Paused on %s',Components.DOMBreakpointsSidebarPane.BreakpointTypeNouns[auxData['type']])));var domModel=SDK.DOMModel.fromTarget(details.target());if(domModel){var subElement=messageWrapper.createChild('div','status-sub monospace');var node=domModel.nodeForId(auxData['nodeId']);var linkifiedNode=Components.DOMPresentationUtils.linkifyNodeReference(node);subElement.appendChild(linkifiedNode);var targetNode=auxData['targetNodeId']?domModel.nodeForId(auxData['targetNodeId']):null;var targetNodeLink=targetNode?Components.DOMPresentationUtils.linkifyNodeReference(targetNode):'';var message;if(auxData.type===Components.DOMBreakpointsSidebarPane.BreakpointTypes.SubtreeModified){if(auxData['insertion'])
message=targetNode===node?'Child %s added':'Descendant %s added';else
message='Descendant %s removed';subElement.appendChild(createElement('br'));subElement.appendChild(UI.formatLocalized(message,[targetNodeLink]));}}
return messageWrapper;}
populateNodeContextMenu(node,contextMenu,createSubMenu){if(node.pseudoType())
return;var nodeBreakpoints=this._nodeBreakpoints(node);function toggleBreakpoint(type){if(!nodeBreakpoints.has(type))
this._setBreakpoint(node,type,true);else
this._removeBreakpoint(node,type);this._saveBreakpoints();}
var breakpointsMenu=createSubMenu?contextMenu.appendSubMenuItem(Common.UIString('Break on...')):contextMenu;for(var key in Components.DOMBreakpointsSidebarPane.BreakpointTypes){var type=Components.DOMBreakpointsSidebarPane.BreakpointTypes[key];var label=Components.DOMBreakpointsSidebarPane.BreakpointTypeNouns[type];breakpointsMenu.appendCheckboxItem(label,toggleBreakpoint.bind(this,type),nodeBreakpoints.has(type));}}
_nodeBreakpoints(node){var nodeBreakpoints=new Set();for(var element of this._breakpointElements.values()){if(element._node===node&&element._checkboxElement.checked)
nodeBreakpoints.add(element._type);}
return nodeBreakpoints;}
hasBreakpoints(node){for(var element of this._breakpointElements.values()){if(element._node===node&&element._checkboxElement.checked)
return true;}
return false;}
_nodeRemoved(event){var node=event.data.node;this._removeBreakpointsForNode(event.data.node);var children=node.children();if(!children)
return;for(var i=0;i<children.length;++i)
this._removeBreakpointsForNode(children[i]);this._saveBreakpoints();}
_removeBreakpointsForNode(node){for(var element of this._breakpointElements.values()){if(element._node===node)
this._removeBreakpoint(element._node,element._type);}}
_setBreakpoint(node,type,enabled){var breakpointId=this._createBreakpointId(node.id,type);var breakpointElement=this._breakpointElements.get(breakpointId);if(!breakpointElement){breakpointElement=this._createBreakpointElement(node,type,enabled);this._breakpointElements.set(breakpointId,breakpointElement);}else{breakpointElement._checkboxElement.checked=enabled;}
if(enabled)
node.target().domdebuggerAgent().setDOMBreakpoint(node.id,type);node.setMarker(Components.DOMBreakpointsSidebarPane.Marker,true);}
_createBreakpointElement(node,type,enabled){var element=createElement('li');element._node=node;element._type=type;element.addEventListener('contextmenu',this._contextMenu.bind(this,node,type),true);var checkboxLabel=createCheckboxLabel('',enabled);var checkboxElement=checkboxLabel.checkboxElement;checkboxElement.addEventListener('click',this._checkboxClicked.bind(this,node,type),false);element._checkboxElement=checkboxElement;element.appendChild(checkboxLabel);var labelElement=createElementWithClass('div','dom-breakpoint');element.appendChild(labelElement);var linkifiedNode=Components.DOMPresentationUtils.linkifyNodeReference(node);linkifiedNode.classList.add('monospace');linkifiedNode.style.display='block';labelElement.appendChild(linkifiedNode);var description=createElement('div');description.textContent=Components.DOMBreakpointsSidebarPane.BreakpointTypeLabels[type];labelElement.appendChild(description);var currentElement=this.listElement.firstChild;while(currentElement){if(currentElement._type&&currentElement._type<element._type)
break;currentElement=currentElement.nextSibling;}
this.addListElement(element,currentElement);return element;}
_removeAllBreakpoints(){for(var element of this._breakpointElements.values())
this._removeBreakpoint(element._node,element._type);this._saveBreakpoints();}
_removeBreakpoint(node,type){var breakpointId=this._createBreakpointId(node.id,type);var element=this._breakpointElements.get(breakpointId);if(!element)
return;this.removeListElement(element);this._breakpointElements.delete(breakpointId);if(element._checkboxElement.checked)
node.target().domdebuggerAgent().removeDOMBreakpoint(node.id,type);node.setMarker(Components.DOMBreakpointsSidebarPane.Marker,this.hasBreakpoints(node)?true:null);}
_contextMenu(node,type,event){var contextMenu=new UI.ContextMenu(event);function removeBreakpoint(){this._removeBreakpoint(node,type);this._saveBreakpoints();}
contextMenu.appendItem(Common.UIString.capitalize('Remove ^breakpoint'),removeBreakpoint.bind(this));contextMenu.appendItem(Common.UIString.capitalize('Remove ^all DOM breakpoints'),this._removeAllBreakpoints.bind(this));contextMenu.show();}
_checkboxClicked(node,type,event){if(event.target.checked)
node.target().domdebuggerAgent().setDOMBreakpoint(node.id,type);else
node.target().domdebuggerAgent().removeDOMBreakpoint(node.id,type);this._saveBreakpoints();}
flavorChanged(object){this._update();}
_update(){var details=UI.context.flavor(SDK.DebuggerPausedDetails);if(!details||details.reason!==SDK.DebuggerModel.BreakReason.DOM){if(this._highlightedElement){this._highlightedElement.classList.remove('breakpoint-hit');delete this._highlightedElement;}
return;}
var auxData=details.auxData;var breakpointId=this._createBreakpointId(auxData.nodeId,auxData.type);var element=this._breakpointElements.get(breakpointId);if(!element)
return;UI.viewManager.showView('sources.domBreakpoints');element.classList.add('breakpoint-hit');this._highlightedElement=element;}
_createBreakpointId(nodeId,type){return nodeId+':'+type;}
_saveBreakpoints(){var breakpoints=[];var storedBreakpoints=this._domBreakpointsSetting.get();for(var i=0;i<storedBreakpoints.length;++i){var breakpoint=storedBreakpoints[i];if(breakpoint.url!==this._inspectedURL)
breakpoints.push(breakpoint);}
for(var element of this._breakpointElements.values()){breakpoints.push({url:this._inspectedURL,path:element._node.path(),type:element._type,enabled:element._checkboxElement.checked});}
this._domBreakpointsSetting.set(breakpoints);}
restoreBreakpoints(domDocument){this._breakpointElements.clear();this.reset();this._inspectedURL=domDocument.documentURL;var domModel=domDocument.domModel();var pathToBreakpoints=new Map();function didPushNodeByPathToFrontend(path,nodeId){var node=nodeId?domModel.nodeForId(nodeId):null;if(!node)
return;var breakpoints=pathToBreakpoints.get(path);for(var i=0;i<breakpoints.length;++i)
this._setBreakpoint(node,breakpoints[i].type,breakpoints[i].enabled);}
var breakpoints=this._domBreakpointsSetting.get();for(var i=0;i<breakpoints.length;++i){var breakpoint=breakpoints[i];if(breakpoint.url!==this._inspectedURL)
continue;var path=breakpoint.path;if(!pathToBreakpoints.has(path)){pathToBreakpoints.set(path,[]);domModel.pushNodeByPathToFrontend(path,didPushNodeByPathToFrontend.bind(this,path));}
pathToBreakpoints.get(path).push(breakpoint);}}};Components.DOMBreakpointsSidebarPane.BreakpointTypes={SubtreeModified:'subtree-modified',AttributeModified:'attribute-modified',NodeRemoved:'node-removed'};Components.DOMBreakpointsSidebarPane.BreakpointTypeLabels={'subtree-modified':Common.UIString('Subtree Modified'),'attribute-modified':Common.UIString('Attribute Modified'),'node-removed':Common.UIString('Node Removed')};Components.DOMBreakpointsSidebarPane.BreakpointTypeNouns={'subtree-modified':Common.UIString('subtree modifications'),'attribute-modified':Common.UIString('attribute modifications'),'node-removed':Common.UIString('node removal')};Components.DOMBreakpointsSidebarPane.Marker='breakpoint-marker';Components.DOMBreakpointsSidebarPane.Proxy=class extends UI.VBox{constructor(){super();this.registerRequiredCSS('components/breakpointsList.css');}
wasShown(){super.wasShown();var pane=Components.domBreakpointsSidebarPane;if(pane.element.parentNode!==this.element)
pane.show(this.element);}};Components.domBreakpointsSidebarPane;;Components.DOMPresentationUtils={};Components.DOMPresentationUtils.decorateNodeLabel=function(node,parentElement){var originalNode=node;var isPseudo=node.nodeType()===Node.ELEMENT_NODE&&node.pseudoType();if(isPseudo&&node.parentNode)
node=node.parentNode;var title=node.nodeNameInCorrectCase();var nameElement=parentElement.createChild('span','node-label-name');nameElement.textContent=title;var idAttribute=node.getAttribute('id');if(idAttribute){var idElement=parentElement.createChild('span','node-label-id');var part='#'+idAttribute;title+=part;idElement.createTextChild(part);nameElement.classList.add('extra');}
var classAttribute=node.getAttribute('class');if(classAttribute){var classes=classAttribute.split(/\s+/);var foundClasses={};if(classes.length){var classesElement=parentElement.createChild('span','extra node-label-class');for(var i=0;i<classes.length;++i){var className=classes[i];if(className&&!(className in foundClasses)){var part='.'+className;title+=part;classesElement.createTextChild(part);foundClasses[className]=true;}}}}
if(isPseudo){var pseudoElement=parentElement.createChild('span','extra node-label-pseudo');var pseudoText='::'+originalNode.pseudoType();pseudoElement.createTextChild(pseudoText);title+=pseudoText;}
parentElement.title=title;};Components.DOMPresentationUtils.createSpansForNodeTitle=function(container,nodeTitle){var match=nodeTitle.match(/([^#.]+)(#[^.]+)?(\..*)?/);container.createChild('span','webkit-html-tag-name').textContent=match[1];if(match[2])
container.createChild('span','webkit-html-attribute-value').textContent=match[2];if(match[3])
container.createChild('span','webkit-html-attribute-name').textContent=match[3];};Components.DOMPresentationUtils.linkifyNodeReference=function(node,idref){if(!node)
return createTextNode(Common.UIString('<node>'));var root=createElementWithClass('span','monospace');var shadowRoot=UI.createShadowRootWithCoreStyles(root,'components/domUtils.css');var link=shadowRoot.createChild('div','node-link');if(idref)
link.createChild('span','node-label-id').createTextChild('#'+idref);else
Components.DOMPresentationUtils.decorateNodeLabel(node,link);link.addEventListener('click',Common.Revealer.reveal.bind(Common.Revealer,node,undefined),false);link.addEventListener('mouseover',node.highlight.bind(node,undefined,undefined),false);link.addEventListener('mouseleave',SDK.DOMModel.hideDOMNodeHighlight.bind(SDK.DOMModel),false);return root;};Components.DOMPresentationUtils.linkifyDeferredNodeReference=function(deferredNode){var root=createElement('div');var shadowRoot=UI.createShadowRootWithCoreStyles(root,'components/domUtils.css');var link=shadowRoot.createChild('div','node-link');link.createChild('content');link.addEventListener('click',deferredNode.resolve.bind(deferredNode,onDeferredNodeResolved),false);link.addEventListener('mousedown',(e)=>e.consume(),false);function onDeferredNodeResolved(node){Common.Revealer.reveal(node);}
return root;};Components.DOMPresentationUtils.buildImagePreviewContents=function(target,originalImageURL,showDimensions,userCallback,precomputedFeatures){var resourceTreeModel=SDK.ResourceTreeModel.fromTarget(target);if(!resourceTreeModel){userCallback();return;}
var resource=resourceTreeModel.resourceForURL(originalImageURL);var imageURL=originalImageURL;if(!isImageResource(resource)&&precomputedFeatures&&precomputedFeatures.currentSrc){imageURL=precomputedFeatures.currentSrc;resource=resourceTreeModel.resourceForURL(imageURL);}
if(!isImageResource(resource)){userCallback();return;}
var imageElement=createElement('img');imageElement.addEventListener('load',buildContent,false);imageElement.addEventListener('error',errorCallback,false);resource.populateImageSource(imageElement);function errorCallback(){userCallback();}
function isImageResource(resource){return!!resource&&resource.resourceType()===Common.resourceTypes.Image;}
function buildContent(){var container=createElement('table');container.className='image-preview-container';var naturalWidth=precomputedFeatures?precomputedFeatures.naturalWidth:imageElement.naturalWidth;var naturalHeight=precomputedFeatures?precomputedFeatures.naturalHeight:imageElement.naturalHeight;var offsetWidth=precomputedFeatures?precomputedFeatures.offsetWidth:naturalWidth;var offsetHeight=precomputedFeatures?precomputedFeatures.offsetHeight:naturalHeight;var description;if(showDimensions){if(offsetHeight===naturalHeight&&offsetWidth===naturalWidth){description=Common.UIString('%d \xd7 %d pixels',offsetWidth,offsetHeight);}else{description=Common.UIString('%d \xd7 %d pixels (Natural: %d \xd7 %d pixels)',offsetWidth,offsetHeight,naturalWidth,naturalHeight);}}
container.createChild('tr').createChild('td','image-container').appendChild(imageElement);if(description)
container.createChild('tr').createChild('td').createChild('span','description').textContent=description;if(imageURL!==originalImageURL){container.createChild('tr').createChild('td').createChild('span','description').textContent=String.sprintf('currentSrc: %s',imageURL.trimMiddle(100));}
userCallback(container);}};Components.DOMPresentationUtils.buildStackTracePreviewContents=function(target,linkifier,stackTrace){var element=createElement('span');element.style.display='inline-block';var shadowRoot=UI.createShadowRootWithCoreStyles(element,'components/domUtils.css');var contentElement=shadowRoot.createChild('table','stack-preview-container');function appendStackTrace(stackTrace){for(var stackFrame of stackTrace.callFrames){var row=createElement('tr');row.createChild('td').textContent='\n';row.createChild('td','function-name').textContent=UI.beautifyFunctionName(stackFrame.functionName);var link=linkifier.maybeLinkifyConsoleCallFrame(target,stackFrame);if(link){row.createChild('td').textContent=' @ ';row.createChild('td').appendChild(link);}
contentElement.appendChild(row);}}
if(!stackTrace)
return element;appendStackTrace(stackTrace);var asyncStackTrace=stackTrace.parent;while(asyncStackTrace){if(!asyncStackTrace.callFrames.length){asyncStackTrace=asyncStackTrace.parent;continue;}
var row=contentElement.createChild('tr');row.createChild('td').textContent='\n';row.createChild('td','stack-preview-async-description').textContent=UI.asyncStackTraceLabel(asyncStackTrace.description);row.createChild('td');row.createChild('td');appendStackTrace(asyncStackTrace);asyncStackTrace=asyncStackTrace.parent;}
return element;};Components.DOMPresentationUtils.fullQualifiedSelector=function(node,justSelector){if(node.nodeType()!==Node.ELEMENT_NODE)
return node.localName()||node.nodeName().toLowerCase();return Components.DOMPresentationUtils.cssPath(node,justSelector);};Components.DOMPresentationUtils.simpleSelector=function(node){var lowerCaseName=node.localName()||node.nodeName().toLowerCase();if(node.nodeType()!==Node.ELEMENT_NODE)
return lowerCaseName;if(lowerCaseName==='input'&&node.getAttribute('type')&&!node.getAttribute('id')&&!node.getAttribute('class'))
return lowerCaseName+'[type="'+node.getAttribute('type')+'"]';if(node.getAttribute('id'))
return lowerCaseName+'#'+node.getAttribute('id');if(node.getAttribute('class')){return(lowerCaseName==='div'?'':lowerCaseName)+'.'+
node.getAttribute('class').trim().replace(/\s+/g,'.');}
return lowerCaseName;};Components.DOMPresentationUtils.cssPath=function(node,optimized){if(node.nodeType()!==Node.ELEMENT_NODE)
return'';var steps=[];var contextNode=node;while(contextNode){var step=Components.DOMPresentationUtils._cssPathStep(contextNode,!!optimized,contextNode===node);if(!step)
break;steps.push(step);if(step.optimized)
break;contextNode=contextNode.parentNode;}
steps.reverse();return steps.join(' > ');};Components.DOMPresentationUtils._cssPathStep=function(node,optimized,isTargetNode){if(node.nodeType()!==Node.ELEMENT_NODE)
return null;var id=node.getAttribute('id');if(optimized){if(id)
return new Components.DOMNodePathStep(idSelector(id),true);var nodeNameLower=node.nodeName().toLowerCase();if(nodeNameLower==='body'||nodeNameLower==='head'||nodeNameLower==='html')
return new Components.DOMNodePathStep(node.nodeNameInCorrectCase(),true);}
var nodeName=node.nodeNameInCorrectCase();if(id)
return new Components.DOMNodePathStep(nodeName+idSelector(id),true);var parent=node.parentNode;if(!parent||parent.nodeType()===Node.DOCUMENT_NODE)
return new Components.DOMNodePathStep(nodeName,true);function prefixedElementClassNames(node){var classAttribute=node.getAttribute('class');if(!classAttribute)
return[];return classAttribute.split(/\s+/g).filter(Boolean).map(function(name){return'$'+name;});}
function idSelector(id){return'#'+escapeIdentifierIfNeeded(id);}
function escapeIdentifierIfNeeded(ident){if(isCSSIdentifier(ident))
return ident;var shouldEscapeFirst=/^(?:[0-9]|-[0-9-]?)/.test(ident);var lastIndex=ident.length-1;return ident.replace(/./g,function(c,i){return((shouldEscapeFirst&&i===0)||!isCSSIdentChar(c))?escapeAsciiChar(c,i===lastIndex):c;});}
function escapeAsciiChar(c,isLast){return'\\'+toHexByte(c)+(isLast?'':' ');}
function toHexByte(c){var hexByte=c.charCodeAt(0).toString(16);if(hexByte.length===1)
hexByte='0'+hexByte;return hexByte;}
function isCSSIdentChar(c){if(/[a-zA-Z0-9_-]/.test(c))
return true;return c.charCodeAt(0)>=0xA0;}
function isCSSIdentifier(value){return/^-?[a-zA-Z_][a-zA-Z0-9_-]*$/.test(value);}
var prefixedOwnClassNamesArray=prefixedElementClassNames(node);var needsClassNames=false;var needsNthChild=false;var ownIndex=-1;var elementIndex=-1;var siblings=parent.children();for(var i=0;(ownIndex===-1||!needsNthChild)&&i<siblings.length;++i){var sibling=siblings[i];if(sibling.nodeType()!==Node.ELEMENT_NODE)
continue;elementIndex+=1;if(sibling===node){ownIndex=elementIndex;continue;}
if(needsNthChild)
continue;if(sibling.nodeNameInCorrectCase()!==nodeName)
continue;needsClassNames=true;var ownClassNames=new Set(prefixedOwnClassNamesArray);if(!ownClassNames.size){needsNthChild=true;continue;}
var siblingClassNamesArray=prefixedElementClassNames(sibling);for(var j=0;j<siblingClassNamesArray.length;++j){var siblingClass=siblingClassNamesArray[j];if(!ownClassNames.has(siblingClass))
continue;ownClassNames.delete(siblingClass);if(!ownClassNames.size){needsNthChild=true;break;}}}
var result=nodeName;if(isTargetNode&&nodeName.toLowerCase()==='input'&&node.getAttribute('type')&&!node.getAttribute('id')&&!node.getAttribute('class'))
result+='[type="'+node.getAttribute('type')+'"]';if(needsNthChild){result+=':nth-child('+(ownIndex+1)+')';}else if(needsClassNames){for(var prefixedName of prefixedOwnClassNamesArray)
result+='.'+escapeIdentifierIfNeeded(prefixedName.substr(1));}
return new Components.DOMNodePathStep(result,false);};Components.DOMPresentationUtils.xPath=function(node,optimized){if(node.nodeType()===Node.DOCUMENT_NODE)
return'/';var steps=[];var contextNode=node;while(contextNode){var step=Components.DOMPresentationUtils._xPathValue(contextNode,optimized);if(!step)
break;steps.push(step);if(step.optimized)
break;contextNode=contextNode.parentNode;}
steps.reverse();return(steps.length&&steps[0].optimized?'':'/')+steps.join('/');};Components.DOMPresentationUtils._xPathValue=function(node,optimized){var ownValue;var ownIndex=Components.DOMPresentationUtils._xPathIndex(node);if(ownIndex===-1)
return null;switch(node.nodeType()){case Node.ELEMENT_NODE:if(optimized&&node.getAttribute('id'))
return new Components.DOMNodePathStep('//*[@id="'+node.getAttribute('id')+'"]',true);ownValue=node.localName();break;case Node.ATTRIBUTE_NODE:ownValue='@'+node.nodeName();break;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:ownValue='text()';break;case Node.PROCESSING_INSTRUCTION_NODE:ownValue='processing-instruction()';break;case Node.COMMENT_NODE:ownValue='comment()';break;case Node.DOCUMENT_NODE:ownValue='';break;default:ownValue='';break;}
if(ownIndex>0)
ownValue+='['+ownIndex+']';return new Components.DOMNodePathStep(ownValue,node.nodeType()===Node.DOCUMENT_NODE);};Components.DOMPresentationUtils._xPathIndex=function(node){function areNodesSimilar(left,right){if(left===right)
return true;if(left.nodeType()===Node.ELEMENT_NODE&&right.nodeType()===Node.ELEMENT_NODE)
return left.localName()===right.localName();if(left.nodeType()===right.nodeType())
return true;var leftType=left.nodeType()===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:left.nodeType();var rightType=right.nodeType()===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:right.nodeType();return leftType===rightType;}
var siblings=node.parentNode?node.parentNode.children():null;if(!siblings)
return 0;var hasSameNamedElements;for(var i=0;i<siblings.length;++i){if(areNodesSimilar(node,siblings[i])&&siblings[i]!==node){hasSameNamedElements=true;break;}}
if(!hasSameNamedElements)
return 0;var ownIndex=1;for(var i=0;i<siblings.length;++i){if(areNodesSimilar(node,siblings[i])){if(siblings[i]===node)
return ownIndex;++ownIndex;}}
return-1;};Components.DOMNodePathStep=class{constructor(value,optimized){this.value=value;this.optimized=optimized||false;}
toString(){return this.value;}};Components.DOMPresentationUtils.MarkerDecorator=function(){};Components.DOMPresentationUtils.MarkerDecorator.prototype={decorate:function(node){}};Components.DOMPresentationUtils.GenericDecorator=class{constructor(extension){this._title=Common.UIString(extension.title());this._color=extension.descriptor()['color'];}
decorate(node){return{title:this._title,color:this._color};}};;Components.DockController=class extends Common.Object{constructor(canDock){super();this._canDock=canDock;this._closeButton=new UI.ToolbarButton(Common.UIString('Close'),'largeicon-delete');this._closeButton.addEventListener('click',InspectorFrontendHost.closeWindow.bind(InspectorFrontendHost));if(!canDock){this._dockSide=Components.DockController.State.Undocked;this._updateUI();return;}
this._states=[Components.DockController.State.DockedToRight,Components.DockController.State.DockedToBottom,Components.DockController.State.Undocked];this._currentDockStateSetting=Common.settings.moduleSetting('currentDockState');this._currentDockStateSetting.addChangeListener(this._dockSideChanged,this);this._lastDockStateSetting=Common.settings.createSetting('lastDockState','bottom');if(this._states.indexOf(this._currentDockStateSetting.get())===-1)
this._currentDockStateSetting.set('right');if(this._states.indexOf(this._lastDockStateSetting.get())===-1)
this._currentDockStateSetting.set('bottom');}
initialize(){if(!this._canDock)
return;this._titles=[Common.UIString('Dock to right'),Common.UIString('Dock to bottom'),Common.UIString('Undock into separate window')];this._dockSideChanged();}
_dockSideChanged(){this.setDockSide(this._currentDockStateSetting.get());}
dockSide(){return this._dockSide;}
canDock(){return this._canDock;}
isVertical(){return this._dockSide===Components.DockController.State.DockedToRight;}
setDockSide(dockSide){if(this._states.indexOf(dockSide)===-1)
dockSide=this._states[0];if(this._dockSide===dockSide)
return;if(this._dockSide)
this._lastDockStateSetting.set(this._dockSide);this._savedFocus=document.deepActiveElement();var eventData={from:this._dockSide,to:dockSide};this.dispatchEventToListeners(Components.DockController.Events.BeforeDockSideChanged,eventData);console.timeStamp('DockController.setIsDocked');this._dockSide=dockSide;this._currentDockStateSetting.set(dockSide);InspectorFrontendHost.setIsDocked(dockSide!==Components.DockController.State.Undocked,this._setIsDockedResponse.bind(this,eventData));this._updateUI();this.dispatchEventToListeners(Components.DockController.Events.DockSideChanged,eventData);}
_setIsDockedResponse(eventData){this.dispatchEventToListeners(Components.DockController.Events.AfterDockSideChanged,eventData);if(this._savedFocus){this._savedFocus.focus();this._savedFocus=null;}}
_updateUI(){var body=document.body;switch(this._dockSide){case Components.DockController.State.DockedToBottom:body.classList.remove('undocked');body.classList.remove('dock-to-right');body.classList.add('dock-to-bottom');break;case Components.DockController.State.DockedToRight:body.classList.remove('undocked');body.classList.add('dock-to-right');body.classList.remove('dock-to-bottom');break;case Components.DockController.State.Undocked:body.classList.add('undocked');body.classList.remove('dock-to-right');body.classList.remove('dock-to-bottom');break;}
this._closeButton.setVisible(this._dockSide!==Components.DockController.State.Undocked);}
_toggleDockSide(){if(this._lastDockStateSetting.get()===this._currentDockStateSetting.get()){var index=this._states.indexOf(this._currentDockStateSetting.get())||0;this._lastDockStateSetting.set(this._states[(index+1)%this._states.length]);}
this.setDockSide(this._lastDockStateSetting.get());}};Components.DockController.State={DockedToBottom:'bottom',DockedToRight:'right',Undocked:'undocked'};Components.DockController.Events={BeforeDockSideChanged:Symbol('BeforeDockSideChanged'),DockSideChanged:Symbol('DockSideChanged'),AfterDockSideChanged:Symbol('AfterDockSideChanged')};Components.DockController.ToggleDockActionDelegate=class{handleAction(context,actionId){Components.dockController._toggleDockSide();return true;}};Components.DockController.CloseButtonProvider=class{item(){return Components.dockController._closeButton;}};Components.dockController;;Components.ExecutionContextSelector=class{constructor(targetManager,context){targetManager.observeTargets(this,SDK.Target.Capability.JS);context.addFlavorChangeListener(SDK.ExecutionContext,this._executionContextChanged,this);context.addFlavorChangeListener(SDK.Target,this._targetChanged,this);targetManager.addModelListener(SDK.RuntimeModel,SDK.RuntimeModel.Events.ExecutionContextCreated,this._onExecutionContextCreated,this);targetManager.addModelListener(SDK.RuntimeModel,SDK.RuntimeModel.Events.ExecutionContextDestroyed,this._onExecutionContextDestroyed,this);targetManager.addModelListener(SDK.RuntimeModel,SDK.RuntimeModel.Events.ExecutionContextOrderChanged,this._onExecutionContextOrderChanged,this);this._targetManager=targetManager;this._context=context;}
targetAdded(target){setImmediate(deferred.bind(this));function deferred(){if(!this._context.flavor(SDK.Target))
this._context.setFlavor(SDK.Target,target);}}
targetRemoved(target){var currentExecutionContext=this._context.flavor(SDK.ExecutionContext);if(currentExecutionContext&&currentExecutionContext.target()===target)
this._currentExecutionContextGone();var targets=this._targetManager.targets(SDK.Target.Capability.JS);if(this._context.flavor(SDK.Target)===target&&targets.length)
this._context.setFlavor(SDK.Target,targets[0]);}
_executionContextChanged(event){var newContext=(event.data);if(newContext){this._context.setFlavor(SDK.Target,newContext.target());if(!this._ignoreContextChanged)
this._lastSelectedContextId=this._contextPersistentId(newContext);}}
_contextPersistentId(executionContext){return executionContext.isDefault?executionContext.target().name()+':'+executionContext.frameId:'';}
_targetChanged(event){var newTarget=(event.data);var currentContext=this._context.flavor(SDK.ExecutionContext);if(!newTarget||(currentContext&&currentContext.target()===newTarget))
return;var executionContexts=newTarget.runtimeModel.executionContexts();if(!executionContexts.length)
return;var newContext=null;for(var i=0;i<executionContexts.length&&!newContext;++i){if(this._shouldSwitchToContext(executionContexts[i]))
newContext=executionContexts[i];}
for(var i=0;i<executionContexts.length&&!newContext;++i){if(this._isDefaultContext(executionContexts[i]))
newContext=executionContexts[i];}
this._ignoreContextChanged=true;this._context.setFlavor(SDK.ExecutionContext,newContext||executionContexts[0]);this._ignoreContextChanged=false;}
_shouldSwitchToContext(executionContext){if(this._lastSelectedContextId&&this._lastSelectedContextId===this._contextPersistentId(executionContext))
return true;if(!this._lastSelectedContextId&&this._isDefaultContext(executionContext))
return true;return false;}
_isDefaultContext(executionContext){if(!executionContext.isDefault||!executionContext.frameId)
return false;if(executionContext.target().parentTarget())
return false;var resourceTreeModel=SDK.ResourceTreeModel.fromTarget(executionContext.target());var frame=resourceTreeModel&&resourceTreeModel.frameForId(executionContext.frameId);if(frame&&frame.isMainFrame())
return true;return false;}
_onExecutionContextCreated(event){this._switchContextIfNecessary((event.data));}
_onExecutionContextDestroyed(event){var executionContext=(event.data);if(this._context.flavor(SDK.ExecutionContext)===executionContext)
this._currentExecutionContextGone();}
_onExecutionContextOrderChanged(event){var runtimeModel=(event.data);var executionContexts=runtimeModel.executionContexts();for(var i=0;i<executionContexts.length;i++){if(this._switchContextIfNecessary(executionContexts[i]))
break;}}
_switchContextIfNecessary(executionContext){if(!this._context.flavor(SDK.ExecutionContext)||this._shouldSwitchToContext(executionContext)){this._ignoreContextChanged=true;this._context.setFlavor(SDK.ExecutionContext,executionContext);this._ignoreContextChanged=false;return true;}
return false;}
_currentExecutionContextGone(){var targets=this._targetManager.targets(SDK.Target.Capability.JS);var newContext=null;for(var i=0;i<targets.length&&!newContext;++i){var executionContexts=targets[i].runtimeModel.executionContexts();for(var executionContext of executionContexts){if(this._isDefaultContext(executionContext)){newContext=executionContext;break;}}}
if(!newContext){for(var i=0;i<targets.length&&!newContext;++i){var executionContexts=targets[i].runtimeModel.executionContexts();if(executionContexts.length){newContext=executionContexts[0];break;}}}
this._ignoreContextChanged=true;this._context.setFlavor(SDK.ExecutionContext,newContext);this._ignoreContextChanged=false;}};;Components.HandlerRegistry=class extends Common.Object{constructor(setting){super();this._handlers={};this._setting=setting;this._activeHandler=this._setting.get();}
get handlerNames(){return Object.getOwnPropertyNames(this._handlers);}
get activeHandler(){return this._activeHandler;}
set activeHandler(value){this._activeHandler=value;this._setting.set(value);}
dispatch(data){return this.dispatchToHandler(this._activeHandler,data);}
dispatchToHandler(name,data){var handler=this._handlers[name];var result=handler&&handler(data);return!!result;}
registerHandler(name,handler){this._handlers[name]=handler;this.dispatchEventToListeners(Components.HandlerRegistry.Events.HandlersUpdated);}
unregisterHandler(name){delete this._handlers[name];this.dispatchEventToListeners(Components.HandlerRegistry.Events.HandlersUpdated);}
_openInNewTab(url){InspectorFrontendHost.openInNewTab(url);}
_appendContentProviderItems(contextMenu,target){if(!(target instanceof Workspace.UISourceCode||target instanceof SDK.Resource||target instanceof SDK.NetworkRequest))
return;var contentProvider=(target);if(!contentProvider.contentURL())
return;contextMenu.appendItem(UI.openLinkExternallyLabel(),this._openInNewTab.bind(this,contentProvider.contentURL()));for(var i=1;i<this.handlerNames.length;++i){var handler=this.handlerNames[i];contextMenu.appendItem(Common.UIString.capitalize('Open ^using %s',handler),this.dispatchToHandler.bind(this,handler,{url:contentProvider.contentURL()}));}
if(!contentProvider.contentURL()||contentProvider instanceof SDK.NetworkRequest)
return;contextMenu.appendItem(UI.copyLinkAddressLabel(),InspectorFrontendHost.copyText.bind(InspectorFrontendHost,contentProvider.contentURL()));if(!contentProvider.contentType().isDocumentOrScriptOrStyleSheet())
return;function doSave(forceSaveAs,content){var url=contentProvider.contentURL();Workspace.fileManager.save(url,(content),forceSaveAs);Workspace.fileManager.close(url);}
function save(forceSaveAs){if(contentProvider instanceof Workspace.UISourceCode){var uiSourceCode=(contentProvider);if(forceSaveAs)
uiSourceCode.saveAs();else
uiSourceCode.commitWorkingCopy();return;}
contentProvider.requestContent().then(doSave.bind(null,forceSaveAs));}
contextMenu.appendSeparator();contextMenu.appendItem(Common.UIString('Save'),save.bind(null,false));if(contentProvider instanceof Workspace.UISourceCode){var uiSourceCode=(contentProvider);if(uiSourceCode.project().type()!==Workspace.projectTypes.FileSystem&&uiSourceCode.project().type()!==Workspace.projectTypes.Snippets)
contextMenu.appendItem(Common.UIString.capitalize('Save ^as...'),save.bind(null,true));}}
_appendHrefItems(contextMenu,target){if(!(target instanceof Node))
return;var targetNode=(target);var anchorElement=targetNode.enclosingNodeOrSelfWithClass('webkit-html-resource-link')||targetNode.enclosingNodeOrSelfWithClass('webkit-html-external-link');if(!anchorElement)
return;var uiLocation=Components.Linkifier.uiLocationByAnchor(anchorElement);var resourceURL=uiLocation?uiLocation.uiSourceCode.contentURL():anchorElement.href;var uiSourceCode=uiLocation?uiLocation.uiSourceCode:(resourceURL?Workspace.workspace.uiSourceCodeForURL(resourceURL):null);function open(){Common.Revealer.reveal(uiSourceCode);}
if(uiSourceCode)
contextMenu.appendItem('Open',open);if(!resourceURL)
return;contextMenu.appendItem(UI.openLinkExternallyLabel(),this._openInNewTab.bind(this,resourceURL));function openInResourcesPanel(resourceURL){var resource=Bindings.resourceForURL(resourceURL);if(resource)
Common.Revealer.reveal(resource);else
InspectorFrontendHost.openInNewTab(resourceURL);}
if(!targetNode.enclosingNodeOrSelfWithClassList(['resources','panel'])&&Bindings.resourceForURL(resourceURL)){contextMenu.appendItem(Common.UIString.capitalize('Open ^link in Application ^panel'),openInResourcesPanel.bind(null,resourceURL));}
contextMenu.appendItem(UI.copyLinkAddressLabel(),InspectorFrontendHost.copyText.bind(InspectorFrontendHost,resourceURL));}};Components.HandlerRegistry.Events={HandlersUpdated:Symbol('HandlersUpdated')};Components.HandlerSelector=class{constructor(handlerRegistry){this._handlerRegistry=handlerRegistry;this.element=createElementWithClass('select','chrome-select');this.element.addEventListener('change',this._onChange.bind(this),false);this._update();this._handlerRegistry.addEventListener(Components.HandlerRegistry.Events.HandlersUpdated,this._update.bind(this));}
_update(){this.element.removeChildren();var names=this._handlerRegistry.handlerNames;var activeHandler=this._handlerRegistry.activeHandler;for(var i=0;i<names.length;++i){var option=createElement('option');option.textContent=names[i];option.selected=activeHandler===names[i];this.element.appendChild(option);}
this.element.disabled=names.length<=1;}
_onChange(event){var value=event.target.value;this._handlerRegistry.activeHandler=value;}};Components.HandlerRegistry.ContextMenuProvider=class{appendApplicableItems(event,contextMenu,target){Components.openAnchorLocationRegistry._appendContentProviderItems(contextMenu,target);Components.openAnchorLocationRegistry._appendHrefItems(contextMenu,target);}};Components.HandlerRegistry.LinkHandler=class{handleLink(url,lineNumber){return Components.openAnchorLocationRegistry.dispatch({url:url,lineNumber:lineNumber});}};Components.HandlerRegistry.OpenAnchorLocationSettingUI=class{settingElement(){if(!Components.openAnchorLocationRegistry.handlerNames.length)
return null;var handlerSelector=new Components.HandlerSelector(Components.openAnchorLocationRegistry);return UI.SettingsUI.createCustomSetting(Common.UIString('Link handling:'),handlerSelector.element);}};Components.openAnchorLocationRegistry;;Components.JavaScriptAutocomplete={};Components.JavaScriptAutocomplete.completionsForTextInCurrentContext=function(text,query,force){var index;var stopChars=new Set(' =:({;,!+-*/&|^<>`'.split(''));for(index=text.length-1;index>=0;index--){if(stopChars.has(text.charAt(index)))
break;}
var clippedExpression=text.substring(index+1);var bracketCount=0;index=clippedExpression.length-1;while(index>=0){var character=clippedExpression.charAt(index);if(character===']')
bracketCount++;if(character==='['&&index<clippedExpression.length-1){bracketCount--;if(bracketCount<0)
break;}
index--;}
clippedExpression=clippedExpression.substring(index+1);return Components.JavaScriptAutocomplete.completionsForExpression(clippedExpression,query,force);};Components.JavaScriptAutocomplete.completionsForExpression=function(expressionString,query,force){var executionContext=UI.context.flavor(SDK.ExecutionContext);if(!executionContext)
return Promise.resolve([]);var lastIndex=expressionString.length-1;var dotNotation=(expressionString[lastIndex]==='.');var bracketNotation=(expressionString[lastIndex]==='[');if(dotNotation||bracketNotation)
expressionString=expressionString.substr(0,lastIndex);else
expressionString='';if((expressionString&&!isNaN(expressionString))||(!expressionString&&query&&!isNaN(query)))
return Promise.resolve([]);if(!query&&!expressionString&&!force)
return Promise.resolve([]);var fufill;var promise=new Promise(x=>fufill=x);if(!expressionString&&executionContext.debuggerModel.selectedCallFrame())
executionContext.debuggerModel.selectedCallFrame().variableNames(receivedPropertyNames);else
executionContext.evaluate(expressionString,'completion',true,true,false,false,false,evaluated);return promise;function evaluated(result,exceptionDetails){if(!result||!!exceptionDetails){fufill([]);return;}
function extractTarget(object){if(!object)
return Promise.resolve((null));if(object.type!=='object'||object.subtype!=='proxy')
return Promise.resolve((object));return object.getOwnPropertiesPromise().then(extractTargetFromProperties).then(extractTarget);}
function extractTargetFromProperties(properties){var internalProperties=properties.internalProperties||[];var target=internalProperties.find(property=>property.name==='[[Target]]');return target?target.value:null;}
function getCompletions(type){var object;if(type==='string')
object=new String('');else if(type==='number')
object=new Number(0);else if(type==='boolean')
object=new Boolean(false);else
object=this;var resultSet={__proto__:null};try{for(var o=object;o;o=Object.getPrototypeOf(o)){if((type==='array'||type==='typedarray')&&o===object&&ArrayBuffer.isView(o)&&o.length>9999)
continue;var names=Object.getOwnPropertyNames(o);var isArray=Array.isArray(o);for(var i=0;i<names.length;++i){if(isArray&&/^[0-9]/.test(names[i]))
continue;resultSet[names[i]]=true;}}}catch(e){}
return resultSet;}
function completionsForObject(object){if(!object){receivedPropertyNames(null);}else if(object.type==='object'||object.type==='function'){object.callFunctionJSON(getCompletions,[SDK.RemoteObject.toCallArgument(object.subtype)],receivedPropertyNames);}else if(object.type==='string'||object.type==='number'||object.type==='boolean'){executionContext.evaluate('('+getCompletions+')("'+result.type+'")','completion',false,true,true,false,false,receivedPropertyNamesFromEval);}}
extractTarget(result).then(completionsForObject);}
function receivedPropertyNamesFromEval(result,exceptionDetails){executionContext.target().runtimeAgent().releaseObjectGroup('completion');if(result&&!exceptionDetails)
receivedPropertyNames((result.value));else
fufill([]);}
function receivedPropertyNames(propertyNames){executionContext.target().runtimeAgent().releaseObjectGroup('completion');if(!propertyNames){fufill([]);return;}
var includeCommandLineAPI=(!dotNotation&&!bracketNotation);if(includeCommandLineAPI){const commandLineAPI=['dir','dirxml','keys','values','profile','profileEnd','monitorEvents','unmonitorEvents','inspect','copy','clear','getEventListeners','debug','undebug','monitor','unmonitor','table','$','$$','$x'];for(var i=0;i<commandLineAPI.length;++i)
propertyNames[commandLineAPI[i]]=true;}
fufill(Components.JavaScriptAutocomplete._completionsForQuery(dotNotation,bracketNotation,expressionString,query,Object.keys(propertyNames)));}};Components.JavaScriptAutocomplete._completionsForQuery=function(dotNotation,bracketNotation,expressionString,query,properties){if(bracketNotation){if(query.length&&query[0]==='\'')
var quoteUsed='\'';else
var quoteUsed='"';}
if(!expressionString){const keywords=['break','case','catch','continue','default','delete','do','else','finally','for','function','if','in','instanceof','new','return','switch','this','throw','try','typeof','var','void','while','with'];properties=properties.concat(keywords);}
properties.sort();var caseSensitivePrefix=[];var caseInsensitivePrefix=[];var caseSensitiveAnywhere=[];var caseInsensitiveAnywhere=[];for(var i=0;i<properties.length;++i){var property=properties[i];if(dotNotation&&!/^[a-zA-Z_$\u008F-\uFFFF][a-zA-Z0-9_$\u008F-\uFFFF]*$/.test(property))
continue;if(bracketNotation){if(!/^[0-9]+$/.test(property))
property=quoteUsed+property.escapeCharacters(quoteUsed+'\\')+quoteUsed;property+=']';}
if(property.length<query.length)
continue;if(query.length&&property.toLowerCase().indexOf(query.toLowerCase())===-1)
continue;var prop=property.split('\n').join('\\n');if(property.startsWith(query))
caseSensitivePrefix.push(prop);else if(property.toLowerCase().startsWith(query.toLowerCase()))
caseInsensitivePrefix.push(prop);else if(property.indexOf(query)!==-1)
caseSensitiveAnywhere.push(prop);else
caseInsensitiveAnywhere.push(prop);}
return caseSensitivePrefix.concat(caseInsensitivePrefix).concat(caseSensitiveAnywhere).concat(caseInsensitiveAnywhere).map(completion=>({title:completion}));};;Components.Linkifier=class{constructor(maxLengthForDisplayedURLs,useLinkDecorator){this._maxLength=maxLengthForDisplayedURLs||Components.Linkifier.MaxLengthForDisplayedURLs;this._anchorsByTarget=new Map();this._locationPoolByTarget=new Map();this._useLinkDecorator=!!useLinkDecorator;Components.Linkifier._instances.add(this);SDK.targetManager.observeTargets(this);}
static setLinkDecorator(decorator){console.assert(!Components.Linkifier._decorator,'Cannot re-register link decorator.');Components.Linkifier._decorator=decorator;decorator.addEventListener(Components.LinkDecorator.Events.LinkIconChanged,onLinkIconChanged);for(var linkifier of Components.Linkifier._instances)
linkifier._updateAllAnchorDecorations();function onLinkIconChanged(event){var uiSourceCode=(event.data);var links=uiSourceCode[Components.Linkifier._sourceCodeAnchors]||[];for(var link of links)
Components.Linkifier._updateLinkDecorations(link);}}
_updateAllAnchorDecorations(){for(var anchors of this._anchorsByTarget.values()){for(var anchor of anchors)
Components.Linkifier._updateLinkDecorations(anchor);}}
static setLinkHandler(handler){Components.Linkifier._linkHandler=handler;}
static handleLink(url,lineNumber){if(!Components.Linkifier._linkHandler)
return false;return Components.Linkifier._linkHandler.handleLink(url,lineNumber);}
static linkifyUsingRevealer(revealable,text,fallbackHref,fallbackLineNumber,title,classes){var a=createElement('a');a.className=(classes||'')+' webkit-html-resource-link';a.textContent=text.trimMiddle(Components.Linkifier.MaxLengthForDisplayedURLs);a.title=title||text;if(fallbackHref){a.href=fallbackHref;a.lineNumber=fallbackLineNumber;}
function clickHandler(event){event.stopImmediatePropagation();event.preventDefault();if(fallbackHref&&Components.Linkifier.handleLink(fallbackHref,fallbackLineNumber))
return;Common.Revealer.reveal(this);}
a.addEventListener('click',clickHandler.bind(revealable),false);return a;}
static uiLocationByAnchor(anchor){return anchor[Components.Linkifier._uiLocationSymbol];}
static _bindUILocation(anchor,uiLocation){anchor[Components.Linkifier._uiLocationSymbol]=uiLocation;if(!uiLocation)
return;var uiSourceCode=uiLocation.uiSourceCode;var sourceCodeAnchors=uiSourceCode[Components.Linkifier._sourceCodeAnchors];if(!sourceCodeAnchors){sourceCodeAnchors=new Set();uiSourceCode[Components.Linkifier._sourceCodeAnchors]=sourceCodeAnchors;}
sourceCodeAnchors.add(anchor);}
static _unbindUILocation(anchor){if(!anchor[Components.Linkifier._uiLocationSymbol])
return;var uiSourceCode=anchor[Components.Linkifier._uiLocationSymbol].uiSourceCode;anchor[Components.Linkifier._uiLocationSymbol]=null;var sourceCodeAnchors=uiSourceCode[Components.Linkifier._sourceCodeAnchors];if(sourceCodeAnchors)
sourceCodeAnchors.delete(anchor);}
static liveLocationText(target,scriptId,lineNumber,columnNumber){var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(!debuggerModel)
return'';var script=debuggerModel.scriptForId(scriptId);if(!script)
return'';var location=(debuggerModel.createRawLocation(script,lineNumber,columnNumber||0));var uiLocation=(Bindings.debuggerWorkspaceBinding.rawLocationToUILocation(location));return uiLocation.linkText();}
targetAdded(target){this._anchorsByTarget.set(target,[]);this._locationPoolByTarget.set(target,new Bindings.LiveLocationPool());}
targetRemoved(target){var locationPool=(this._locationPoolByTarget.remove(target));locationPool.disposeAll();var anchors=this._anchorsByTarget.remove(target);for(var anchor of anchors){delete anchor[Components.Linkifier._liveLocationSymbol];Components.Linkifier._unbindUILocation(anchor);var fallbackAnchor=anchor[Components.Linkifier._fallbackAnchorSymbol];if(fallbackAnchor){anchor.href=fallbackAnchor.href;anchor.lineNumber=fallbackAnchor.lineNumber;anchor.title=fallbackAnchor.title;anchor.className=fallbackAnchor.className;anchor.textContent=fallbackAnchor.textContent;delete anchor[Components.Linkifier._fallbackAnchorSymbol];}}}
maybeLinkifyScriptLocation(target,scriptId,sourceURL,lineNumber,columnNumber,classes){var fallbackAnchor=sourceURL?Components.linkifyResourceAsNode(sourceURL,lineNumber,columnNumber,classes):null;if(!target||target.isDisposed())
return fallbackAnchor;var debuggerModel=SDK.DebuggerModel.fromTarget(target);if(!debuggerModel)
return fallbackAnchor;var rawLocation=(scriptId?debuggerModel.createRawLocationByScriptId(scriptId,lineNumber,columnNumber||0):null)||debuggerModel.createRawLocationByURL(sourceURL,lineNumber,columnNumber||0);if(!rawLocation)
return fallbackAnchor;var anchor=this._createAnchor(classes);var liveLocation=Bindings.debuggerWorkspaceBinding.createLiveLocation(rawLocation,this._updateAnchor.bind(this,anchor),(this._locationPoolByTarget.get(rawLocation.target())));var anchors=(this._anchorsByTarget.get(rawLocation.target()));anchors.push(anchor);anchor[Components.Linkifier._liveLocationSymbol]=liveLocation;anchor[Components.Linkifier._fallbackAnchorSymbol]=fallbackAnchor;return anchor;}
linkifyScriptLocation(target,scriptId,sourceURL,lineNumber,columnNumber,classes){return this.maybeLinkifyScriptLocation(target,scriptId,sourceURL,lineNumber,columnNumber,classes)||Components.linkifyResourceAsNode(sourceURL,lineNumber,columnNumber,classes);}
linkifyRawLocation(rawLocation,fallbackUrl,classes){return this.linkifyScriptLocation(rawLocation.target(),rawLocation.scriptId,fallbackUrl,rawLocation.lineNumber,rawLocation.columnNumber,classes);}
maybeLinkifyConsoleCallFrame(target,callFrame,classes){return this.maybeLinkifyScriptLocation(target,callFrame.scriptId,callFrame.url,callFrame.lineNumber,callFrame.columnNumber,classes);}
linkifyStackTraceTopFrame(target,stackTrace,classes){console.assert(stackTrace.callFrames&&stackTrace.callFrames.length);var topFrame=stackTrace.callFrames[0];var fallbackAnchor=Components.linkifyResourceAsNode(topFrame.url,topFrame.lineNumber,topFrame.columnNumber,classes);if(target.isDisposed())
return fallbackAnchor;var debuggerModel=SDK.DebuggerModel.fromTarget(target);var rawLocations=debuggerModel.createRawLocationsByStackTrace(stackTrace);if(rawLocations.length===0)
return fallbackAnchor;var anchor=this._createAnchor(classes);var liveLocation=Bindings.debuggerWorkspaceBinding.createStackTraceTopFrameLiveLocation(rawLocations,this._updateAnchor.bind(this,anchor),(this._locationPoolByTarget.get(target)));var anchors=(this._anchorsByTarget.get(target));anchors.push(anchor);anchor[Components.Linkifier._liveLocationSymbol]=liveLocation;anchor[Components.Linkifier._fallbackAnchorSymbol]=fallbackAnchor;return anchor;}
linkifyCSSLocation(rawLocation,classes){var anchor=this._createAnchor(classes);var liveLocation=Bindings.cssWorkspaceBinding.createLiveLocation(rawLocation,this._updateAnchor.bind(this,anchor),(this._locationPoolByTarget.get(rawLocation.target())));var anchors=(this._anchorsByTarget.get(rawLocation.target()));anchors.push(anchor);anchor[Components.Linkifier._liveLocationSymbol]=liveLocation;return anchor;}
disposeAnchor(target,anchor){Components.Linkifier._unbindUILocation(anchor);delete anchor[Components.Linkifier._fallbackAnchorSymbol];var liveLocation=anchor[Components.Linkifier._liveLocationSymbol];if(liveLocation)
liveLocation.dispose();delete anchor[Components.Linkifier._liveLocationSymbol];}
_createAnchor(classes){var anchor=createElement('a');if(this._useLinkDecorator)
anchor[Components.Linkifier._enableDecoratorSymbol]=true;anchor.className=(classes||'')+' webkit-html-resource-link';function clickHandler(event){var uiLocation=anchor[Components.Linkifier._uiLocationSymbol];if(!uiLocation)
return;event.consume(true);if(Components.Linkifier.handleLink(uiLocation.uiSourceCode.url(),uiLocation.lineNumber))
return;Common.Revealer.reveal(uiLocation);}
anchor.addEventListener('click',clickHandler,false);return anchor;}
reset(){for(var target of this._anchorsByTarget.keysArray()){this.targetRemoved(target);this.targetAdded(target);}}
dispose(){for(var target of this._anchorsByTarget.keysArray())
this.targetRemoved(target);SDK.targetManager.unobserveTargets(this);Components.Linkifier._instances.delete(this);}
_updateAnchor(anchor,liveLocation){Components.Linkifier._unbindUILocation(anchor);var uiLocation=liveLocation.uiLocation();if(!uiLocation)
return;Components.Linkifier._bindUILocation(anchor,uiLocation);var text=uiLocation.linkText();text=text.replace(/([a-f0-9]{7})[a-f0-9]{13}[a-f0-9]*/g,'$1\u2026');if(this._maxLength)
text=text.trimMiddle(this._maxLength);anchor.textContent=text;var titleText=uiLocation.uiSourceCode.url();if(typeof uiLocation.lineNumber==='number')
titleText+=':'+(uiLocation.lineNumber+1);anchor.title=titleText;anchor.classList.toggle('webkit-html-blackbox-link',liveLocation.isBlackboxed());Components.Linkifier._updateLinkDecorations(anchor);}
static _updateLinkDecorations(anchor){if(!anchor[Components.Linkifier._enableDecoratorSymbol])
return;var uiLocation=anchor[Components.Linkifier._uiLocationSymbol];if(!Components.Linkifier._decorator||!uiLocation)
return;var icon=anchor[Components.Linkifier._iconSymbol];if(icon)
icon.remove();icon=Components.Linkifier._decorator.linkIcon(uiLocation.uiSourceCode);if(icon){icon.style.setProperty('margin-right','2px');anchor.insertBefore(icon,anchor.firstChild);}
anchor[Components.Linkifier._iconSymbol]=icon;}
static linkifyURLAsNode(url,text,className,lineNumber,columnNumber){var isExternal=!Bindings.resourceForURL(url)&&!Workspace.workspace.uiSourceCodeForURL(url);if(isExternal){var link=UI.createExternalLink(url,text,className);link.lineNumber=lineNumber;link.columnNumber=columnNumber;return link;}
return Components.linkifyResourceAsNode(url,lineNumber,columnNumber,className,undefined,text);}};Components.Linkifier._instances=new Set();Components.Linkifier._decorator=null;Components.Linkifier._iconSymbol=Symbol('Linkifier.iconSymbol');Components.Linkifier._enableDecoratorSymbol=Symbol('Linkifier.enableIconsSymbol');Components.Linkifier._sourceCodeAnchors=Symbol('Linkifier.anchors');Components.Linkifier._uiLocationSymbol=Symbol('uiLocation');Components.Linkifier._fallbackAnchorSymbol=Symbol('fallbackAnchor');Components.Linkifier._liveLocationSymbol=Symbol('liveLocation');Components.Linkifier.MaxLengthForDisplayedURLs=150;Components.Linkifier.MaxLengthToIgnoreLinkifier=10000;Components.Linkifier.LinkHandler=function(){};Components.Linkifier.LinkHandler.prototype={handleLink:function(url,lineNumber){}};Components.LinkDecorator=function(){};Components.LinkDecorator.prototype={linkIcon:function(uiSourceCode){}};Components.LinkDecorator.Events={LinkIconChanged:Symbol('LinkIconChanged')};Components.linkifyStringAsFragmentWithCustomLinkifier=function(string,linkifier){var container=createDocumentFragment();var linkStringRegEx=/(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\/\/|data:|www\.)[\w$\-_+*'=\|\/\\(){}[\]^%@&#~,:;.!?]{2,}[\w$\-_+*=\|\/\\({^%@&#~]/;var pathLineRegex=/(?:\/[\w\.-]*)+\:[\d]+/;while(string&&string.length<Components.Linkifier.MaxLengthToIgnoreLinkifier){var linkString=linkStringRegEx.exec(string)||pathLineRegex.exec(string);if(!linkString)
break;linkString=linkString[0];var linkIndex=string.indexOf(linkString);var nonLink=string.substring(0,linkIndex);container.appendChild(createTextNode(nonLink));var title=linkString;var realURL=(linkString.startsWith('www.')?'http://'+linkString:linkString);var splitResult=Common.ParsedURL.splitLineAndColumn(realURL);var linkNode;if(splitResult)
linkNode=linkifier(title,splitResult.url,splitResult.lineNumber,splitResult.columnNumber);else
linkNode=linkifier(title,realURL);container.appendChild(linkNode);string=string.substring(linkIndex+linkString.length,string.length);}
if(string)
container.appendChild(createTextNode(string));return container;};Components.linkifyStringAsFragment=function(string){function linkifier(title,url,lineNumber,columnNumber){return Components.Linkifier.linkifyURLAsNode(url,title,undefined,lineNumber,columnNumber);}
return Components.linkifyStringAsFragmentWithCustomLinkifier(string,linkifier);};Components.linkifyResourceAsNode=function(url,lineNumber,columnNumber,classes,tooltipText,urlDisplayName){if(!url){var element=createElementWithClass('span',classes);element.textContent=urlDisplayName||Common.UIString('(unknown)');return element;}
var linkText=urlDisplayName||Bindings.displayNameForURL(url);if(typeof lineNumber==='number'&&!urlDisplayName)
linkText+=':'+(lineNumber+1);var anchor=createElementWithClass('a',classes);if(!url.trim().toLowerCase().startsWith('javascript:')){anchor.href=url;anchor.classList.add('webkit-html-resource-link');}
anchor.title=tooltipText||(linkText!==url?url:'');anchor.textContent=linkText.trimMiddle(150);anchor.lineNumber=lineNumber;anchor.columnNumber=columnNumber;return anchor;};Components.linkifyRequestAsNode=function(request){var anchor=UI.createExternalLink(request.url);anchor.requestId=request.requestId;return anchor;};;Components.NetworkConditionsSelector=class{constructor(populateCallback,selectCallback){this._populateCallback=populateCallback;this._selectCallback=selectCallback;this._customSetting=Common.moduleSetting('customNetworkConditions');this._customSetting.addChangeListener(this._populateOptions,this);this._manager=SDK.multitargetNetworkManager;this._manager.addEventListener(SDK.MultitargetNetworkManager.Events.ConditionsChanged,this._conditionsChanged,this);this._populateOptions();}
static _throughputText(throughput,plainText){if(throughput<0)
return'';var throughputInKbps=throughput/(1024/8);var delimiter=plainText?'':' ';if(throughputInKbps<1024)
return Common.UIString('%d%skb/s',throughputInKbps,delimiter);if(throughputInKbps<1024*10)
return Common.UIString('%.1f%sMb/s',throughputInKbps/1024,delimiter);return Common.UIString('%d%sMb/s',(throughputInKbps/1024)|0,delimiter);}
static _conditionsTitle(conditions,plainText){var downloadInKbps=conditions.download/(1024/8);var uploadInKbps=conditions.upload/(1024/8);var isThrottling=(downloadInKbps>=0)||(uploadInKbps>=0)||(conditions.latency>0);var conditionTitle=Common.UIString(conditions.title);if(!isThrottling)
return{text:conditionTitle,title:conditionTitle};var downloadText=Components.NetworkConditionsSelector._throughputText(conditions.download,plainText);var uploadText=Components.NetworkConditionsSelector._throughputText(conditions.upload,plainText);var pattern=plainText?'%s (%dms, %s, %s)':'%s (%dms RTT, %s\u2b07, %s\u2b06)';var title=Common.UIString(pattern,conditionTitle,conditions.latency,downloadText,uploadText);return{text:title,title:Common.UIString('Maximum download throughput: %s.\r\nMaximum upload throughput: %s.\r\nMinimum round-trip time: %dms.',downloadText,uploadText,conditions.latency)};}
static decorateSelect(selectElement){var options=[];var selector=new Components.NetworkConditionsSelector(populate,select);selectElement.addEventListener('change',optionSelected,false);function populate(groups){selectElement.removeChildren();options=[];for(var i=0;i<groups.length;++i){var group=groups[i];var groupElement=selectElement.createChild('optgroup');groupElement.label=group.title;if(!i){groupElement.appendChild(new Option(Common.UIString('Add\u2026'),Common.UIString('Add\u2026')));options.push(null);}
for(var conditions of group.items){var title=Components.NetworkConditionsSelector._conditionsTitle(conditions,true);var option=new Option(title.text,title.text);option.title=title.title;groupElement.appendChild(option);options.push(conditions);}}
return options;}
function optionSelected(){if(selectElement.selectedIndex===0)
selector.revealAndUpdate();else
selector.optionSelected(options[selectElement.selectedIndex]);}
function select(index){if(selectElement.selectedIndex!==index)
selectElement.selectedIndex=index;}}
static createToolbarMenuButton(){var button=new UI.ToolbarMenuButton(appendItems);button.setGlyph('');button.turnIntoSelect();var options=[];var selectedIndex=-1;var selector=new Components.NetworkConditionsSelector(populate,select);return button;function appendItems(contextMenu){for(var index=0;index<options.length;++index){var conditions=options[index];if(!conditions){contextMenu.appendSeparator();}else{contextMenu.appendCheckboxItem(Components.NetworkConditionsSelector._conditionsTitle(conditions,true).text,selector.optionSelected.bind(selector,conditions),selectedIndex===index);}}
contextMenu.appendItem(Common.UIString('Edit\u2026'),selector.revealAndUpdate.bind(selector));}
function populate(groups){options=[];for(var group of groups){for(var conditions of group.items)
options.push(conditions);options.push(null);}
return options;}
function select(index){selectedIndex=index;button.setText(options[index].title);}}
static createOfflineToolbarCheckbox(){var checkbox=new UI.ToolbarCheckbox(Common.UIString('Offline'),Common.UIString('Force disconnected from network'),undefined,forceOffline);SDK.multitargetNetworkManager.addEventListener(SDK.MultitargetNetworkManager.Events.ConditionsChanged,networkConditionsChanged);checkbox.setChecked(SDK.multitargetNetworkManager.networkConditions()===SDK.NetworkManager.OfflineConditions);var lastNetworkConditions;function forceOffline(){if(checkbox.checked()){lastNetworkConditions=SDK.multitargetNetworkManager.networkConditions();SDK.multitargetNetworkManager.setNetworkConditions(SDK.NetworkManager.OfflineConditions);}else{SDK.multitargetNetworkManager.setNetworkConditions(lastNetworkConditions);}}
function networkConditionsChanged(){var conditions=SDK.multitargetNetworkManager.networkConditions();if(conditions!==SDK.NetworkManager.OfflineConditions)
lastNetworkConditions=conditions;checkbox.setChecked(conditions===SDK.NetworkManager.OfflineConditions);}
return checkbox;}
_populateOptions(){var customGroup={title:Common.UIString('Custom'),items:this._customSetting.get()};var presetsGroup={title:Common.UIString('Presets'),items:Components.NetworkConditionsSelector._presets};var disabledGroup={title:Common.UIString('Disabled'),items:[SDK.NetworkManager.NoThrottlingConditions]};this._options=this._populateCallback([customGroup,presetsGroup,disabledGroup]);if(!this._conditionsChanged()){for(var i=this._options.length-1;i>=0;i--){if(this._options[i]){this.optionSelected((this._options[i]));break;}}}}
revealAndUpdate(){Common.Revealer.reveal(this._customSetting);this._conditionsChanged();}
optionSelected(conditions){this._manager.setNetworkConditions(conditions);}
_conditionsChanged(){var value=this._manager.networkConditions();for(var index=0;index<this._options.length;++index){var option=this._options[index];if(option&&option.download===value.download&&option.upload===value.upload&&option.latency===value.latency&&option.title===value.title){this._selectCallback(index);return true;}}
return false;}};Components.NetworkConditionsGroup;Components.NetworkConditionsSelector._presets=[SDK.NetworkManager.OfflineConditions,{title:'GPRS',download:50*1024/8,upload:20*1024/8,latency:500},{title:'Regular 2G',download:250*1024/8,upload:50*1024/8,latency:300},{title:'Good 2G',download:450*1024/8,upload:150*1024/8,latency:150},{title:'Regular 3G',download:750*1024/8,upload:250*1024/8,latency:100},{title:'Good 3G',download:1.5*1024*1024/8,upload:750*1024/8,latency:40},{title:'Regular 4G',download:4*1024*1024/8,upload:3*1024*1024/8,latency:20},{title:'DSL',download:2*1024*1024/8,upload:1*1024*1024/8,latency:5},{title:'WiFi',download:30*1024*1024/8,upload:15*1024*1024/8,latency:2}];Components.NetworkConditionsSettingsTab=class extends UI.VBox{constructor(){super(true);this.registerRequiredCSS('components/networkConditionsSettingsTab.css');this.contentElement.createChild('div','header').textContent=Common.UIString('Network Throttling Profiles');var addButton=createTextButton(Common.UIString('Add custom profile...'),this._addButtonClicked.bind(this),'add-conditions-button');this.contentElement.appendChild(addButton);this._list=new UI.ListWidget(this);this._list.element.classList.add('conditions-list');this._list.registerRequiredCSS('components/networkConditionsSettingsTab.css');this._list.show(this.contentElement);this._customSetting=Common.moduleSetting('customNetworkConditions');this._customSetting.addChangeListener(this._conditionsUpdated,this);this.setDefaultFocusedElement(addButton);this.contentElement.tabIndex=0;}
wasShown(){super.wasShown();this._conditionsUpdated();}
_conditionsUpdated(){this._list.clear();var conditions=this._customSetting.get();for(var i=0;i<conditions.length;++i)
this._list.appendItem(conditions[i],true);this._list.appendSeparator();conditions=Components.NetworkConditionsSelector._presets;for(var i=0;i<conditions.length;++i)
this._list.appendItem(conditions[i],false);}
_addButtonClicked(){this._list.addNewItem(this._customSetting.get().length,{title:'',download:-1,upload:-1,latency:0});}
renderItem(item,editable){var conditions=(item);var element=createElementWithClass('div','conditions-list-item');var title=element.createChild('div','conditions-list-text conditions-list-title');var titleText=title.createChild('div','conditions-list-title-text');titleText.textContent=conditions.title;titleText.title=conditions.title;element.createChild('div','conditions-list-separator');element.createChild('div','conditions-list-text').textContent=Components.NetworkConditionsSelector._throughputText(conditions.download);element.createChild('div','conditions-list-separator');element.createChild('div','conditions-list-text').textContent=Components.NetworkConditionsSelector._throughputText(conditions.upload);element.createChild('div','conditions-list-separator');element.createChild('div','conditions-list-text').textContent=Common.UIString('%dms',conditions.latency);return element;}
removeItemRequested(item,index){var list=this._customSetting.get();list.splice(index,1);this._customSetting.set(list);}
commitEdit(item,editor,isNew){var conditions=(item);conditions.title=editor.control('title').value.trim();var download=editor.control('download').value.trim();conditions.download=download?parseInt(download,10)*(1024/8):-1;var upload=editor.control('upload').value.trim();conditions.upload=upload?parseInt(upload,10)*(1024/8):-1;var latency=editor.control('latency').value.trim();conditions.latency=latency?parseInt(latency,10):0;var list=this._customSetting.get();if(isNew)
list.push(conditions);this._customSetting.set(list);}
beginEdit(item){var conditions=(item);var editor=this._createEditor();editor.control('title').value=conditions.title;editor.control('download').value=conditions.download<=0?'':String(conditions.download/(1024/8));editor.control('upload').value=conditions.upload<=0?'':String(conditions.upload/(1024/8));editor.control('latency').value=conditions.latency?String(conditions.latency):'';return editor;}
_createEditor(){if(this._editor)
return this._editor;var editor=new UI.ListWidget.Editor();this._editor=editor;var content=editor.contentElement();var titles=content.createChild('div','conditions-edit-row');titles.createChild('div','conditions-list-text conditions-list-title').textContent=Common.UIString('Profile Name');titles.createChild('div','conditions-list-separator conditions-list-separator-invisible');titles.createChild('div','conditions-list-text').textContent=Common.UIString('Download');titles.createChild('div','conditions-list-separator conditions-list-separator-invisible');titles.createChild('div','conditions-list-text').textContent=Common.UIString('Upload');titles.createChild('div','conditions-list-separator conditions-list-separator-invisible');titles.createChild('div','conditions-list-text').textContent=Common.UIString('Latency');var fields=content.createChild('div','conditions-edit-row');fields.createChild('div','conditions-list-text conditions-list-title').appendChild(editor.createInput('title','text','',titleValidator));fields.createChild('div','conditions-list-separator conditions-list-separator-invisible');var cell=fields.createChild('div','conditions-list-text');cell.appendChild(editor.createInput('download','text',Common.UIString('kb/s'),throughputValidator));cell.createChild('div','conditions-edit-optional').textContent=Common.UIString('optional');fields.createChild('div','conditions-list-separator conditions-list-separator-invisible');cell=fields.createChild('div','conditions-list-text');cell.appendChild(editor.createInput('upload','text',Common.UIString('kb/s'),throughputValidator));cell.createChild('div','conditions-edit-optional').textContent=Common.UIString('optional');fields.createChild('div','conditions-list-separator conditions-list-separator-invisible');cell=fields.createChild('div','conditions-list-text');cell.appendChild(editor.createInput('latency','text',Common.UIString('ms'),latencyValidator));cell.createChild('div','conditions-edit-optional').textContent=Common.UIString('optional');return editor;function titleValidator(item,index,input){var value=input.value.trim();return value.length>0&&value.length<50;}
function throughputValidator(item,index,input){var value=input.value.trim();return!value||(/^[\d]+(\.\d+)?|\.\d+$/.test(value)&&value>=0&&value<=10000000);}
function latencyValidator(item,index,input){var value=input.value.trim();return!value||(/^[\d]+$/.test(value)&&value>=0&&value<=1000000);}}};Components.NetworkConditionsActionDelegate=class{handleAction(context,actionId){if(actionId==='components.network-online'){SDK.multitargetNetworkManager.setNetworkConditions(SDK.NetworkManager.NoThrottlingConditions);return true;}
if(actionId==='components.network-offline'){SDK.multitargetNetworkManager.setNetworkConditions(SDK.NetworkManager.OfflineConditions);return true;}
return false;}};Components.uiLabelForPriority=function(priority){var labelMap=Components.uiLabelForPriority._priorityToUILabel;if(!labelMap){labelMap=new Map([[Protocol.Network.ResourcePriority.VeryLow,Common.UIString('Lowest')],[Protocol.Network.ResourcePriority.Low,Common.UIString('Low')],[Protocol.Network.ResourcePriority.Medium,Common.UIString('Medium')],[Protocol.Network.ResourcePriority.High,Common.UIString('High')],[Protocol.Network.ResourcePriority.VeryHigh,Common.UIString('Highest')]]);Components.uiLabelForPriority._priorityToUILabel=labelMap;}
return labelMap.get(priority)||Common.UIString('Unknown');};;Components.ObjectPopoverHelper=class extends UI.PopoverHelper{constructor(panelElement,getAnchor,queryObject,onHide,disableOnClick){super(panelElement,disableOnClick);this.initializeCallbacks(getAnchor,this._showObjectPopover.bind(this),this._onHideObjectPopover.bind(this));this._queryObject=queryObject;this._onHideCallback=onHide;this._popoverObjectGroup='popover';panelElement.addEventListener('scroll',this.hidePopover.bind(this),true);}
_showObjectPopover(element,popover){function didGetFunctionProperties(funcObject,popoverContentElement,popoverValueElement,anchorElement,properties,internalProperties){if(internalProperties){for(var i=0;i<internalProperties.length;i++){if(internalProperties[i].name==='[[TargetFunction]]'){funcObject=internalProperties[i].value;break;}}}
Components.ObjectPropertiesSection.formatObjectAsFunction(funcObject,popoverValueElement,true);funcObject.debuggerModel().functionDetailsPromise(funcObject).then(didGetFunctionDetails.bind(this,popoverContentElement,anchorElement));}
function didGetFunctionDetails(popoverContentElement,anchorElement,response){if(!response||popover.disposed)
return;var container=createElementWithClass('div','object-popover-container');var title=container.createChild('div','function-popover-title source-code');var functionName=title.createChild('span','function-name');functionName.textContent=UI.beautifyFunctionName(response.functionName);var rawLocation=response.location;var linkContainer=title.createChild('div','function-title-link-container');if(rawLocation&&Runtime.experiments.isEnabled('continueToFirstInvocation')){var sectionToolbar=new UI.Toolbar('function-location-step-into',linkContainer);var stepInto=new UI.ToolbarButton(Common.UIString('Continue to first invocation'),'largeicon-step-in');stepInto.addEventListener('click',()=>rawLocation.continueToLocation());sectionToolbar.appendToolbarItem(stepInto);}
var sourceURL=rawLocation&&rawLocation.script()?rawLocation.script().sourceURL:null;if(rawLocation&&sourceURL)
linkContainer.appendChild(this._lazyLinkifier().linkifyRawLocation(rawLocation,sourceURL));container.appendChild(popoverContentElement);popover.showForAnchor(container,anchorElement);}
function didQueryObject(result,wasThrown,anchorOverride){if(popover.disposed)
return;if(wasThrown){this.hidePopover();return;}
this._objectTarget=result.target();var anchorElement=anchorOverride||element;var description=result.description.trimEnd(Components.ObjectPopoverHelper.MaxPopoverTextLength);var popoverContentElement=null;if(result.type!=='object'){popoverContentElement=createElement('span');UI.appendStyle(popoverContentElement,'components/objectValue.css');var valueElement=popoverContentElement.createChild('span','monospace object-value-'+result.type);valueElement.style.whiteSpace='pre';if(result.type==='string')
valueElement.createTextChildren('"',description,'"');else if(result.type!=='function')
valueElement.textContent=description;if(result.type==='function'){result.getOwnProperties(didGetFunctionProperties.bind(this,result,popoverContentElement,valueElement,anchorElement));return;}
popover.showForAnchor(popoverContentElement,anchorElement);}else{if(result.subtype==='node'){SDK.DOMModel.highlightObjectAsDOMNode(result);this._resultHighlightedAsDOM=true;}
if(result.customPreview()){var customPreviewComponent=new Components.CustomPreviewComponent(result);customPreviewComponent.expandIfPossible();popoverContentElement=customPreviewComponent.element;}else{popoverContentElement=createElement('div');this._titleElement=popoverContentElement.createChild('div','monospace');this._titleElement.createChild('span','source-frame-popover-title').textContent=description;var section=new Components.ObjectPropertiesSection(result,'',this._lazyLinkifier());section.element.classList.add('source-frame-popover-tree');section.titleLessMode();popoverContentElement.appendChild(section.element);}
var popoverWidth=300;var popoverHeight=250;popover.showForAnchor(popoverContentElement,anchorElement,popoverWidth,popoverHeight);}}
this._queryObject(element,didQueryObject.bind(this),this._popoverObjectGroup);}
_onHideObjectPopover(){if(this._resultHighlightedAsDOM){SDK.DOMModel.hideDOMNodeHighlight();delete this._resultHighlightedAsDOM;}
if(this._linkifier){this._linkifier.dispose();delete this._linkifier;}
if(this._onHideCallback)
this._onHideCallback();if(this._objectTarget){this._objectTarget.runtimeAgent().releaseObjectGroup(this._popoverObjectGroup);delete this._objectTarget;}}
_lazyLinkifier(){if(!this._linkifier)
this._linkifier=new Components.Linkifier();return this._linkifier;}};Components.ObjectPopoverHelper.MaxPopoverTextLength=10000;;Components.ObjectPropertiesSection=class extends TreeOutlineInShadow{constructor(object,title,linkifier,emptyPlaceholder,ignoreHasOwnProperty,extraProperties){super();this._object=object;this._editable=true;this.hideOverflow();this.setFocusable(false);this._objectTreeElement=new Components.ObjectPropertiesSection.RootElement(object,linkifier,emptyPlaceholder,ignoreHasOwnProperty,extraProperties);this.appendChild(this._objectTreeElement);if(typeof title==='string'||!title){this.titleElement=this.element.createChild('span');this.titleElement.textContent=title||'';}else{this.titleElement=title;this.element.appendChild(title);}
if(object.description&&Components.ObjectPropertiesSection._needsAlternateTitle(object)){this.expandedTitleElement=createElement('span');this.expandedTitleElement.createTextChild(object.description);var note=this.expandedTitleElement.createChild('span','object-state-note');note.classList.add('info-note');note.title=Common.UIString('Value below was evaluated just now.');}
this.element._section=this;this.registerRequiredCSS('components/objectValue.css');this.registerRequiredCSS('components/objectPropertiesSection.css');this.rootElement().childrenListElement.classList.add('source-code','object-properties-section');}
static defaultObjectPresentation(object,linkifier,skipProto){var componentRoot=createElementWithClass('span','source-code');var shadowRoot=UI.createShadowRootWithCoreStyles(componentRoot,'components/objectValue.css');shadowRoot.appendChild(Components.ObjectPropertiesSection.createValueElement(object,false));if(!object.hasChildren)
return componentRoot;var objectPropertiesSection=new Components.ObjectPropertiesSection(object,componentRoot,linkifier);objectPropertiesSection.editable=false;if(skipProto)
objectPropertiesSection.skipProto();return objectPropertiesSection.element;}
static CompareProperties(propertyA,propertyB){var a=propertyA.name;var b=propertyB.name;if(a==='__proto__')
return 1;if(b==='__proto__')
return-1;if(propertyA.symbol&&!propertyB.symbol)
return 1;if(propertyB.symbol&&!propertyA.symbol)
return-1;return String.naturalOrderComparator(a,b);}
static createNameElement(name){var nameElement=createElementWithClass('span','name');if(/^\s|\s$|^$|\n/.test(name))
nameElement.createTextChildren('"',name.replace(/\n/g,'\u21B5'),'"');else
nameElement.textContent=name;return nameElement;}
static valueTextForFunctionDescription(description){var text=description.replace(/^function [gs]et /,'function ');var functionPrefixWithArguments=new RegExp(Components.ObjectPropertiesSection._functionPrefixSource.source+'([^)]*)');var matches=functionPrefixWithArguments.exec(text);if(!matches){matches=/[^(]*(\([^)]*)/.exec(text);}
var match=matches?matches[1]:null;return match?match.replace(/\n/g,' ')+')':(text||'');}
static createValueElementWithCustomSupport(value,wasThrown,parentElement,linkifier){if(value.customPreview()){var result=(new Components.CustomPreviewComponent(value)).element;result.classList.add('object-properties-section-custom-section');return result;}
return Components.ObjectPropertiesSection.createValueElement(value,wasThrown,parentElement,linkifier);}
static createValueElement(value,wasThrown,parentElement,linkifier){var valueElement=createElementWithClass('span','value');var type=value.type;var subtype=value.subtype;var description=value.description;var prefix;var valueText;var suffix;if(wasThrown){prefix='[Exception: ';valueText=description;suffix=']';}else if(type==='string'&&typeof description==='string'){prefix='"';valueText=description.replace(/\n/g,'\u21B5');suffix='"';}else if(type==='function'){valueText=Components.ObjectPropertiesSection.valueTextForFunctionDescription(description);}else if(type!=='object'||subtype!=='node'){valueText=description;}
if(type!=='number'||valueText.indexOf('e')===-1){valueElement.setTextContentTruncatedIfNeeded(valueText||'');if(prefix)
valueElement.insertBefore(createTextNode(prefix),valueElement.firstChild);if(suffix)
valueElement.createTextChild(suffix);}else{var numberParts=valueText.split('e');var mantissa=valueElement.createChild('span','object-value-scientific-notation-mantissa');mantissa.textContent=numberParts[0];var exponent=valueElement.createChild('span','object-value-scientific-notation-exponent');exponent.textContent='e'+numberParts[1];valueElement.classList.add('object-value-scientific-notation-number');if(parentElement)
parentElement.classList.add('hbox');}
if(wasThrown)
valueElement.classList.add('error');if(subtype||type)
valueElement.classList.add('object-value-'+(subtype||type));if(type==='object'&&subtype==='node'&&description){Components.DOMPresentationUtils.createSpansForNodeTitle(valueElement,description);valueElement.addEventListener('click',mouseClick,false);valueElement.addEventListener('mousemove',mouseMove,false);valueElement.addEventListener('mouseleave',mouseLeave,false);}else{valueElement.title=description||'';}
if(type==='object'&&subtype==='internal#location'){var rawLocation=value.debuggerModel().createRawLocationByScriptId(value.value.scriptId,value.value.lineNumber,value.value.columnNumber);if(rawLocation&&linkifier)
return linkifier.linkifyRawLocation(rawLocation,'');valueElement.textContent='<unknown>';}
function mouseMove(){SDK.DOMModel.highlightObjectAsDOMNode(value);}
function mouseLeave(){SDK.DOMModel.hideDOMNodeHighlight();}
function mouseClick(event){Common.Revealer.reveal(value);event.consume(true);}
return valueElement;}
static _needsAlternateTitle(object){return object&&object.hasChildren&&!object.customPreview()&&object.subtype!=='node'&&object.type!=='function'&&(object.type!=='object'||object.preview);}
static formatObjectAsFunction(func,element,linkify,includePreview){func.debuggerModel().functionDetailsPromise(func).then(didGetDetails);function didGetDetails(response){if(!response){var valueText=Components.ObjectPropertiesSection.valueTextForFunctionDescription(func.description);element.createTextChild(valueText);return;}
var matched=func.description.match(Components.ObjectPropertiesSection._functionPrefixSource);if(matched){var prefix=createElementWithClass('span','object-value-function-prefix');prefix.textContent=matched[0];element.appendChild(prefix);}
if(linkify&&response&&response.location){var anchor=createElement('span');element.classList.add('linkified');element.appendChild(anchor);element.addEventListener('click',Common.Revealer.reveal.bind(Common.Revealer,response.location,undefined));element=anchor;}
var text=func.description.substring(0,200);if(includePreview){element.createTextChild(text.replace(Components.ObjectPropertiesSection._functionPrefixSource,'')+
(func.description.length>200?'\u2026':''));return;}
self.runtime.extension(Common.TokenizerFactory).instance().then(processTokens);var params=null;var functionName=response?response.functionName:'';function processTokens(tokenizerFactory){var tokenize=tokenizerFactory.createTokenizer('text/javascript');tokenize(text,processToken);element.createTextChild((functionName||'anonymous')+'('+(params||[]).join(', ')+')');}
var doneProcessing=false;function processToken(token,tokenType,column,newColumn){if(!params&&tokenType==='js-def'&&!functionName)
functionName=token;doneProcessing=doneProcessing||token===')';if(doneProcessing)
return;if(token==='('){params=[];return;}
if(params&&tokenType==='js-def')
params.push(token);}}}
skipProto(){this._skipProto=true;}
expand(){this._objectTreeElement.expand();}
setEditable(value){this._editable=value;}
objectTreeElement(){return this._objectTreeElement;}
enableContextMenu(){this.element.addEventListener('contextmenu',this._contextMenuEventFired.bind(this),false);}
_contextMenuEventFired(event){var contextMenu=new UI.ContextMenu(event);contextMenu.appendApplicableItems(this._object);contextMenu.show();}
titleLessMode(){this._objectTreeElement.listItemElement.classList.add('hidden');this._objectTreeElement.childrenListElement.classList.add('title-less-mode');this._objectTreeElement.expand();}};Components.ObjectPropertiesSection._arrayLoadThreshold=100;Components.ObjectPropertiesSection.RootElement=class extends TreeElement{constructor(object,linkifier,emptyPlaceholder,ignoreHasOwnProperty,extraProperties){var contentElement=createElement('content');super(contentElement);this._object=object;this._extraProperties=extraProperties||[];this._ignoreHasOwnProperty=!!ignoreHasOwnProperty;this._emptyPlaceholder=emptyPlaceholder;this.setExpandable(true);this.selectable=false;this.toggleOnClick=true;this.listItemElement.classList.add('object-properties-section-root-element');this._linkifier=linkifier;}
onexpand(){if(this.treeOutline){this.treeOutline.element.classList.add('expanded');this._showExpandedTitleElement(true);}}
oncollapse(){if(this.treeOutline){this.treeOutline.element.classList.remove('expanded');this._showExpandedTitleElement(false);}}
_showExpandedTitleElement(value){if(!this.treeOutline.expandedTitleElement)
return;if(value)
this.treeOutline.element.replaceChild(this.treeOutline.expandedTitleElement,this.treeOutline.titleElement);else
this.treeOutline.element.replaceChild(this.treeOutline.titleElement,this.treeOutline.expandedTitleElement);}
ondblclick(e){return true;}
onpopulate(){Components.ObjectPropertyTreeElement._populate(this,this._object,!!this.treeOutline._skipProto,this._linkifier,this._emptyPlaceholder,this._ignoreHasOwnProperty,this._extraProperties);}};Components.ObjectPropertyTreeElement=class extends TreeElement{constructor(property,linkifier){super();this.property=property;this.toggleOnClick=true;this.selectable=false;this._highlightChanges=[];this._linkifier=linkifier;}
static _populate(treeElement,value,skipProto,linkifier,emptyPlaceholder,flattenProtoChain,extraProperties,targetValue){if(value.arrayLength()>Components.ObjectPropertiesSection._arrayLoadThreshold){treeElement.removeChildren();Components.ArrayGroupingTreeElement._populateArray(treeElement,value,0,value.arrayLength()-1,linkifier);return;}
function callback(properties,internalProperties){treeElement.removeChildren();if(!properties)
return;extraProperties=extraProperties||[];for(var i=0;i<extraProperties.length;++i)
properties.push(extraProperties[i]);Components.ObjectPropertyTreeElement.populateWithProperties(treeElement,properties,internalProperties,skipProto,targetValue||value,linkifier,emptyPlaceholder);}
if(flattenProtoChain)
value.getAllProperties(false,callback);else
SDK.RemoteObject.loadFromObjectPerProto(value,callback);}
static populateWithProperties(treeNode,properties,internalProperties,skipProto,value,linkifier,emptyPlaceholder){properties.sort(Components.ObjectPropertiesSection.CompareProperties);var tailProperties=[];var protoProperty=null;for(var i=0;i<properties.length;++i){var property=properties[i];property.parentObject=value;if(property.name==='__proto__'&&!property.isAccessorProperty()){protoProperty=property;continue;}
if(property.isOwn&&property.getter){var getterProperty=new SDK.RemoteObjectProperty('get '+property.name,property.getter,false);getterProperty.parentObject=value;tailProperties.push(getterProperty);}
if(property.isOwn&&property.setter){var setterProperty=new SDK.RemoteObjectProperty('set '+property.name,property.setter,false);setterProperty.parentObject=value;tailProperties.push(setterProperty);}
var canShowProperty=property.getter||!property.isAccessorProperty();if(canShowProperty&&property.name!=='__proto__')
treeNode.appendChild(new Components.ObjectPropertyTreeElement(property,linkifier));}
for(var i=0;i<tailProperties.length;++i)
treeNode.appendChild(new Components.ObjectPropertyTreeElement(tailProperties[i],linkifier));if(!skipProto&&protoProperty)
treeNode.appendChild(new Components.ObjectPropertyTreeElement(protoProperty,linkifier));if(internalProperties){for(var i=0;i<internalProperties.length;i++){internalProperties[i].parentObject=value;var treeElement=new Components.ObjectPropertyTreeElement(internalProperties[i],linkifier);if(internalProperties[i].name==='[[Entries]]'){treeElement.setExpandable(true);treeElement.expand();}
treeNode.appendChild(treeElement);}}
Components.ObjectPropertyTreeElement._appendEmptyPlaceholderIfNeeded(treeNode,emptyPlaceholder);}
static _appendEmptyPlaceholderIfNeeded(treeNode,emptyPlaceholder){if(treeNode.childCount())
return;var title=createElementWithClass('div','gray-info-message');title.textContent=emptyPlaceholder||Common.UIString('No Properties');var infoElement=new TreeElement(title);treeNode.appendChild(infoElement);}
static createRemoteObjectAccessorPropertySpan(object,propertyPath,callback){var rootElement=createElement('span');var element=rootElement.createChild('span');element.textContent=Common.UIString('(...)');if(!object)
return rootElement;element.classList.add('object-value-calculate-value-button');element.title=Common.UIString('Invoke property getter');element.addEventListener('click',onInvokeGetterClick,false);function onInvokeGetterClick(event){event.consume();object.getProperty(propertyPath,callback);}
return rootElement;}
setSearchRegex(regex,additionalCssClassName){var cssClasses=UI.highlightedSearchResultClassName;if(additionalCssClassName)
cssClasses+=' '+additionalCssClassName;this.revertHighlightChanges();this._applySearch(regex,this.nameElement,cssClasses);var valueType=this.property.value.type;if(valueType!=='object')
this._applySearch(regex,this.valueElement,cssClasses);return!!this._highlightChanges.length;}
_applySearch(regex,element,cssClassName){var ranges=[];var content=element.textContent;regex.lastIndex=0;var match=regex.exec(content);while(match){ranges.push(new Common.SourceRange(match.index,match[0].length));match=regex.exec(content);}
if(ranges.length)
UI.highlightRangesWithStyleClass(element,ranges,cssClassName,this._highlightChanges);}
revertHighlightChanges(){UI.revertDomChanges(this._highlightChanges);this._highlightChanges=[];}
onpopulate(){var propertyValue=(this.property.value);console.assert(propertyValue);var skipProto=this.treeOutline?this.treeOutline._skipProto:true;var targetValue=this.property.name!=='__proto__'?propertyValue:this.property.parentObject;Components.ObjectPropertyTreeElement._populate(this,propertyValue,skipProto,this._linkifier,undefined,undefined,undefined,targetValue);}
ondblclick(event){var inEditableElement=event.target.isSelfOrDescendant(this.valueElement)||(this.expandedValueElement&&event.target.isSelfOrDescendant(this.expandedValueElement));if(!this.property.value.customPreview()&&inEditableElement&&(this.property.writable||this.property.setter))
this._startEditing();return false;}
onattach(){this.update();this._updateExpandable();}
onexpand(){this._showExpandedValueElement(true);}
oncollapse(){this._showExpandedValueElement(false);}
_showExpandedValueElement(value){if(!this.expandedValueElement)
return;if(value)
this.listItemElement.replaceChild(this.expandedValueElement,this.valueElement);else
this.listItemElement.replaceChild(this.valueElement,this.expandedValueElement);}
_createExpandedValueElement(value){if(!Components.ObjectPropertiesSection._needsAlternateTitle(value))
return null;var valueElement=createElementWithClass('span','value');valueElement.setTextContentTruncatedIfNeeded(value.description||'');valueElement.classList.add('object-value-'+(value.subtype||value.type));valueElement.title=value.description||'';return valueElement;}
update(){this.nameElement=Components.ObjectPropertiesSection.createNameElement(this.property.name);if(!this.property.enumerable)
this.nameElement.classList.add('object-properties-section-dimmed');if(this.property.synthetic)
this.nameElement.classList.add('synthetic-property');this._updatePropertyPath();this.nameElement.addEventListener('contextmenu',this._contextMenuFired.bind(this,this.property),false);var separatorElement=createElementWithClass('span','object-properties-section-separator');separatorElement.textContent=': ';if(this.property.value){this.valueElement=Components.ObjectPropertiesSection.createValueElementWithCustomSupport(this.property.value,this.property.wasThrown,this.listItemElement,this._linkifier);this.valueElement.addEventListener('contextmenu',this._contextMenuFired.bind(this,this.property),false);}else if(this.property.getter){this.valueElement=Components.ObjectPropertyTreeElement.createRemoteObjectAccessorPropertySpan(this.property.parentObject,[this.property.name],this._onInvokeGetterClick.bind(this));}else{this.valueElement=createElementWithClass('span','object-value-undefined');this.valueElement.textContent=Common.UIString('<unreadable>');this.valueElement.title=Common.UIString('No property getter');}
var valueText=this.valueElement.textContent;if(this.property.value&&valueText&&!this.property.wasThrown)
this.expandedValueElement=this._createExpandedValueElement(this.property.value);this.listItemElement.removeChildren();this.listItemElement.appendChildren(this.nameElement,separatorElement,this.valueElement);}
_updatePropertyPath(){if(this.nameElement.title)
return;var useDotNotation=/^(_|\$|[A-Z])(_|\$|[A-Z]|\d)*$/i;var isInteger=/^[1-9]\d*$/;var name=this.property.name;var parentPath=this.parent.nameElement?this.parent.nameElement.title:'';if(useDotNotation.test(name))
this.nameElement.title=parentPath+'.'+name;else if(isInteger.test(name))
this.nameElement.title=parentPath+'['+name+']';else
this.nameElement.title=parentPath+'["'+name+'"]';}
_contextMenuFired(property,event){var contextMenu=new UI.ContextMenu(event);if(property.symbol)
contextMenu.appendApplicableItems(property.symbol);if(property.value)
contextMenu.appendApplicableItems(property.value);var copyPathHandler=InspectorFrontendHost.copyText.bind(InspectorFrontendHost,this.nameElement.title);contextMenu.beforeShow(()=>{contextMenu.appendItem(Common.UIString.capitalize('Copy ^property ^path'),copyPathHandler);});contextMenu.show();}
_startEditing(){if(this._prompt||!this.treeOutline._editable||this._readOnly)
return;this._editableDiv=this.listItemElement.createChild('span');var text=this.property.value.description;if(this.property.value.type==='string'&&typeof text==='string')
text='"'+text+'"';this._editableDiv.setTextContentTruncatedIfNeeded(text,Common.UIString('<string is too large to edit>'));var originalContent=this._editableDiv.textContent;this.setExpandable(false);this.listItemElement.classList.add('editing-sub-part');this.valueElement.classList.add('hidden');this._prompt=new Components.ObjectPropertyPrompt();var proxyElement=this._prompt.attachAndStartEditing(this._editableDiv,this._editingCommitted.bind(this,originalContent));this.listItemElement.getComponentSelection().setBaseAndExtent(this._editableDiv,0,this._editableDiv,1);proxyElement.addEventListener('keydown',this._promptKeyDown.bind(this,originalContent),false);}
_editingEnded(){this._prompt.detach();delete this._prompt;this._editableDiv.remove();this._updateExpandable();this.listItemElement.scrollLeft=0;this.listItemElement.classList.remove('editing-sub-part');}
_editingCancelled(){this.valueElement.classList.remove('hidden');this._editingEnded();}
_editingCommitted(originalContent){var userInput=this._prompt.text();if(userInput===originalContent){this._editingCancelled();return;}
this._editingEnded();this._applyExpression(userInput);}
_promptKeyDown(originalContent,event){if(isEnterKey(event)){event.consume(true);this._editingCommitted(originalContent);return;}
if(event.key==='Escape'){event.consume();this._editingCancelled();return;}}
_applyExpression(expression){var property=SDK.RemoteObject.toCallArgument(this.property.symbol||this.property.name);expression=expression.trim();if(expression)
this.property.parentObject.setPropertyValue(property,expression,callback.bind(this));else
this.property.parentObject.deleteProperty(property,callback.bind(this));function callback(error){if(error){this.update();return;}
if(!expression){this.parent.removeChild(this);}else{var parent=this.parent;parent.invalidateChildren();parent.onpopulate();}}}
_onInvokeGetterClick(result,wasThrown){if(!result)
return;this.property.value=result;this.property.wasThrown=wasThrown;this.update();this.invalidateChildren();this._updateExpandable();}
_updateExpandable(){if(this.property.value){this.setExpandable(!this.property.value.customPreview()&&this.property.value.hasChildren&&!this.property.wasThrown);}else{this.setExpandable(false);}}};Components.ArrayGroupingTreeElement=class extends TreeElement{constructor(object,fromIndex,toIndex,propertyCount,linkifier){super(String.sprintf('[%d \u2026 %d]',fromIndex,toIndex),true);this.toggleOnClick=true;this.selectable=false;this._fromIndex=fromIndex;this._toIndex=toIndex;this._object=object;this._readOnly=true;this._propertyCount=propertyCount;this._linkifier=linkifier;}
static _populateArray(treeNode,object,fromIndex,toIndex,linkifier){Components.ArrayGroupingTreeElement._populateRanges(treeNode,object,fromIndex,toIndex,true,linkifier);}
static _populateRanges(treeNode,object,fromIndex,toIndex,topLevel,linkifier){object.callFunctionJSON(packRanges,[{value:fromIndex},{value:toIndex},{value:Components.ArrayGroupingTreeElement._bucketThreshold},{value:Components.ArrayGroupingTreeElement._sparseIterationThreshold},{value:Components.ArrayGroupingTreeElement._getOwnPropertyNamesThreshold}],callback);function packRanges(fromIndex,toIndex,bucketThreshold,sparseIterationThreshold,getOwnPropertyNamesThreshold){var ownPropertyNames=null;var consecutiveRange=(toIndex-fromIndex>=sparseIterationThreshold)&&ArrayBuffer.isView(this);var skipGetOwnPropertyNames=consecutiveRange&&(toIndex-fromIndex>=getOwnPropertyNamesThreshold);function*arrayIndexes(object){if(toIndex-fromIndex<sparseIterationThreshold){for(var i=fromIndex;i<=toIndex;++i){if(i in object)
yield i;}}else{ownPropertyNames=ownPropertyNames||Object.getOwnPropertyNames(object);for(var i=0;i<ownPropertyNames.length;++i){var name=ownPropertyNames[i];var index=name>>>0;if((''+index)===name&&fromIndex<=index&&index<=toIndex)
yield index;}}}
var count=0;if(consecutiveRange){count=toIndex-fromIndex+1;}else{for(var i of arrayIndexes(this))
++count;}
var bucketSize=count;if(count<=bucketThreshold)
bucketSize=count;else
bucketSize=Math.pow(bucketThreshold,Math.ceil(Math.log(count)/Math.log(bucketThreshold))-1);var ranges=[];if(consecutiveRange){for(var i=fromIndex;i<=toIndex;i+=bucketSize){var groupStart=i;var groupEnd=groupStart+bucketSize-1;if(groupEnd>toIndex)
groupEnd=toIndex;ranges.push([groupStart,groupEnd,groupEnd-groupStart+1]);}}else{count=0;var groupStart=-1;var groupEnd=0;for(var i of arrayIndexes(this)){if(groupStart===-1)
groupStart=i;groupEnd=i;if(++count===bucketSize){ranges.push([groupStart,groupEnd,count]);count=0;groupStart=-1;}}
if(count>0)
ranges.push([groupStart,groupEnd,count]);}
return{ranges:ranges,skipGetOwnPropertyNames:skipGetOwnPropertyNames};}
function callback(result){if(!result)
return;var ranges=(result.ranges);if(ranges.length===1){Components.ArrayGroupingTreeElement._populateAsFragment(treeNode,object,ranges[0][0],ranges[0][1],linkifier);}else{for(var i=0;i<ranges.length;++i){var fromIndex=ranges[i][0];var toIndex=ranges[i][1];var count=ranges[i][2];if(fromIndex===toIndex)
Components.ArrayGroupingTreeElement._populateAsFragment(treeNode,object,fromIndex,toIndex,linkifier);else
treeNode.appendChild(new Components.ArrayGroupingTreeElement(object,fromIndex,toIndex,count,linkifier));}}
if(topLevel){Components.ArrayGroupingTreeElement._populateNonIndexProperties(treeNode,object,result.skipGetOwnPropertyNames,linkifier);}}}
static _populateAsFragment(treeNode,object,fromIndex,toIndex,linkifier){object.callFunction(buildArrayFragment,[{value:fromIndex},{value:toIndex},{value:Components.ArrayGroupingTreeElement._sparseIterationThreshold}],processArrayFragment.bind(this));function buildArrayFragment(fromIndex,toIndex,sparseIterationThreshold){var result=Object.create(null);if(toIndex-fromIndex<sparseIterationThreshold){for(var i=fromIndex;i<=toIndex;++i){if(i in this)
result[i]=this[i];}}else{var ownPropertyNames=Object.getOwnPropertyNames(this);for(var i=0;i<ownPropertyNames.length;++i){var name=ownPropertyNames[i];var index=name>>>0;if(String(index)===name&&fromIndex<=index&&index<=toIndex)
result[index]=this[index];}}
return result;}
function processArrayFragment(arrayFragment,wasThrown){if(!arrayFragment||wasThrown)
return;arrayFragment.getAllProperties(false,processProperties.bind(this));}
function processProperties(properties,internalProperties){if(!properties)
return;properties.sort(Components.ObjectPropertiesSection.CompareProperties);for(var i=0;i<properties.length;++i){properties[i].parentObject=this._object;var childTreeElement=new Components.ObjectPropertyTreeElement(properties[i],linkifier);childTreeElement._readOnly=true;treeNode.appendChild(childTreeElement);}}}
static _populateNonIndexProperties(treeNode,object,skipGetOwnPropertyNames,linkifier){object.callFunction(buildObjectFragment,[{value:skipGetOwnPropertyNames}],processObjectFragment.bind(this));function buildObjectFragment(skipGetOwnPropertyNames){var result={__proto__:this.__proto__};if(skipGetOwnPropertyNames)
return result;var names=Object.getOwnPropertyNames(this);for(var i=0;i<names.length;++i){var name=names[i];if(String(name>>>0)===name&&name>>>0!==0xffffffff)
continue;var descriptor=Object.getOwnPropertyDescriptor(this,name);if(descriptor)
Object.defineProperty(result,name,descriptor);}
return result;}
function processObjectFragment(arrayFragment,wasThrown){if(!arrayFragment||wasThrown)
return;arrayFragment.getOwnProperties(processProperties.bind(this));}
function processProperties(properties,internalProperties){if(!properties)
return;properties.sort(Components.ObjectPropertiesSection.CompareProperties);for(var i=0;i<properties.length;++i){properties[i].parentObject=this._object;var childTreeElement=new Components.ObjectPropertyTreeElement(properties[i],linkifier);childTreeElement._readOnly=true;treeNode.appendChild(childTreeElement);}}}
onpopulate(){if(this._propertyCount>=Components.ArrayGroupingTreeElement._bucketThreshold){Components.ArrayGroupingTreeElement._populateRanges(this,this._object,this._fromIndex,this._toIndex,false,this._linkifier);return;}
Components.ArrayGroupingTreeElement._populateAsFragment(this,this._object,this._fromIndex,this._toIndex,this._linkifier);}
onattach(){this.listItemElement.classList.add('object-properties-section-name');}};Components.ArrayGroupingTreeElement._bucketThreshold=100;Components.ArrayGroupingTreeElement._sparseIterationThreshold=250000;Components.ArrayGroupingTreeElement._getOwnPropertyNamesThreshold=500000;Components.ObjectPropertyPrompt=class extends UI.TextPrompt{constructor(){super();this.initialize(Components.JavaScriptAutocomplete.completionsForTextInCurrentContext);}};Components.ObjectPropertiesSection._functionPrefixSource=/^(?:async\s)?function\*?\s/;Components.ObjectPropertiesSectionExpandController=class{constructor(){this._expandedProperties=new Set();}
watchSection(id,section){section.addEventListener(TreeOutline.Events.ElementAttached,this._elementAttached,this);section.addEventListener(TreeOutline.Events.ElementExpanded,this._elementExpanded,this);section.addEventListener(TreeOutline.Events.ElementCollapsed,this._elementCollapsed,this);section[Components.ObjectPropertiesSectionExpandController._treeOutlineId]=id;if(this._expandedProperties.has(id))
section.expand();}
stopWatchSectionsWithId(id){for(var property of this._expandedProperties){if(property.startsWith(id+':'))
this._expandedProperties.delete(property);}}
_elementAttached(event){var element=(event.data);if(element.isExpandable()&&this._expandedProperties.has(this._propertyPath(element)))
element.expand();}
_elementExpanded(event){var element=(event.data);this._expandedProperties.add(this._propertyPath(element));}
_elementCollapsed(event){var element=(event.data);this._expandedProperties.delete(this._propertyPath(element));}
_propertyPath(treeElement){var cachedPropertyPath=treeElement[Components.ObjectPropertiesSectionExpandController._cachedPathSymbol];if(cachedPropertyPath)
return cachedPropertyPath;var current=treeElement;var rootElement=treeElement.treeOutline.objectTreeElement();var result;while(current!==rootElement){var currentName='';if(current.property)
currentName=current.property.name;else
currentName=typeof current.title==='string'?current.title:current.title.textContent;result=currentName+(result?'.'+result:'');current=current.parent;}
var treeOutlineId=treeElement.treeOutline[Components.ObjectPropertiesSectionExpandController._treeOutlineId];result=treeOutlineId+(result?':'+result:'');treeElement[Components.ObjectPropertiesSectionExpandController._cachedPathSymbol]=result;return result;}};Components.ObjectPropertiesSectionExpandController._cachedPathSymbol=Symbol('cachedPath');Components.ObjectPropertiesSectionExpandController._treeOutlineId=Symbol('treeOutlineId');;Components.RemoteObjectPreviewFormatter=class{appendObjectPreview(parentElement,preview){var description=preview.description;if(preview.type!=='object'||preview.subtype==='null'){parentElement.appendChild(this.renderPropertyPreview(preview.type,preview.subtype,description));return;}
if(description&&preview.subtype!=='array'&&preview.subtype!=='typedarray'){var text=preview.subtype?description:this._abbreviateFullQualifiedClassName(description);parentElement.createTextChildren(text,' ');}
if(preview.entries)
this._appendEntriesPreview(parentElement,preview);else
this._appendPropertiesPreview(parentElement,preview);}
_abbreviateFullQualifiedClassName(description){var abbreviatedDescription=description.split('.');for(var i=0;i<abbreviatedDescription.length-1;++i)
abbreviatedDescription[i]=abbreviatedDescription[i].trimMiddle(3);return abbreviatedDescription.join('.');}
_appendPropertiesPreview(parentElement,preview){var isArray=preview.subtype==='array'||preview.subtype==='typedarray';var arrayLength=SDK.RemoteObject.arrayLength(preview);var properties=preview.properties;if(isArray)
properties=properties.slice().stableSort(compareIndexesFirst);else
properties=properties.slice().stableSort(compareFunctionsLast);function compareFunctionsLast(a,b){if(a.type!=='function'&&b.type==='function')
return-1;if(a.type==='function'&&b.type!=='function')
return 1;return 0;}
function compareIndexesFirst(a,b){var index1=toArrayIndex(a.name);var index2=toArrayIndex(b.name);if(index1<0)
return index2<0?0:1;return index2<0?-1:index1-index2;}
function toArrayIndex(name){var index=name>>>0;if(String(index)===name&&index<arrayLength)
return index;return-1;}
parentElement.createTextChild(isArray?'[':'{');for(var i=0;i<properties.length;++i){if(i>0)
parentElement.createTextChild(', ');var property=properties[i];var name=property.name;if(!isArray||name!==String(i)||i>=arrayLength){if(/^\s|\s$|^$|\n/.test(name))
parentElement.createChild('span','name').createTextChildren('"',name.replace(/\n/g,'\u21B5'),'"');else
parentElement.createChild('span','name').textContent=name;parentElement.createTextChild(': ');}
parentElement.appendChild(this._renderPropertyPreviewOrAccessor([property]));}
if(preview.overflow)
parentElement.createChild('span').textContent='\u2026';parentElement.createTextChild(isArray?']':'}');}
_appendEntriesPreview(parentElement,preview){parentElement.createTextChild('{');for(var i=0;i<preview.entries.length;++i){if(i>0)
parentElement.createTextChild(', ');var entry=preview.entries[i];if(entry.key){this.appendObjectPreview(parentElement,entry.key);parentElement.createTextChild(' => ');}
this.appendObjectPreview(parentElement,entry.value);}
if(preview.overflow)
parentElement.createChild('span').textContent='\u2026';parentElement.createTextChild('}');}
_renderPropertyPreviewOrAccessor(propertyPath){var property=propertyPath.peekLast();return this.renderPropertyPreview(property.type,(property.subtype),property.value);}
renderPropertyPreview(type,subtype,description){var span=createElementWithClass('span','object-value-'+(subtype||type));description=description||'';if(type==='function'){span.textContent='function';return span;}
if(type==='object'&&subtype==='node'&&description){Components.DOMPresentationUtils.createSpansForNodeTitle(span,description);return span;}
if(type==='string'){span.createTextChildren('"',description.replace(/\n/g,'\u21B5'),'"');return span;}
if(type==='object'&&!subtype){span.textContent=this._abbreviateFullQualifiedClassName(description);return span;}
span.textContent=description;return span;}};;Components.RequestAppBannerActionDelegate=class{handleAction(context,actionId){var target=SDK.targetManager.mainTarget();if(target&&target.hasBrowserCapability()){target.pageAgent().requestAppBanner();Common.console.show();}
return true;}};;Components.ShortcutsScreen=class{constructor(){this._sections={};}
static registerShortcuts(){var elementsSection=Components.shortcutsScreen.section(Common.UIString('Elements Panel'));var navigate=Components.ShortcutsScreen.ElementsPanelShortcuts.NavigateUp.concat(Components.ShortcutsScreen.ElementsPanelShortcuts.NavigateDown);elementsSection.addRelatedKeys(navigate,Common.UIString('Navigate elements'));var expandCollapse=Components.ShortcutsScreen.ElementsPanelShortcuts.Expand.concat(Components.ShortcutsScreen.ElementsPanelShortcuts.Collapse);elementsSection.addRelatedKeys(expandCollapse,Common.UIString('Expand/collapse'));elementsSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.EditAttribute,Common.UIString('Edit attribute'));elementsSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.HideElement,Common.UIString('Hide element'));elementsSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.ToggleEditAsHTML,Common.UIString('Toggle edit as HTML'));var stylesPaneSection=Components.shortcutsScreen.section(Common.UIString('Styles Pane'));var nextPreviousProperty=Components.ShortcutsScreen.ElementsPanelShortcuts.NextProperty.concat(Components.ShortcutsScreen.ElementsPanelShortcuts.PreviousProperty);stylesPaneSection.addRelatedKeys(nextPreviousProperty,Common.UIString('Next/previous property'));stylesPaneSection.addRelatedKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.IncrementValue,Common.UIString('Increment value'));stylesPaneSection.addRelatedKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.DecrementValue,Common.UIString('Decrement value'));stylesPaneSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.IncrementBy10,Common.UIString('Increment by %f',10));stylesPaneSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.DecrementBy10,Common.UIString('Decrement by %f',10));stylesPaneSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.IncrementBy100,Common.UIString('Increment by %f',100));stylesPaneSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.DecrementBy100,Common.UIString('Decrement by %f',100));stylesPaneSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.IncrementBy01,Common.UIString('Increment by %f',0.1));stylesPaneSection.addAlternateKeys(Components.ShortcutsScreen.ElementsPanelShortcuts.DecrementBy01,Common.UIString('Decrement by %f',0.1));var section=Components.shortcutsScreen.section(Common.UIString('Debugger'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('debugger.toggle-pause'),Common.UIString('Pause/ Continue'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('debugger.step-over'),Common.UIString('Step over'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('debugger.step-into'),Common.UIString('Step into'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('debugger.step-out'),Common.UIString('Step out'));var nextAndPrevFrameKeys=Components.ShortcutsScreen.SourcesPanelShortcuts.NextCallFrame.concat(Components.ShortcutsScreen.SourcesPanelShortcuts.PrevCallFrame);section.addRelatedKeys(nextAndPrevFrameKeys,Common.UIString('Next/previous call frame'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.EvaluateSelectionInConsole,Common.UIString('Evaluate selection in console'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.AddSelectionToWatch,Common.UIString('Add selection to watch'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.ToggleBreakpoint,Common.UIString('Toggle breakpoint'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('debugger.toggle-breakpoints-active'),Common.UIString('Toggle all breakpoints'));section=Components.shortcutsScreen.section(Common.UIString('Text Editor'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.GoToMember,Common.UIString('Go to member'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.ToggleAutocompletion,Common.UIString('Autocompletion'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.GoToLine,Common.UIString('Go to line'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.JumpToPreviousLocation,Common.UIString('Jump to previous editing location'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.JumpToNextLocation,Common.UIString('Jump to next editing location'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.ToggleComment,Common.UIString('Toggle comment'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.IncreaseCSSUnitByOne,Common.UIString('Increment CSS unit by 1'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.DecreaseCSSUnitByOne,Common.UIString('Decrement CSS unit by 1'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.IncreaseCSSUnitByTen,Common.UIString('Increment CSS unit by 10'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.DecreaseCSSUnitByTen,Common.UIString('Decrement CSS unit by 10'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.SelectNextOccurrence,Common.UIString('Select next occurrence'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.SoftUndo,Common.UIString('Soft undo'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.GotoMatchingBracket,Common.UIString('Go to matching bracket'));section.addAlternateKeys(Components.ShortcutsScreen.SourcesPanelShortcuts.CloseEditorTab,Common.UIString('Close editor tab'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('sources.switch-file'),Common.UIString('Switch between files with the same name and different extensions.'));section=Components.shortcutsScreen.section(Common.UIString('Timeline Panel'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('timeline.toggle-recording'),Common.UIString('Start/stop recording'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('main.reload'),Common.UIString('Record page reload'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('timeline.save-to-file'),Common.UIString('Save timeline data'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('timeline.load-from-file'),Common.UIString('Load timeline data'));section.addRelatedKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('timeline.jump-to-previous-frame').concat(UI.shortcutRegistry.shortcutDescriptorsForAction('timeline.jump-to-next-frame')),Common.UIString('Jump to previous/next frame'));section=Components.shortcutsScreen.section(Common.UIString('Profiles Panel'));section.addAlternateKeys(UI.shortcutRegistry.shortcutDescriptorsForAction('profiler.toggle-recording'),Common.UIString('Start/stop recording'));if(Runtime.experiments.isEnabled('layersPanel')){section=Components.shortcutsScreen.section(Common.UIString('Layers Panel'));section.addAlternateKeys(Components.ShortcutsScreen.LayersPanelShortcuts.ResetView,Common.UIString('Reset view'));section.addAlternateKeys(Components.ShortcutsScreen.LayersPanelShortcuts.PanMode,Common.UIString('Switch to pan mode'));section.addAlternateKeys(Components.ShortcutsScreen.LayersPanelShortcuts.RotateMode,Common.UIString('Switch to rotate mode'));section.addAlternateKeys(Components.ShortcutsScreen.LayersPanelShortcuts.TogglePanRotate,Common.UIString('Temporarily toggle pan/rotate mode while held'));section.addAlternateKeys(Components.ShortcutsScreen.LayersPanelShortcuts.ZoomIn,Common.UIString('Zoom in'));section.addAlternateKeys(Components.ShortcutsScreen.LayersPanelShortcuts.ZoomOut,Common.UIString('Zoom out'));section.addRelatedKeys(Components.ShortcutsScreen.LayersPanelShortcuts.Up.concat(Components.ShortcutsScreen.LayersPanelShortcuts.Down),Common.UIString('Pan or rotate up/down'));section.addRelatedKeys(Components.ShortcutsScreen.LayersPanelShortcuts.Left.concat(Components.ShortcutsScreen.LayersPanelShortcuts.Right),Common.UIString('Pan or rotate left/right'));}}
section(name){var section=this._sections[name];if(!section)
this._sections[name]=section=new Components.ShortcutsSection(name);return section;}
createShortcutsTabView(){var orderedSections=[];for(var section in this._sections)
orderedSections.push(this._sections[section]);function compareSections(a,b){return a.order-b.order;}
orderedSections.sort(compareSections);var widget=new UI.Widget();widget.element.className='settings-tab-container';widget.element.createChild('header').createChild('h3').createTextChild(Common.UIString('Shortcuts'));var scrollPane=widget.element.createChild('div','help-container-wrapper');var container=scrollPane.createChild('div');container.className='help-content help-container';for(var i=0;i<orderedSections.length;++i)
orderedSections[i].renderSection(container);var note=scrollPane.createChild('p','help-footnote');note.appendChild(UI.createDocumentationLink('iterate/inspect-styles/shortcuts',Common.UIString('Full list of DevTools keyboard shortcuts and gestures')));return widget;}};Components.shortcutsScreen;Components.ShortcutsSection=class{constructor(name){this.name=name;this._lines=([]);this.order=++Components.ShortcutsSection._sequenceNumber;}
addKey(key,description){this._addLine(this._renderKey(key),description);}
addRelatedKeys(keys,description){this._addLine(this._renderSequence(keys,'/'),description);}
addAlternateKeys(keys,description){this._addLine(this._renderSequence(keys,Common.UIString('or')),description);}
_addLine(keyElement,description){this._lines.push({key:keyElement,text:description});}
renderSection(container){var parent=container.createChild('div','help-block');var headLine=parent.createChild('div','help-line');headLine.createChild('div','help-key-cell');headLine.createChild('div','help-section-title help-cell').textContent=this.name;for(var i=0;i<this._lines.length;++i){var line=parent.createChild('div','help-line');var keyCell=line.createChild('div','help-key-cell');keyCell.appendChild(this._lines[i].key);keyCell.appendChild(this._createSpan('help-key-delimiter',':'));line.createChild('div','help-cell').textContent=this._lines[i].text;}}
_renderSequence(sequence,delimiter){var delimiterSpan=this._createSpan('help-key-delimiter',delimiter);return this._joinNodes(sequence.map(this._renderKey.bind(this)),delimiterSpan);}
_renderKey(key){var keyName=key.name;var plus=this._createSpan('help-combine-keys','+');return this._joinNodes(keyName.split(' + ').map(this._createSpan.bind(this,'help-key')),plus);}
_createSpan(className,textContent){var node=createElement('span');node.className=className;node.textContent=textContent;return node;}
_joinNodes(nodes,delimiter){var result=createDocumentFragment();for(var i=0;i<nodes.length;++i){if(i>0)
result.appendChild(delimiter.cloneNode(true));result.appendChild(nodes[i]);}
return result;}};Components.ShortcutsSection._sequenceNumber=0;Components.ShortcutsScreen.ElementsPanelShortcuts={NavigateUp:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Up)],NavigateDown:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Down)],Expand:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Right)],Collapse:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Left)],EditAttribute:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Enter)],HideElement:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.H)],ToggleEditAsHTML:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.F2)],NextProperty:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Tab)],PreviousProperty:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Tab,UI.KeyboardShortcut.Modifiers.Shift)],IncrementValue:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Up)],DecrementValue:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Down)],IncrementBy10:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.PageUp),UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Up,UI.KeyboardShortcut.Modifiers.Shift)],DecrementBy10:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.PageDown),UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Down,UI.KeyboardShortcut.Modifiers.Shift)],IncrementBy100:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.PageUp,UI.KeyboardShortcut.Modifiers.Shift)],DecrementBy100:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.PageDown,UI.KeyboardShortcut.Modifiers.Shift)],IncrementBy01:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Up,UI.KeyboardShortcut.Modifiers.Alt)],DecrementBy01:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Down,UI.KeyboardShortcut.Modifiers.Alt)]};Components.ShortcutsScreen.SourcesPanelShortcuts={SelectNextOccurrence:[UI.KeyboardShortcut.makeDescriptor('d',UI.KeyboardShortcut.Modifiers.CtrlOrMeta)],SoftUndo:[UI.KeyboardShortcut.makeDescriptor('u',UI.KeyboardShortcut.Modifiers.CtrlOrMeta)],GotoMatchingBracket:[UI.KeyboardShortcut.makeDescriptor('m',UI.KeyboardShortcut.Modifiers.Ctrl)],ToggleAutocompletion:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Space,UI.KeyboardShortcut.Modifiers.Ctrl)],IncreaseCSSUnitByOne:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Up,UI.KeyboardShortcut.Modifiers.Alt)],DecreaseCSSUnitByOne:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Down,UI.KeyboardShortcut.Modifiers.Alt)],IncreaseCSSUnitByTen:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.PageUp,UI.KeyboardShortcut.Modifiers.Alt)],DecreaseCSSUnitByTen:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.PageDown,UI.KeyboardShortcut.Modifiers.Alt)],EvaluateSelectionInConsole:[UI.KeyboardShortcut.makeDescriptor('e',UI.KeyboardShortcut.Modifiers.Shift|UI.KeyboardShortcut.Modifiers.Ctrl)],AddSelectionToWatch:[UI.KeyboardShortcut.makeDescriptor('a',UI.KeyboardShortcut.Modifiers.Shift|UI.KeyboardShortcut.Modifiers.Ctrl)],GoToMember:[UI.KeyboardShortcut.makeDescriptor('o',UI.KeyboardShortcut.Modifiers.CtrlOrMeta|UI.KeyboardShortcut.Modifiers.Shift)],GoToLine:[UI.KeyboardShortcut.makeDescriptor('g',UI.KeyboardShortcut.Modifiers.Ctrl)],ToggleBreakpoint:[UI.KeyboardShortcut.makeDescriptor('b',UI.KeyboardShortcut.Modifiers.CtrlOrMeta)],NextCallFrame:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Period,UI.KeyboardShortcut.Modifiers.Ctrl)],PrevCallFrame:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Comma,UI.KeyboardShortcut.Modifiers.Ctrl)],ToggleComment:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Slash,UI.KeyboardShortcut.Modifiers.CtrlOrMeta)],JumpToPreviousLocation:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Minus,UI.KeyboardShortcut.Modifiers.Alt)],JumpToNextLocation:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Plus,UI.KeyboardShortcut.Modifiers.Alt)],CloseEditorTab:[UI.KeyboardShortcut.makeDescriptor('w',UI.KeyboardShortcut.Modifiers.Alt)],Save:[UI.KeyboardShortcut.makeDescriptor('s',UI.KeyboardShortcut.Modifiers.CtrlOrMeta)],SaveAll:[UI.KeyboardShortcut.makeDescriptor('s',UI.KeyboardShortcut.Modifiers.CtrlOrMeta|UI.KeyboardShortcut.Modifiers.ShiftOrOption)],};Components.ShortcutsScreen.LayersPanelShortcuts={ResetView:[UI.KeyboardShortcut.makeDescriptor('0')],PanMode:[UI.KeyboardShortcut.makeDescriptor('x')],RotateMode:[UI.KeyboardShortcut.makeDescriptor('v')],TogglePanRotate:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Shift)],ZoomIn:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Plus,UI.KeyboardShortcut.Modifiers.Shift),UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.NumpadPlus)],ZoomOut:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Minus,UI.KeyboardShortcut.Modifiers.Shift),UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.NumpadMinus)],Up:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Up),UI.KeyboardShortcut.makeDescriptor('w')],Down:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Down),UI.KeyboardShortcut.makeDescriptor('s')],Left:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Left),UI.KeyboardShortcut.makeDescriptor('a')],Right:[UI.KeyboardShortcut.makeDescriptor(UI.KeyboardShortcut.Keys.Right),UI.KeyboardShortcut.makeDescriptor('d')]};;Components.Spectrum=class extends UI.VBox{constructor(){function appendSwitcherIcon(parentElement){var icon=parentElement.createSVGChild('svg');icon.setAttribute('height',16);icon.setAttribute('width',16);var path=icon.createSVGChild('path');path.setAttribute('d','M5,6 L11,6 L8,2 Z M5,10 L11,10 L8,14 Z');return icon;}
super(true);this.registerRequiredCSS('components/spectrum.css');this.contentElement.tabIndex=0;this.setDefaultFocusedElement(this.contentElement);this._colorElement=this.contentElement.createChild('div','spectrum-color');this._colorDragElement=this._colorElement.createChild('div','spectrum-sat fill').createChild('div','spectrum-val fill').createChild('div','spectrum-dragger');var contrastRatioSVG=this._colorElement.createSVGChild('svg','spectrum-contrast-container fill');this._contrastRatioLine=contrastRatioSVG.createSVGChild('path','spectrum-contrast-line');var toolbar=new UI.€€